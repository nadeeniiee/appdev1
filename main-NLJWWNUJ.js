var wC=Object.defineProperty,DC=Object.defineProperties;var TC=Object.getOwnPropertyDescriptors;var oy=Object.getOwnPropertySymbols;var CC=Object.prototype.hasOwnProperty,bC=Object.prototype.propertyIsEnumerable;var sy=(n,e,t)=>e in n?wC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,we=(n,e)=>{for(var t in e||={})CC.call(e,t)&&sy(n,t,e[t]);if(oy)for(var t of oy(e))bC.call(e,t)&&sy(n,t,e[t]);return n},xe=(n,e)=>DC(n,TC(e));var b=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(d){i(d)}},s=u=>{try{c(t.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});var hl;function ea(){return hl}function At(n){let e=hl;return hl=n,e}var ay=Symbol("NotFound");function qr(n){return n===ay||n?.name==="\u0275NotFound"}var Oe=null,ta=!1,pl=1,AC=null,qn=Symbol("SIGNAL");function Y(n){let e=Oe;return Oe=n,e}function na(){return Oe}var ra={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cy(n){if(ta)throw new Error("");if(Oe===null)return;Oe.consumerOnSignalRead(n);let e=Oe.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Oe.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Oe.producers,t!==void 0&&t.producer===n)){Oe.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Oe&&(!r||NC(i,Oe)))return;let o=zr(Oe),s={producer:n,consumer:Oe,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Oe.producersTail=s,e!==void 0?e.nextProducer=s:Oe.producers=s,o&&py(n,s)}function uy(){pl++}function ly(n){if(!(zr(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===pl)){if(!n.producerMustRecompute(n)&&!vl(n)){fl(n);return}n.producerRecomputeValue(n),fl(n)}}function gl(n){if(n.consumers===void 0)return;let e=ta;ta=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||SC(r)}}finally{ta=e}}function ml(){return Oe?.consumerAllowSignalWrites!==!1}function SC(n){n.dirty=!0,gl(n),n.consumerMarkedDirty?.(n)}function fl(n){n.dirty=!1,n.lastCleanEpoch=pl}function yl(n){return n&&dy(n),Y(n)}function dy(n){n.producersTail=void 0,n.recomputing=!0}function hy(n,e){Y(e),n&&fy(n)}function fy(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(zr(n))do t=El(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function vl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ly(t),r!==t.version))return!0}return!1}function _l(n){if(zr(n)){let e=n.producers;for(;e!==void 0;)e=El(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function py(n,e){let t=n.consumersTail,r=zr(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)py(i.producer,i)}function El(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!zr(e)){let o=e.producers;for(;o!==void 0;)o=El(o)}return t}function zr(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function gy(n){AC?.(n)}function NC(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function my(n,e){return Object.is(n,e)}function RC(){throw new Error}var yy=RC;function vy(n){yy(n)}function Il(n){yy=n}var MC=null;function wl(n,e){let t=Object.create(Iy);t.value=n,e!==void 0&&(t.equal=e);let r=()=>_y(t);return r[qn]=t,gy(t),[r,s=>Dl(t,s),s=>Ey(t,s)]}function _y(n){return cy(n),n.value}function Dl(n,e){ml()||vy(n),n.equal(n.value,e)||(n.value=e,PC(n))}function Ey(n,e){ml()||vy(n),Dl(n,e(n.value))}var Iy=xe(we({},ra),{equal:my,value:void 0,kind:"signal"});function PC(n){n.version++,uy(),gl(n),MC?.(n)}function Ge(n){return typeof n=="function"}function ia(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var oa=ia(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function zn(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ae=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ge(r))try{r()}catch(o){e=o instanceof oa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{wy(o)}catch(s){e=e??[],s instanceof oa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oa(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wy(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&zn(t,e)}remove(e){let{_finalizers:t}=this;t&&zn(t,e),e instanceof n&&e._removeParent(this)}};Ae.EMPTY=(()=>{let n=new Ae;return n.closed=!0,n})();var Tl=Ae.EMPTY;function sa(n){return n instanceof Ae||n&&"closed"in n&&Ge(n.remove)&&Ge(n.add)&&Ge(n.unsubscribe)}function wy(n){Ge(n)?n():n.unsubscribe()}var gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gr={setTimeout(n,e,...t){let{delegate:r}=Gr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Dy(n){Gr.setTimeout(()=>{let{onUnhandledError:e}=gt;if(e)e(n);else throw n})}function Cl(){}var Ty=bl("C",void 0,void 0);function Cy(n){return bl("E",void 0,n)}function by(n){return bl("N",n,void 0)}function bl(n,e,t){return{kind:n,value:e,error:t}}var Gn=null;function Wr(n){if(gt.useDeprecatedSynchronousErrorHandling){let e=!Gn;if(e&&(Gn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Gn;if(Gn=null,t)throw r}}else n()}function Ay(n){gt.useDeprecatedSynchronousErrorHandling&&Gn&&(Gn.errorThrown=!0,Gn.error=n)}var Wn=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sa(e)&&e.add(this)):this.destination=OC}static create(e,t,r){return new Kr(e,t,r)}next(e){this.isStopped?Sl(by(e),this):this._next(e)}error(e){this.isStopped?Sl(Cy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sl(Ty,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kC=Function.prototype.bind;function Al(n,e){return kC.call(n,e)}var Nl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){aa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){aa(r)}else aa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){aa(t)}}},Kr=class extends Wn{constructor(e,t,r){super();let i;if(Ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&gt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Al(e.next,o),error:e.error&&Al(e.error,o),complete:e.complete&&Al(e.complete,o)}):i=e}this.destination=new Nl(i)}};function aa(n){gt.useDeprecatedSynchronousErrorHandling?Ay(n):Dy(n)}function xC(n){throw n}function Sl(n,e){let{onStoppedNotification:t}=gt;t&&Gr.setTimeout(()=>t(n,e))}var OC={closed:!0,next:Cl,error:xC,complete:Cl};var Sy=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ny(n){return n}function Ry(n){return n.length===0?Ny:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Xe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=LC(t)?t:new Kr(t,r,i);return Wr(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=My(r),new r((i,o)=>{let s=new Kr({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Sy](){return this}pipe(...t){return Ry(t)(this)}toPromise(t){return t=My(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function My(n){var e;return(e=n??gt.Promise)!==null&&e!==void 0?e:Promise}function FC(n){return n&&Ge(n.next)&&Ge(n.error)&&Ge(n.complete)}function LC(n){return n&&n instanceof Wn||FC(n)&&sa(n)}function VC(n){return Ge(n?.lift)}function Qr(n){return e=>{if(VC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ca(n,e,t,r,i){return new Rl(n,e,t,r,i)}var Rl=class extends Wn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Py=ia(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Kn=(()=>{class n extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ua(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Py}next(t){Wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tl:(this.currentObservers=null,o.push(t),new Ae(()=>{this.currentObservers=null,zn(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Xe;return t.source=this,t}}return n.create=(e,t)=>new ua(e,t),n})(),ua=class extends Kn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Tl}};var Io=class extends Kn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ml={now(){return(Ml.delegate||Date).now()},delegate:void 0};var la=class extends Ae{constructor(e,t){super()}schedule(e,t=0){return this}};var wo={setInterval(n,e,...t){let{delegate:r}=wo;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=wo;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Yr=class extends la{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return wo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&wo.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,zn(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zr=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zr.now=Ml.now;var Jr=class extends Zr{constructor(e,t=Zr.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Pl=new Jr(Yr);var da=class extends Yr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ha=class extends Jr{};var kl=new ha(da);function xl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function fa(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function pa(n,e=0){return Qr((t,r)=>{t.subscribe(ca(r,i=>fa(r,n,()=>r.next(i),e),()=>fa(r,n,()=>r.complete(),e),i=>fa(r,n,()=>r.error(i),e)))})}function ga(n,e=0){return Qr((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Xr(n,e){return Qr((t,r)=>{let i=0;t.subscribe(ca(r,o=>{r.next(n.call(e,o,i++))}))})}var Yn=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Wl=new Yn("20.3.12");var q=class extends Error{code;constructor(e,t){super(Kl(e,t)),this.code=e}};function BC(n){return`NG0${Math.abs(n)}`}function Kl(n,e){return`${BC(n)}${e?": "+e:""}`}var bo=globalThis;function ne(n){for(let e in n)if(n[e]===ne)return e;throw Error("")}function Zn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Zn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ql(n,e){return n?e?`${n} ${e}`:n:e||""}var UC=ne({__forward_ref__:ne});function Ao(n){return n.__forward_ref__=Ao,n.toString=function(){return Zn(this())},n}function We(n){return Oy(n)?n():n}function Oy(n){return typeof n=="function"&&n.hasOwnProperty(UC)&&n.__forward_ref__===Ao}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ea(n){return $C(n,ni)}function $C(n,e){return n.hasOwnProperty(e)&&n[e]||null}function HC(n){let e=n?.[ni]??null;return e||null}function Fl(n){return n&&n.hasOwnProperty(ya)?n[ya]:null}var ni=ne({\u0275prov:ne}),ya=ne({\u0275inj:ne}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yl(n){return n&&!!n.\u0275providers}var Zl=ne({\u0275cmp:ne}),Jl=ne({\u0275dir:ne}),Xl=ne({\u0275pipe:ne});var To=ne({\u0275fac:ne}),er=ne({__NG_ELEMENT_ID__:ne}),ky=ne({__NG_ENV_ID__:ne});function ed(n){return typeof n=="string"?n:n==null?"":String(n)}function Fy(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ed(n)}var Ly=ne({ngErrorCode:ne}),qC=ne({ngErrorMessage:ne}),zC=ne({ngTokenPath:ne});function td(n,e){return Vy("",-200,e)}function Ia(n,e){throw new q(-201,!1)}function Vy(n,e,t){let r=new q(e,n);return r[Ly]=e,r[qC]=n,t&&(r[zC]=t),r}function GC(n){return n[Ly]}var Ll;function jy(){return Ll}function et(n){let e=Ll;return Ll=n,e}function nd(n,e,t){let r=Ea(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ia(n,"Injector")}var WC={},Qn=WC,Vl="__NG_DI_FLAG__",jl=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Jn(t)||0;try{return this.injector.get(e,r&8?null:Qn,r)}catch(i){if(qr(i))return i;throw i}}};function KC(n,e=0){let t=ea();if(t===void 0)throw new q(-203,!1);if(t===null)return nd(n,void 0,e);{let r=QC(e),i=t.retrieve(n,r);if(qr(i)){if(r.optional)return null;throw i}return i}}function re(n,e=0){return(jy()||KC)(We(n),e)}function rd(n){throw new q(202,!1)}function j(n,e){return re(n,Jn(e))}function Jn(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function QC(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Bl(n){let e=[];for(let t=0;t<n.length;t++){let r=We(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=YC(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(re(i,o))}else e.push(re(r))}return e}function ri(n,e){return n[Vl]=e,n.prototype[Vl]=e,n}function YC(n){return n[Vl]}function ti(n,e){let t=n.hasOwnProperty(To);return t?n[To]:null}function wa(n,e){n.forEach(t=>Array.isArray(t)?wa(t,e):e(t))}function id(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function So(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Da(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}var tr={},mt=[],nr=new K(""),od=new K("",-1),sd=new K(""),Co=class{get(e,t=Qn){if(t===Qn){let i=Vy("",-201);throw i.name="\u0275NotFound",i}return t}};function rr(n){return n[Zl]||null}function ad(n){return n[Jl]||null}function By(n){return n[Xl]||null}function ii(n){return{\u0275providers:n}}function Uy(...n){return{\u0275providers:cd(!0,n),\u0275fromNgModule:!0}}function cd(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wa(e,s=>{let c=s;va(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&$y(i,o),t}function $y(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ud(i,o=>{e(o,r)})}}function va(n,e,t,r){if(n=We(n),!n)return!1;let i=null,o=Fl(n),s=!o&&rr(n);if(!o&&!s){let u=n.ngModule;if(o=Fl(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of u)va(d,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{wa(o.imports,f=>{va(f,e,t,r)&&(d||=[],d.push(f))})}finally{}d!==void 0&&$y(d,e)}if(!c){let d=ti(i)||(()=>new i);e({provide:i,useFactory:d,deps:mt},i),e({provide:sd,useValue:i,multi:!0},i),e({provide:nr,useValue:()=>re(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let d=n;ud(u,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function ud(n,e){for(let t of n)Yl(t)&&(t=t.\u0275providers),Array.isArray(t)?ud(t,e):e(t)}var ZC=ne({provide:String,useValue:ne});function Hy(n){return n!==null&&typeof n=="object"&&ZC in n}function JC(n){return!!(n&&n.useExisting)}function XC(n){return!!(n&&n.useFactory)}function _a(n){return typeof n=="function"}var No=new K(""),ma={},xy={},Ol;function Ro(){return Ol===void 0&&(Ol=new Co),Ol}var Ke=class{},Xn=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,$l(e,s=>this.processProvider(s)),this.records.set(od,ei(void 0,this)),i.has("environment")&&this.records.set(Ke,ei(void 0,this));let o=this.records.get(No);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sd,mt,{self:!0}))}retrieve(e,t){let r=Jn(t)||0;try{return this.get(e,Qn,r)}catch(i){if(qr(i))return i;throw i}}destroy(){Do(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return Do(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Do(this);let t=At(this),r=et(void 0),i;try{return e()}finally{At(t),et(r)}}get(e,t=Qn,r){if(Do(this),e.hasOwnProperty(ky))return e[ky](this);let i=Jn(r),o,s=At(this),c=et(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let f=ib(e)&&Ea(e);f&&this.injectableDefInScope(f)?d=ei(Ul(e),ma):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let u=i&2?Ro():this.parent;return t=i&8&&t===Qn?null:t,u.get(e,t)}catch(u){let d=GC(u);throw d===-200||d===-201?new q(d,null):u}finally{et(c),At(s)}}resolveInjectorInitializers(){let e=Y(null),t=At(this),r=et(void 0),i;try{let o=this.get(nr,mt,{self:!0});for(let s of o)s()}finally{At(t),et(r),Y(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Zn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=We(e);let t=_a(e)?e:We(e&&e.provide),r=tb(e);if(!_a(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ei(void 0,ma,!0),i.factory=()=>Bl(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Y(null);try{if(t.value===xy)throw td(Zn(e));return t.value===ma&&(t.value=xy,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&rb(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Y(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=We(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ul(n){let e=Ea(n),t=e!==null?e.factory:ti(n);if(t!==null)return t;if(n instanceof K)throw new q(204,!1);if(n instanceof Function)return eb(n);throw new q(204,!1)}function eb(n){if(n.length>0)throw new q(204,!1);let t=HC(n);return t!==null?()=>t.factory(n):()=>new n}function tb(n){if(Hy(n))return ei(void 0,n.useValue);{let e=qy(n);return ei(e,ma)}}function qy(n,e,t){let r;if(_a(n)){let i=We(n);return ti(i)||Ul(i)}else if(Hy(n))r=()=>We(n.useValue);else if(XC(n))r=()=>n.useFactory(...Bl(n.deps||[]));else if(JC(n))r=(i,o)=>re(We(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=We(n&&(n.useClass||n.provide));if(nb(n))r=()=>new i(...Bl(n.deps));else return ti(i)||Ul(i)}return r}function Do(n){if(n.destroyed)throw new q(205,!1)}function ei(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function nb(n){return!!n.deps}function rb(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ib(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function $l(n,e){for(let t of n)Array.isArray(t)?$l(t,e):t&&Yl(t)?$l(t.\u0275providers,e):e(t)}function _n(n,e){let t;n instanceof Xn?(Do(n),t=n):t=new jl(n);let r,i=At(t),o=et(void 0);try{return e()}finally{At(i),et(o)}}function zy(){return jy()!==void 0||ea()!=null}var yt=0,G=1,$=2,Se=3,at=4,ct=5,Mo=6,oi=7,Fe=8,En=9,Qt=10,Ne=11,si=12,ld=13,ir=14,vt=15,or=16,sr=17,ar=18,Po=19,dd=20,Wt=21,Ta=22,ko=23,tt=24,Ca=25,xo=26,nt=27,Gy=1;var In=7,Oo=8,Fo=9,Ye=10;function Yt(n){return Array.isArray(n)&&typeof n[Gy]=="object"}function _t(n){return Array.isArray(n)&&n[Gy]===!0}function hd(n){return(n.flags&4)!==0}function cr(n){return n.componentOffset>-1}function Lo(n){return(n.flags&1)===1}function ur(n){return!!n.template}function ai(n){return(n[$]&512)!==0}function lr(n){return(n[$]&256)===256}var Wy="svg",Ky="math";function ut(n){for(;Array.isArray(n);)n=n[yt];return n}function Qy(n,e){return ut(e[n])}function Nt(n,e){return ut(e[n.index])}function ba(n,e){return n.data[e]}function Rt(n,e){let t=e[n];return Yt(t)?t:t[yt]}function Aa(n){return(n[$]&128)===128}function Yy(n){return _t(n[Se])}function Vo(n,e){return e==null?null:n[e]}function fd(n){n[sr]=0}function pd(n){n[$]&1024||(n[$]|=1024,Aa(n)&&Bo(n))}function Zy(n,e){for(;n>0;)e=e[ir],n--;return e}function jo(n){return!!(n[$]&9216||n[tt]?.dirty)}function Sa(n){n[Qt].changeDetectionScheduler?.notify(8),n[$]&64&&(n[$]|=1024),jo(n)&&Bo(n)}function Bo(n){n[Qt].changeDetectionScheduler?.notify(0);let e=yn(n);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!Aa(e)));)e=yn(e)}function gd(n,e){if(lr(n))throw new q(911,!1);n[Wt]===null&&(n[Wt]=[]),n[Wt].push(e)}function Jy(n,e){if(n[Wt]===null)return;let t=n[Wt].indexOf(e);t!==-1&&n[Wt].splice(t,1)}function yn(n){let e=n[Se];return _t(e)?e[Se]:e}function Xy(n){return n[oi]??=[]}function ev(n){return n.cleanup??=[]}var J={lFrame:pv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Hl=!1;function tv(){return J.lFrame.elementDepthCount}function nv(){J.lFrame.elementDepthCount++}function rv(){J.lFrame.elementDepthCount--}function md(){return J.bindingsEnabled}function iv(){return J.skipHydrationRootTNode!==null}function ov(n){return J.skipHydrationRootTNode===n}function sv(){J.skipHydrationRootTNode=null}function De(){return J.lFrame.lView}function dr(){return J.lFrame.tView}function wn(n){return J.lFrame.contextLView=n,n[Fe]}function Dn(n){return J.lFrame.contextLView=null,n}function Et(){let n=yd();for(;n!==null&&n.type===64;)n=n.parent;return n}function yd(){return J.lFrame.currentTNode}function av(){let n=J.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ci(n,e){let t=J.lFrame;t.currentTNode=n,t.isParent=e}function vd(){return J.lFrame.isParent}function cv(){J.lFrame.isParent=!1}function _d(){return Hl}function Ed(n){let e=Hl;return Hl=n,e}function uv(n){return J.lFrame.bindingIndex=n}function Id(){return J.lFrame.bindingIndex++}function lv(){return J.lFrame.inI18n}function dv(n,e){let t=J.lFrame;t.bindingIndex=t.bindingRootIndex=n,Na(e)}function hv(){return J.lFrame.currentDirectiveIndex}function Na(n){J.lFrame.currentDirectiveIndex=n}function wd(n){J.lFrame.currentQueryIndex=n}function ob(n){let e=n[G];return e.type===2?e.declTNode:e.type===1?n[ct]:null}function Dd(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=ob(o),i===null||(o=o[ir],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=J.lFrame=fv();return r.currentTNode=e,r.lView=n,!0}function Ra(n){let e=fv(),t=n[G];J.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fv(){let n=J.lFrame,e=n===null?null:n.child;return e===null?pv(n):e}function pv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function gv(){let n=J.lFrame;return J.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Td=gv;function Ma(){let n=gv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mv(n){return(J.lFrame.contextLView=Zy(n,J.lFrame.contextLView))[Fe]}function Pa(){return J.lFrame.selectedIndex}function Tn(n){J.lFrame.selectedIndex=n}function yv(){let n=J.lFrame;return ba(n.tView,n.selectedIndex)}function vv(){return J.lFrame.currentNamespace}var _v=!0;function ka(){return _v}function xa(n){_v=n}function ql(n,e=null,t=null,r){let i=Ev(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ev(n,e=null,t=null,r,i=new Set){let o=[t||mt,Uy(n)];return r=r||(typeof n=="object"?void 0:Zn(n)),new Xn(o,e||Ro(),r||null,i)}var Qe=class n{static THROW_IF_NOT_FOUND=Qn;static NULL=new Co;static create(e,t){if(Array.isArray(e))return ql({name:""},t,e,"");{let r=e.name??"";return ql({name:r},e.parent,e.providers,r)}}static \u0275prov=se({token:n,providedIn:"any",factory:()=>re(od)});static __NG_ELEMENT_ID__=-1},It=new K(""),ui=(()=>{class n{static __NG_ELEMENT_ID__=sb;static __NG_ENV_ID__=t=>t}return n})(),zl=class extends ui{_lView;constructor(e){super(),this._lView=e}get destroyed(){return lr(this._lView)}onDestroy(e){let t=this._lView;return gd(t,e),()=>Jy(t,e)}};function sb(){return new zl(De())}var St=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Zt=new K("",{providedIn:"root",factory:()=>{let n=j(Ke),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(St),e.handleError(t))}}}),Iv={provide:nr,useValue:()=>void j(St),multi:!0};function Jt(n,e){let[t,r,i]=wl(n,e?.equal),o=t,s=o[qn];return o.set=r,o.update=i,o.asReadonly=wv.bind(o),o}function wv(){let n=this[qn];if(n.readonlyFn===void 0){let e=()=>this();e[qn]=n,n.readonlyFn=e}return n.readonlyFn}var vn=class{},Oa=new K("",{providedIn:"root",factory:()=>!1});var Cd=new K(""),bd=new K(""),Cn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Io(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Xe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})(),li=(()=>{class n{internalPendingTasks=j(Cn);scheduler=j(vn);errorHandler=j(Zt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})();function Uo(...n){}var Ad=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>new Gl})}return n})(),Gl=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function vi(n){return{toString:n}.toString()}var di="__annotations__",hi="__parameters__",Dv="__prop__metadata__";function _b(n,e,t,r,i){return vi(()=>{let o=n_(e);function s(...c){if(this instanceof s)return o.call(this,...c),this;let u=new s(...c);return function(f){return i&&i(f,...c),(f.hasOwnProperty(di)?f[di]:Object.defineProperty(f,di,{value:[]})[di]).push(u),f}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}function n_(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function _i(n,e,t){return vi(()=>{let r=n_(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,d,f){let g=u.hasOwnProperty(hi)?u[hi]:Object.defineProperty(u,hi,{value:[]})[hi];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var r_=ri(_i("Inject",n=>({token:n})),-1),kt=ri(_i("Optional"),8),i_=ri(_i("Self"),2),o_=ri(_i("SkipSelf"),4),s_=ri(_i("Host"),1);function xd(n){let e=bo.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}var Tv={\u0275\u0275defineInjectable:se,\u0275\u0275defineInjector:Kt,\u0275\u0275inject:re,\u0275\u0275invalidFactoryDep:rd,resolveForwardRef:We},a_=Function;function $o(n){return typeof n=="function"}var Eb=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Ib=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,wb=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Db=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;function Tb(n){return Eb.test(n)||Db.test(n)||Ib.test(n)&&!wb.test(n)}var Ba=class{_reflect;constructor(e){this._reflect=e||bo.Reflect}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let r;typeof e>"u"?r=Da(t.length):r=Da(e.length);for(let i=0;i<r.length;i++)typeof e>"u"?r[i]=[]:e[i]&&e[i]!=Object?r[i]=[e[i]]:r[i]=[],t&&t[i]!=null&&(r[i]=r[i].concat(t[i]));return r}_ownParameters(e,t){let r=e.toString();if(Tb(r))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;let i=e.ctorParameters;if(i&&i!==t.ctorParameters){let c=typeof i=="function"?i():i,u=c.map(f=>f&&f.type),d=c.map(f=>f&&Sd(f.decorators));return this._zipTypesAndAnnotations(u,d)}let o=e.hasOwnProperty(hi)&&e[hi],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||o?this._zipTypesAndAnnotations(s,o):Da(e.length)}parameters(e){if(!$o(e))return[];let t=Fa(e),r=this._ownParameters(e,t);return!r&&t!==Object&&(r=this.parameters(t)),r||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let r=e.annotations;return typeof r=="function"&&r.annotations&&(r=r.annotations),r}return e.decorators&&e.decorators!==t.decorators?Sd(e.decorators):e.hasOwnProperty(di)?e[di]:null}annotations(e){if(!$o(e))return[];let t=Fa(e),r=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(r)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let r=e.propMetadata;return typeof r=="function"&&r.propMetadata&&(r=r.propMetadata),r}if(e.propDecorators&&e.propDecorators!==t.propDecorators){let r=e.propDecorators,i={};return Object.keys(r).forEach(o=>{i[o]=Sd(r[o])}),i}return e.hasOwnProperty(Dv)?e[Dv]:null}propMetadata(e){if(!$o(e))return{};let t=Fa(e),r={};if(t!==Object){let o=this.propMetadata(t);Object.keys(o).forEach(s=>{r[s]=o[s]})}let i=this._ownPropMetadata(e,t);return i&&Object.keys(i).forEach(o=>{let s=[];r.hasOwnProperty(o)&&s.push(...r[o]),s.push(...i[o]),r[o]=s}),r}ownPropMetadata(e){return $o(e)?this._ownPropMetadata(e,Fa(e))||{}:{}}hasLifecycleHook(e,t){return e instanceof a_&&t in e.prototype}};function Sd(n){return n?n.map(e=>{let r=e.type.annotationCls,i=e.args?e.args:[];return new r(...i)}):[]}function Fa(n){let e=n.prototype?Object.getPrototypeOf(n.prototype):null;return(e?e.constructor:null)||Object}var Ua=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function c_(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Cb(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ab),bb}function bb(){let n=l_(this),e=n?.current;if(e){let t=n.previous;if(t===tr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ab(n,e,t,r,i){let o=this.declaredInputs[r],s=l_(n)||Sb(n,{previous:tr,current:null}),c=s.current||(s.current={}),u=s.previous,d=u[o];c[o]=new Ua(d&&d.currentValue,t,u===tr),c_(n,e,i,t)}var u_="__ngSimpleChanges__";function l_(n){return n[u_]||null}function Sb(n,e){return n[u_]=e}var Cv=[];var ue=function(n,e=null,t){for(let r=0;r<Cv.length;r++){let i=Cv[r];i(n,e,t)}};function Nb(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Cb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function d_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function La(n,e,t){h_(n,e,3,t)}function Va(n,e,t,r){(n[$]&3)===t&&h_(n,e,t,r)}function Nd(n,e){let t=n[$];(t&3)===e&&(t&=16383,t+=1,n[$]=t)}function h_(n,e,t,r){let i=r!==void 0?n[sr]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[sr]+=65536),(c<o||o==-1)&&(Rb(n,t,e,u),n[sr]=(n[sr]&4294901760)+u+2),u++}function bv(n,e){ue(4,n,e);let t=Y(null);try{e.call(n)}finally{Y(t),ue(5,n,e)}}function Rb(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[$]>>14<n[sr]>>16&&(n[$]&3)===e&&(n[$]+=16384,bv(c,o)):bv(c,o)}var pi=-1,zo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Mb(n){return(n.flags&8)!==0}function Pb(n){return(n.flags&16)!==0}function kb(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];xb(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function f_(n){return n===3||n===4||n===6}function xb(n){return n.charCodeAt(0)===64}function Yd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Av(n,t,i,null,e[++r]):Av(n,t,i,null,null))}}return n}function Av(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function p_(n){return n!==pi}function $a(n){return n&32767}function Ob(n){return n>>16}function Ha(n,e){let t=Ob(n),r=e;for(;t>0;)r=r[ir],t--;return r}var Od=!0;function Sv(n){let e=Od;return Od=n,e}var Fb=256,g_=Fb-1,m_=5,Lb=0,Mt={};function Vb(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(er)&&(r=t[er]),r==null&&(r=t[er]=Lb++);let i=r&g_,o=1<<i;e.data[n+(i>>m_)]|=o}function y_(n,e){let t=v_(n,e);if(t!==-1)return t;let r=e[G];r.firstCreatePass&&(n.injectorIndex=e.length,Rd(r.data,n),Rd(e,null),Rd(r.blueprint,null));let i=Zd(n,e),o=n.injectorIndex;if(p_(i)){let s=$a(i),c=Ha(i,e),u=c[G].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|u[s+d]}return e[o+8]=i,o}function Rd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function v_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Zd(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=D_(i),r===null)return pi;if(t++,i=i[ir],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return pi}function jb(n,e,t){Vb(n,e,t)}function Bb(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(f_(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function __(n,e,t){if(t&8||n!==void 0)return n;Ia(e,"NodeInjector")}function E_(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[En],o=et(void 0);try{return i?i.get(e,r,t&8):nd(e,r,t&8)}finally{et(o)}}return __(r,e,t)}function I_(n,e,t,r=0,i){if(n!==null){if(e[$]&2048&&!(r&2)){let s=zb(n,e,t,r,Mt);if(s!==Mt)return s}let o=w_(n,e,t,r,Mt);if(o!==Mt)return o}return E_(e,t,r,i)}function w_(n,e,t,r,i){let o=Hb(t);if(typeof o=="function"){if(!Dd(e,n,r))return r&1?__(i,t,r):E_(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ia(t);else return s}finally{Td()}}else if(typeof o=="number"){let s=null,c=v_(n,e),u=pi,d=r&1?e[vt][ct]:null;for((c===-1||r&4)&&(u=c===-1?Zd(n,e):e[c+8],u===pi||!Rv(r,!1)?c=-1:(s=e[G],c=$a(u),e=Ha(u,e)));c!==-1;){let f=e[G];if(Nv(o,c,f.data)){let g=Ub(c,e,t,s,r,d);if(g!==Mt)return g}u=e[c+8],u!==pi&&Rv(r,e[G].data[c+8]===d)&&Nv(o,c,e)?(s=f,c=$a(u),e=Ha(u,e)):c=-1}}return i}function Ub(n,e,t,r,i,o){let s=e[G],c=s.data[n+8],u=r==null?cr(c)&&Od:r!=s&&(c.type&3)!==0,d=i&1&&o===c,f=$b(c,s,t,u,d);return f!==null?Fd(e,s,f,c,i):Mt}function $b(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,d=n.directiveEnd,f=o>>20,g=r?c:c+f,m=i?c+f:d;for(let _=g;_<m;_++){let S=s[_];if(_<u&&t===S||_>=u&&S.type===t)return _}if(i){let _=s[u];if(_&&ur(_)&&_.type===t)return u}return null}function Fd(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof zo){let c=o;if(c.resolving){let _=Fy(s[t]);throw td(_)}let u=Sv(c.canSeeViewProviders);c.resolving=!0;let d=s[t].type||s[t],f,g=c.injectImpl?et(c.injectImpl):null,m=Dd(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Nb(t,s[t],e)}finally{g!==null&&et(g),Sv(u),c.resolving=!1,Td()}}return o}function Hb(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(er)?n[er]:void 0;return typeof e=="number"?e>=0?e&g_:qb:e}function Nv(n,e,t){let r=1<<n;return!!(t[e+(n>>m_)]&r)}function Rv(n,e){return!(n&2)&&!(n&1&&e)}var hr=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return I_(this._tNode,this._lView,e,Jn(r),t)}};function qb(){return new hr(Et(),De())}function zb(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[$]&2048&&!ai(s);){let c=w_(o,s,t,r|2,Mt);if(c!==Mt)return c;let u=o.parent;if(!u){let d=s[dd];if(d){let f=d.get(t,Mt,r);if(f!==Mt)return f}u=D_(s),s=s[ir]}o=u}return i}function D_(n){let e=n[G],t=e.type;return t===2?e.declTNode:t===1?n[ct]:null}function Jd(n){return Bb(Et(),n)}var T_=_i("Attribute",n=>({attributeName:n,__NG_ELEMENT_ID__:()=>Jd(n)})),Mv=null;function Gb(){return Mv=Mv||new Ba}function Wb(n){return C_(Gb().parameters(n))}function C_(n){return n.map(e=>Kb(e))}function Kb(n){let e={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(n)&&n.length>0)for(let t=0;t<n.length;t++){let r=n[t];if(r===void 0)continue;let i=Object.getPrototypeOf(r);if(r instanceof kt||i.ngMetadataName==="Optional")e.optional=!0;else if(r instanceof o_||i.ngMetadataName==="SkipSelf")e.skipSelf=!0;else if(r instanceof i_||i.ngMetadataName==="Self")e.self=!0;else if(r instanceof s_||i.ngMetadataName==="Host")e.host=!0;else if(r instanceof r_)e.token=r.token;else if(r instanceof T_){if(r.attributeName===void 0)throw new q(204,!1);e.attribute=r.attributeName}else e.token=r}else n===void 0||Array.isArray(n)&&n.length===0?e.token=null:e.token=n;return e}function Qb(n,e){let t=null,r=null;n.hasOwnProperty(ni)||Object.defineProperty(n,ni,{get:()=>(t===null&&(t=xd({usage:0,kind:"injectable",type:n}).compileInjectable(Tv,`ng:///${n.name}/\u0275prov.js`,Xb(n,e))),t)}),n.hasOwnProperty(To)||Object.defineProperty(n,To,{get:()=>{if(r===null){let i=xd({usage:0,kind:"injectable",type:n});r=i.compileFactory(Tv,`ng:///${n.name}/\u0275fac.js`,{name:n.name,type:n,typeArgumentCount:0,deps:Wb(n),target:i.FactoryTarget.Injectable})}return r},configurable:!0})}var Yb=ne({provide:String,useValue:ne});function Pv(n){return n.useClass!==void 0}function Zb(n){return Yb in n}function kv(n){return n.useFactory!==void 0}function Jb(n){return n.useExisting!==void 0}function Xb(n,e){let t=e||{providedIn:null},r={name:n.name,type:n,typeArgumentCount:0,providedIn:t.providedIn};return(Pv(t)||kv(t))&&t.deps!==void 0&&(r.deps=C_(t.deps)),Pv(t)?r.useClass=t.useClass:Zb(t)?r.useValue=t.useValue:kv(t)?r.useFactory=t.useFactory:Jb(t)&&(r.useExisting=t.useExisting),r}var Xd=_b("Injectable",void 0,void 0,void 0,(n,e)=>Qb(n,e));function eA(){return Qa(Et(),De())}function Qa(n,e){return new Ya(Nt(n,e))}var Ya=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=eA}return n})();function b_(n){return(n.flags&128)===128}var eh=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(eh||{}),A_=new Map,tA=0;function nA(){return tA++}function rA(n){A_.set(n[Po],n)}function Ld(n){A_.delete(n[Po])}var xv="__ngContext__";function gi(n,e){Yt(e)?(n[xv]=e[Po],rA(e)):n[xv]=e}function S_(n){return R_(n[si])}function N_(n){return R_(n[at])}function R_(n){for(;n!==null&&!_t(n);)n=n[at];return n}var Vd;function th(n){Vd=n}function M_(){if(Vd!==void 0)return Vd;if(typeof document<"u")return document;throw new q(210,!1)}var Za=new K("",{providedIn:"root",factory:()=>iA}),iA="ng",Ja=new K(""),pr=new K("",{providedIn:"platform",factory:()=>"unknown"});var Xa=new K("",{providedIn:"root",factory:()=>M_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oA="h",sA="b";var P_=!1,k_=new K("",{providedIn:"root",factory:()=>P_});var aA=(n,e,t,r)=>{};function cA(n,e,t,r){aA(n,e,t,r)}function nh(n){return(n.flags&32)===32}var uA=()=>null;function x_(n,e,t=!1){return uA(n,e,t)}function O_(n,e){let t=n.contentQueries;if(t!==null){let r=Y(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];wd(o),c.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function jd(n,e,t){wd(0);let r=Y(null);try{e(n,t)}finally{Y(r)}}function F_(n,e,t){if(hd(e)){let r=Y(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{Y(r)}}}var Xt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Xt||{});function lA(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var L_="ng-template";function dA(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&lA(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(rh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function rh(n){return n.type===4&&n.value!==L_}function hA(n,e,t){let r=n.type===4&&!t?L_:n.value;return e===r}function fA(n,e,t){let r=4,i=n.attrs,o=i!==null?mA(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!wt(r)&&!wt(u))return!1;if(s&&wt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!hA(n,u,t)||u===""&&e.length===1){if(wt(r))return!1;s=!0}}else if(r&8){if(i===null||!dA(n,i,u,t)){if(wt(r))return!1;s=!0}}else{let d=e[++c],f=pA(u,i,rh(n),t);if(f===-1){if(wt(r))return!1;s=!0;continue}if(d!==""){let g;if(f>o?g="":g=i[f+1].toLowerCase(),r&2&&d!==g){if(wt(r))return!1;s=!0}}}}return wt(r)||s}function wt(n){return(n&1)===0}function pA(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yA(e,n)}function gA(n,e,t=!1){for(let r=0;r<e.length;r++)if(fA(n,e[r],t))return!0;return!1}function mA(n){for(let e=0;e<n.length;e++){let t=n[e];if(f_(t))return e}return n.length}function yA(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ov(n,e){return n?":not("+e.trim()+")":e}function vA(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!wt(s)&&(e+=Ov(o,i),i=""),r=s,o=o||!wt(r);t++}return i!==""&&(e+=Ov(o,i)),e}function _A(n){return n.map(vA).join(",")}function EA(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!wt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ei={};function IA(n,e){return n.createText(e)}function wA(n,e,t){n.setValue(e,t)}function V_(n,e,t){return n.createElement(e,t)}function qa(n,e,t,r,i){n.insertBefore(e,t,r,i)}function j_(n,e,t){n.appendChild(e,t)}function Fv(n,e,t,r,i){r!==null?qa(n,e,t,r,i):j_(n,e,t)}function DA(n,e,t,r){n.removeChild(null,e,t,r)}function TA(n,e,t){n.setAttribute(e,"style",t)}function CA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function B_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&kb(n,e,r),i!==null&&CA(n,e,i),o!==null&&TA(n,e,o)}function ih(n,e,t,r,i,o,s,c,u,d,f){let g=nt+r,m=g+i,_=bA(g,m),S=typeof d=="function"?d():d;return _[G]={type:n,blueprint:_,template:t,queries:null,viewQuery:c,declTNode:e,data:_.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function bA(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ei);return t}function AA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ih(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function oh(n,e,t,r,i,o,s,c,u,d,f){let g=e.blueprint.slice();return g[yt]=i,g[$]=r|4|128|8|64|1024,(d!==null||n&&n[$]&2048)&&(g[$]|=2048),fd(g),g[Se]=g[ir]=n,g[Fe]=t,g[Qt]=s||n&&n[Qt],g[Ne]=c||n&&n[Ne],g[En]=u||n&&n[En]||null,g[ct]=o,g[Po]=nA(),g[Mo]=f,g[dd]=d,g[vt]=e.type==2?n[vt]:g,g}function SA(n,e,t){let r=Nt(e,n),i=AA(t),o=n[Qt].rendererFactory,s=sh(n,oh(n,i,null,U_(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function U_(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function $_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sh(n,e){return n[si]?n[ld][at]=e:n[si]=e,n[ld]=e,e}function xt(n=1){H_(dr(),De(),Pa()+n,!1)}function H_(n,e,t,r){if(!r)if((e[$]&3)===3){let o=n.preOrderCheckHooks;o!==null&&La(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Va(e,o,0,t)}Tn(t)}var ec=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ec||{});function Bd(n,e,t,r){let i=Y(null);try{let[o,s,c]=n.inputs[t],u=null;(s&ec.SignalBased)!==0&&(u=e[o][qn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):c_(e,u,o,r)}finally{Y(i)}}var gr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(gr||{}),NA;function ah(n,e){return NA(n,e)}var mi=new Set,ch=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ch||{}),Qo=new K(""),Lv=new Set;function q_(n){Lv.has(n)||(Lv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var z_=!1,Ud=class extends Kn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,zy()&&(this.destroyRef=j(ui,{optional:!0})??void 0,this.pendingTasks=j(Cn,{optional:!0})??void 0)}emit(e){let t=Y(null);try{super.next(e)}finally{Y(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ae&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Pt=Ud;function G_(n){let e,t;function r(){n=Uo;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Vv(n){return queueMicrotask(()=>n()),()=>{n=Uo}}var uh="isAngularZone",za=uh+"_ID",RA=0,de=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Pt(!1);onMicrotaskEmpty=new Pt(!1);onStable=new Pt(!1);onError=new Pt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=z_}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,kA(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,MA,Uo,Uo);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},MA={};function lh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function PA(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){G_(()=>{n.callbackScheduled=!1,$d(n),n.isCheckStableRunning=!0,lh(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$d(n)}function kA(n){let e=()=>{PA(n)},t=RA++;n._inner=n._inner.fork({name:"angular",properties:{[uh]:!0,[za]:t,[za+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(xA(u))return r.invokeTask(o,s,c,u);try{return jv(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Bv(n)}},onInvoke:(r,i,o,s,c,u,d)=>{try{return jv(n),r.invoke(o,s,c,u,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!OA(u)&&e(),Bv(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$d(n),lh(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $d(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function jv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Bv(n){n._nesting--,lh(n)}var Ga=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Pt;onMicrotaskEmpty=new Pt;onStable=new Pt;onError=new Pt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function xA(n){return W_(n,"__ignore_ng_zone__")}function OA(n){return W_(n,"__scheduler_tick__")}function W_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var K_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=se({token:n,providedIn:"root",factory:()=>new n})}return n})();var FA=new K("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Q_(n,e,t){let r=n.get(FA);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function LA(n,e){for(let[t,r]of e)Q_(n,r.animateFns)}function Uv(n,e,t,r){let i=n?.[xo]?.enter;e!==null&&i&&i.has(t.index)&&LA(r,i)}function fi(n,e,t,r,i,o,s,c){if(i!=null){let u,d=!1;_t(i)?u=i:Yt(i)&&(d=!0,i=i[yt]);let f=ut(i);n===0&&r!==null?(Uv(c,r,o,t),s==null?j_(e,r,f):qa(e,r,f,s||null,!0)):n===1&&r!==null?(Uv(c,r,o,t),qa(e,r,f,s||null,!0)):n===2?$v(c,o,t,g=>{DA(e,f,d,g)}):n===3&&$v(c,o,t,()=>{e.destroyNode(f)}),u!=null&&YA(e,n,t,u,o,r,s)}}function VA(n,e){Y_(n,e),e[yt]=null,e[ct]=null}function jA(n,e,t,r,i,o){r[yt]=i,r[ct]=e,tc(n,r,t,1,i,o)}function Y_(n,e){e[Qt].changeDetectionScheduler?.notify(9),tc(n,e,e[Ne],2,null,null)}function BA(n){let e=n[si];if(!e)return Md(n[G],n);for(;e;){let t=null;if(Yt(e))t=e[si];else{let r=e[Ye];r&&(t=r)}if(!t){for(;e&&!e[at]&&e!==n;)Yt(e)&&Md(e[G],e),e=e[Se];e===null&&(e=n),Yt(e)&&Md(e[G],e),t=e&&e[at]}e=t}}function dh(n,e){let t=n[Fo],r=t.indexOf(e);t.splice(r,1)}function Z_(n,e){if(lr(e))return;let t=e[Ne];t.destroyNode&&tc(n,e,t,3,null,null),BA(e)}function Md(n,e){if(lr(e))return;let t=Y(null);try{e[$]&=-129,e[$]|=256,e[tt]&&_l(e[tt]),HA(n,e),$A(n,e),e[G].type===1&&e[Ne].destroy();let r=e[or];if(r!==null&&_t(e[Se])){r!==e[Se]&&dh(r,e);let i=e[ar];i!==null&&i.detachView(n)}Ld(e)}finally{Y(t)}}function $v(n,e,t,r){let i=n?.[xo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&mi.add(n),Q_(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let d=s.animateFns[u],{promise:f}=d();c.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),UA(n,r)}else n&&mi.delete(n),r(!1)},i)}function UA(n,e){let t=n[xo]?.running;if(t){t.then(()=>{n[xo].running=void 0,mi.delete(n),e(!0)});return}e(!1)}function $A(n,e){let t=n.cleanup,r=e[oi];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[oi]=null);let i=e[Wt];if(i!==null){e[Wt]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[ko];if(o!==null){e[ko]=null;for(let s of o)s.destroy()}}function HA(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof zo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ue(4,c,u);try{u.call(c)}finally{ue(5,c,u)}}else{ue(4,i,o);try{o.call(i)}finally{ue(5,i,o)}}}}}function qA(n,e,t){return zA(n,e.parent,t)}function zA(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[yt];if(cr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Xt.None||i===Xt.Emulated)return null}return Nt(r,t)}function GA(n,e,t){return KA(n,e,t)}function WA(n,e,t){return n.type&40?Nt(n,t):null}var KA=WA,Hv;function hh(n,e,t,r){let i=qA(n,r,e),o=e[Ne],s=r.parent||e[ct],c=GA(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Fv(o,i,t[u],c,!1);else Fv(o,i,t,c,!1);Hv!==void 0&&Hv(o,r,e,t,i)}function Ho(n,e){if(e!==null){let t=e.type;if(t&3)return Nt(e,n);if(t&4)return Hd(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ho(n,r);{let i=n[e.index];return _t(i)?Hd(-1,i):ut(i)}}else{if(t&128)return Ho(n,e.next);if(t&32)return ah(e,n)()||ut(n[e.index]);{let r=J_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yn(n[vt]);return Ho(i,r)}else return Ho(n,e.next)}}}return null}function J_(n,e){if(e!==null){let r=n[vt][ct],i=e.projection;return r.projection[i]}return null}function Hd(n,e){let t=Ye+n+1;if(t<e.length){let r=e[t],i=r[G].firstChild;if(i!==null)return Ho(r,i)}return e[In]}function fh(n,e,t,r,i,o,s){for(;t!=null;){let c=r[En];if(t.type===128){t=t.next;continue}let u=r[t.index],d=t.type;if(s&&e===0&&(u&&gi(ut(u),r),t.flags|=2),!nh(t))if(d&8)fh(n,e,t.child,r,i,o,!1),fi(e,n,c,i,u,t,o,r);else if(d&32){let f=ah(t,r),g;for(;g=f();)fi(e,n,c,i,g,t,o,r);fi(e,n,c,i,u,t,o,r)}else d&16?QA(n,e,r,t,i,o):fi(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function tc(n,e,t,r,i,o){fh(t,r,n.firstChild,e,i,o,!1)}function QA(n,e,t,r,i,o){let s=t[vt],u=s[ct].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++){let f=u[d];fi(e,n,t[En],i,f,r,o,t)}else{let d=u,f=s[Se];b_(r)&&(d.flags|=128),fh(n,e,d,f,i,o,!0)}}function YA(n,e,t,r,i,o,s){let c=r[In],u=ut(r);c!==u&&fi(e,n,t,o,c,i,s);for(let d=Ye;d<r.length;d++){let f=r[d];tc(f[G],f,n,e,o,c)}}function X_(n,e,t,r,i){let o=Pa(),s=r&2;try{Tn(-1),s&&e.length>nt&&H_(n,e,nt,!1),ue(s?2:0,i,t),t(r,i)}finally{Tn(o),ue(s?3:1,i,t)}}function ph(n,e,t){iS(n,e,t),(t.flags&64)===64&&oS(n,e,t)}function eE(n,e,t=Nt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function ZA(n,e,t,r){let o=r.get(k_,P_)||t===Xt.ShadowDom,s=n.selectRootElement(e,o);return JA(s),s}function JA(n){XA(n)}var XA=()=>null;function eS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function tS(n,e,t,r,i,o){let s=e[G];if(gh(n,s,e,t,r)){cr(n)&&rS(e,n.index);return}n.type&3&&(t=eS(t)),nS(n,e,t,r,i,o)}function nS(n,e,t,r,i,o){if(n.type&3){let s=Nt(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function rS(n,e){let t=Rt(e,n);t[$]&16||(t[$]|=64)}function iS(n,e,t){let r=t.directiveStart,i=t.directiveEnd;cr(t)&&SA(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||y_(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=Fd(e,n,s,t);if(gi(u,e),o!==null&&aS(e,s-r,u,c,t,o),ur(c)){let d=Rt(t.index,e);d[Fe]=Fd(e,n,s,t)}}}function oS(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=hv();try{Tn(o);for(let c=r;c<i;c++){let u=n.data[c],d=e[c];Na(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&sS(u,d)}}finally{Tn(-1),Na(s)}}function sS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];gA(e,o.selectors,!1)&&(r??=[],ur(o)?r.unshift(o):r.push(o))}return r}function aS(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],d=s[c+1];Bd(r,t,u,d)}}function cS(n,e,t,r,i){let o=nt+t,s=e[G],c=i(s,e,n,r,t);e[o]=c,ci(n,!0);let u=n.type===2;return u?(B_(e[Ne],c,n),(tv()===0||Lo(n))&&gi(c,e),nv()):gi(c,e),ka()&&(!u||!nh(n))&&hh(s,e,c,n),n}function uS(n){let e=n;return vd()?cv():(e=e.parent,ci(e,!1)),e}function lS(n,e){let t=n[En];if(!t)return;let r;try{r=t.get(Zt,null)}catch{r=null}r?.(e)}function gh(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let d=s[u],f=s[u+1],g=e.data[d];Bd(g,t[d],f,i),c=!0}if(o)for(let u of o){let d=t[u],f=e.data[u];Bd(f,d,r,i),c=!0}return c}function dS(n,e){let t=Rt(e,n),r=t[G];hS(r,t);let i=t[yt];i!==null&&t[Mo]===null&&(t[Mo]=x_(i,t[En])),ue(18),mh(r,t,t[Fe]),ue(19,t[Fe])}function hS(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function mh(n,e,t){Ra(e);try{let r=n.viewQuery;r!==null&&jd(1,r,t);let i=n.template;i!==null&&X_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ar]?.finishViewCreation(n),n.staticContentQueries&&O_(n,e),n.staticViewQueries&&jd(2,n.viewQuery,t);let o=n.components;o!==null&&fS(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[$]&=-5,Ma()}}function fS(n,e){for(let t=0;t<e.length;t++)dS(n,e[t])}function pS(n,e,t,r){let i=Y(null);try{let o=e.tView,c=n[$]&4096?4096:16,u=oh(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];u[or]=d;let f=n[ar];return f!==null&&(u[ar]=f.createEmbeddedView(o)),mh(o,u,t),u}finally{Y(i)}}function qv(n,e){return!e||e.firstChild===null||b_(n)}function Go(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ut(o)),_t(o)&&nE(o,r);let s=t.type;if(s&8)Go(n,e,t.child,r);else if(s&32){let c=ah(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=J_(e,t);if(Array.isArray(c))r.push(...c);else{let u=yn(e[vt]);Go(u[G],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function nE(n,e){for(let t=Ye;t<n.length;t++){let r=n[t],i=r[G].firstChild;i!==null&&Go(r[G],r,i,e)}n[In]!==n[yt]&&e.push(n[In])}function rE(n){if(n[Ca]!==null){for(let e of n[Ca])e.impl.addSequence(e);n[Ca].length=0}}var iE=[];function gS(n){return n[tt]??mS(n)}function mS(n){let e=iE.pop()??Object.create(vS);return e.lView=n,e}function yS(n){n.lView[tt]!==n&&(n.lView=null,iE.push(n))}var vS=xe(we({},ra),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Bo(n.lView)},consumerOnSignalRead(){this.lView[tt]=this}});function _S(n){let e=n[tt]??Object.create(ES);return e.lView=n,e}var ES=xe(we({},ra),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=yn(n.lView);for(;e&&!oE(e[G]);)e=yn(e);e&&pd(e)},consumerOnSignalRead(){this.lView[tt]=this}});function oE(n){return n.type!==2}function sE(n){if(n[ko]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ko])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[$]&8192)}}var IS=100;function aE(n,e=0){let r=n[Qt].rendererFactory,i=!1;i||r.begin?.();try{wS(n,e)}finally{i||r.end?.()}}function wS(n,e){let t=_d();try{Ed(!0),qd(n,e);let r=0;for(;jo(n);){if(r===IS)throw new q(103,!1);r++,qd(n,1)}}finally{Ed(t)}}function DS(n,e,t,r){if(lr(e))return;let i=e[$],o=!1,s=!1;Ra(e);let c=!0,u=null,d=null;o||(oE(n)?(d=gS(e),u=yl(d)):na()===null?(c=!1,d=_S(e),u=yl(d)):e[tt]&&(_l(e[tt]),e[tt]=null));try{fd(e),uv(n.bindingStartIndex),t!==null&&X_(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let _=n.preOrderCheckHooks;_!==null&&La(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Va(e,_,0,null),Nd(e,0)}if(s||TS(e),sE(e),cE(e,0),n.contentQueries!==null&&O_(n,e),!o)if(f){let _=n.contentCheckHooks;_!==null&&La(e,_)}else{let _=n.contentHooks;_!==null&&Va(e,_,1),Nd(e,1)}bS(n,e);let g=n.components;g!==null&&lE(e,g,0);let m=n.viewQuery;if(m!==null&&jd(2,m,r),!o)if(f){let _=n.viewCheckHooks;_!==null&&La(e,_)}else{let _=n.viewHooks;_!==null&&Va(e,_,2),Nd(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ta]){for(let _ of e[Ta])_();e[Ta]=null}o||(rE(e),e[$]&=-73)}catch(f){throw o||Bo(e),f}finally{d!==null&&(hy(d,u),c&&yS(d)),Ma()}}function cE(n,e){for(let t=S_(n);t!==null;t=N_(t))for(let r=Ye;r<t.length;r++){let i=t[r];uE(i,e)}}function TS(n){for(let e=S_(n);e!==null;e=N_(e)){if(!(e[$]&2))continue;let t=e[Fo];for(let r=0;r<t.length;r++){let i=t[r];pd(i)}}}function CS(n,e,t){ue(18);let r=Rt(e,n);uE(r,t),ue(19,r[Fe])}function uE(n,e){Aa(n)&&qd(n,e)}function qd(n,e){let r=n[G],i=n[$],o=n[tt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vl(o)),s||=!1,o&&(o.dirty=!1),n[$]&=-9217,s)DS(r,n,r.template,n[Fe]);else if(i&8192){let c=Y(null);try{sE(n),cE(n,1);let u=r.components;u!==null&&lE(n,u,1),rE(n)}finally{Y(c)}}}function lE(n,e,t){for(let r=0;r<e.length;r++)CS(n,e[r],t)}function bS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Tn(~i);else{let o=i,s=t[++r],c=t[++r];dv(s,o);let u=e[o];ue(24,u),c(2,u),ue(25,u)}}}finally{Tn(-1)}}function yh(n,e){let t=_d()?64:1088;for(n[Qt].changeDetectionScheduler?.notify(e);n;){n[$]|=t;let r=yn(n);if(ai(n)&&!r)return n;n=r}return null}function dE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function AS(n,e,t,r=!0){let i=e[G];if(SS(i,e,n,t),r){let s=Hd(t,n),c=e[Ne],u=c.parentNode(n[In]);u!==null&&jA(i,n[ct],c,e,u,s)}let o=e[Mo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zd(n,e){if(n.length<=Ye)return;let t=Ye+e,r=n[t];if(r){let i=r[or];i!==null&&i!==n&&dh(i,r),e>0&&(n[t-1][at]=r[at]);let o=So(n,Ye+e);VA(r[G],r);let s=o[ar];s!==null&&s.detachView(o[G]),r[Se]=null,r[at]=null,r[$]&=-129}return r}function SS(n,e,t,r){let i=Ye+r,o=t.length;r>0&&(t[i-1][at]=e),r<o-Ye?(e[at]=t[i],id(t,Ye+r,e)):(t.push(e),e[at]=null),e[Se]=t;let s=e[or];s!==null&&t!==s&&hE(s,e);let c=e[ar];c!==null&&c.insertView(n),Sa(e),e[$]|=128}function hE(n,e){let t=n[Fo],r=e[Se];if(Yt(r))n[$]|=2;else{let i=r[Se][vt];e[vt]!==i&&(n[$]|=2)}t===null?n[Fo]=[e]:t.push(e)}var yi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[G];return Go(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Fe]}set context(e){this._lView[Fe]=e}get destroyed(){return lr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Se];if(_t(e)){let t=e[Oo],r=t?t.indexOf(this):-1;r>-1&&(zd(e,r),So(t,r))}this._attachedToViewContainer=!1}Z_(this._lView[G],this._lView)}onDestroy(e){gd(this._lView,e)}markForCheck(){yh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Sa(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,aE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ai(this._lView),t=this._lView[or];t!==null&&!e&&dh(t,this._lView),Y_(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=ai(this._lView),r=this._lView[or];r!==null&&!t&&hE(r,this._lView),Sa(this._lView)}};var nc=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=NS;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=pS(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new yi(o)}}return n})();function NS(){return RS(Et(),De())}function RS(n,e){return n.type&4?new nc(e,n,Qa(n,e)):null}function vh(n,e,t,r,i){let o=n.data[e];if(o===null)o=MS(n,e,t,r,i),lv()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=av();o.injectorIndex=s===null?-1:s.injectorIndex}return ci(o,!0),o}function MS(n,e,t,r,i){let o=yd(),s=vd(),c=s?o:o&&o.parent,u=n.data[e]=kS(n,c,t,e,r,i);return PS(n,u,o,s),u}function PS(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function kS(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return iv()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var QL=new RegExp(`^(\\d+)*(${sA}|${oA})*(.*)`);var xS=()=>null;function zv(n,e){return xS(n,e)}var fE=class{},rc=class{},Gd=class{resolveComponentFactory(e){throw new q(917,!1)}},ic=class{static NULL=new Gd},fr=class{};var pE=(()=>{class n{static \u0275prov=se({token:n,providedIn:"root",factory:()=>null})}return n})();var ja={},Wd=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ja,r);return i!==ja||t===ja?i:this.parentInjector.get(e,t,r)}};function Gv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Ql(i,c);else if(o==2){let u=c,d=e[++s];r=Ql(r,u+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function en(n,e=0){let t=De();if(t===null)return re(n,e);let r=Et();return I_(r,t,We(n),e)}function gE(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,d=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,d]=f.resolveHostDirectives(s);break}LS(n,e,t,c,o,u,d)}o!==null&&r!==null&&OS(t,r,o)}function OS(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}function FS(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function LS(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let _=r[m];!u&&ur(_)&&(u=!0,FS(n,t,m)),jb(y_(t,e),n,_.type)}HS(t,n.data.length,c);for(let m=0;m<c;m++){let _=r[m];_.providersResolver&&_.providersResolver(_)}let d=!1,f=!1,g=$_(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let _=r[m];if(t.mergedAttrs=Yd(t.mergedAttrs,_.hostAttrs),jS(n,t,e,g,_),$S(g,_,i),s!==null&&s.has(_)){let[P,R]=s.get(_);t.directiveToIndex.set(_.type,[g,P+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,g);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let S=_.type.prototype;!d&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!f&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),g++}VS(n,t,o)}function VS(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Wv(0,e,i,r),Wv(1,e,i,r),Qv(e,r,!1);else{let o=t.get(i);Kv(0,e,o,r),Kv(1,e,o,r),Qv(e,r,!0)}}}function Wv(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),mE(e,o)}}function Kv(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),mE(e,s)}}function mE(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Qv(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||rh(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let d=i[u];for(let f of d)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let d=o[u];for(let f=0;f<d.length;f+=2)if(d[f]===e){s??=[],s.push(d[f+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function jS(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ti(i.type,!0)),s=new zo(o,ur(i),en,null);n.blueprint[r]=s,t[r]=s,BS(n,e,r,$_(n,t,i.hostVars,Ei),i)}function BS(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;US(s)!=c&&s.push(c),s.push(t,r,o)}}function US(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $S(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ur(e)&&(t[""]=n)}}function HS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yE(n,e,t,r,i,o,s,c){let u=e[G],d=u.consts,f=Vo(d,s),g=vh(u,n,t,r,f);return o&&gE(u,e,g,Vo(d,c),i),g.mergedAttrs=Yd(g.mergedAttrs,g.attrs),g.attrs!==null&&Gv(g,g.attrs,!1),g.mergedAttrs!==null&&Gv(g,g.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,g),g}function vE(n,e){d_(n,e),hd(e)&&n.queries.elementEnd(e)}function _h(n){return EE(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _E(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function EE(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function IE(n,e,t){if(t===Ei)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Pd(n,e,t){return function r(i){let o=cr(n)?Rt(n.index,e):e;yh(o,5);let s=e[Fe],c=Yv(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=Yv(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Yv(n,e,t,r){let i=Y(null);try{return ue(6,e,t),t(r)!==!1}catch(o){return lS(n,o),!1}finally{ue(7,e,t),Y(i)}}function qS(n,e,t,r,i,o,s,c){let u=Lo(n),d=!1,f=null;if(!r&&u&&(f=GS(e,t,o,n.index)),f!==null){let g=f.__ngLastListenerFn__||f;g.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,d=!0}else{let g=Nt(n,t),m=r?r(g):g;cA(t,m,o,c);let _=i.listen(m,o,c);if(!zS(o)){let S=r?P=>r(ut(P[n.index])):n.index;wE(S,e,t,o,c,_,!1)}}return d}function zS(n){return n.startsWith("animation")||n.startsWith("transition")}function GS(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[oi],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function wE(n,e,t,r,i,o,s){let c=e.firstCreatePass?ev(e):null,u=Xy(t),d=u.length;u.push(i,o),c&&c.push(r,n,d,(d+1)*(s?-1:1))}function Zv(n,e,t,r,i,o){let s=e[t],c=e[G],d=c.data[t].outputs[r],g=s[d].subscribe(o);wE(n.index,c,e,i,o,g,!0)}var Kd=Symbol("BINDING");var Qd=class extends ic{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=rr(e);return new Wo(t,this.ngModule)}};function WS(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&ec.SignalBased)!==0};return i&&(o.transform=i),o})}function KS(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function QS(n,e,t){let r=e instanceof Ke?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Wd(t,r):t}function YS(n){let e=n.get(fr,null);if(e===null)throw new q(407,!1);let t=n.get(pE,null),r=n.get(vn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function ZS(n,e){let t=DE(n);return V_(e,t,t==="svg"?Wy:t==="math"?Ky:null)}function DE(n){return(n.selectors[0][0]||"div").toLowerCase()}var Wo=class extends rc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=WS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=KS(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_A(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ue(22);let c=Y(null);try{let u=this.componentDef,d=JS(r,u,s,o),f=QS(u,i||this.ngModule,e),g=YS(f),m=g.rendererFactory.createRenderer(null,u),_=r?ZA(m,r,u.encapsulation,f):ZS(u,m),S=s?.some(Jv)||o?.some(F=>typeof F!="function"&&F.bindings.some(Jv)),P=oh(null,d,null,512|U_(u),null,null,g,m,f,null,x_(_,f,!0));P[nt]=_,Ra(P);let R=null;try{let F=yE(nt,P,2,"#host",()=>d.directiveRegistry,!0,0);B_(m,_,F),gi(_,P),ph(d,P,F),F_(d,F,P),vE(d,F),t!==void 0&&e0(F,this.ngContentSelectors,t),R=Rt(F.index,P),P[Fe]=R[Fe],mh(d,P,null)}catch(F){throw R!==null&&Ld(R),Ld(P),F}finally{ue(23),Ma()}return new Wa(this.componentType,P,!!S)}finally{Y(c)}}};function JS(n,e,t,r){let i=n?["ng-version","20.3.12"]:EA(e.selectors[0]),o=null,s=null,c=0;if(t)for(let f of t)c+=f[Kd].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let g=r[f];if(typeof g!="function")for(let m of g.bindings){c+=m[Kd].requiredVars;let _=f+1;m.create&&(m.targetIdx=_,(o??=[]).push(m)),m.update&&(m.targetIdx=_,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let g=typeof f=="function"?f:f.type,m=ad(g);u.push(m)}return ih(0,null,XS(o,s),1,c,u,null,null,null,[i],null)}function XS(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Jv(n){let e=n[Kd].kind;return e==="input"||e==="twoWay"}var Wa=class extends fE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ba(t[G],nt),this.location=Qa(this._tNode,t),this.instance=Rt(this._tNode.index,t)[Fe],this.hostView=this.changeDetectorRef=new yi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=gh(r,i[G],i,e,t);this.previousInputValues.set(e,t);let s=Rt(r.index,i);yh(s,1)}get injector(){return new hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function e0(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var oc=(()=>{class n{static __NG_ELEMENT_ID__=t0}return n})();function t0(){let n=Et();return r0(n,De())}var n0=oc,TE=class extends n0{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Qa(this._hostTNode,this._hostLView)}get injector(){return new hr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Zd(this._hostTNode,this._hostLView);if(p_(e)){let t=Ha(e,this._hostLView),r=$a(e),i=t[G].data[r+8];return new hr(i,t)}else return new hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Xv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ye}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zv(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,qv(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!$o(e),d;if(u)d=t;else{let R=t||{};d=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,c=R.bindings}let f=u?e:new Wo(rr(e)),g=r||this.parentInjector;if(!o&&f.ngModule==null){let F=(u?g:this.parentInjector).get(Ke,null);F&&(o=F)}let m=rr(f.componentType??{}),_=zv(this._lContainer,m?.id??null),S=_?.firstChild??null,P=f.create(g,i,S,o,s,c);return this.insertImpl(P.hostView,d,qv(this._hostTNode,_)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Yy(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Se],d=new TE(u,u[ct],u[Se]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return AS(s,i,o,r),e.attachToViewContainerRef(),id(kd(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Xv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=zd(this._lContainer,t);r&&(So(kd(this._lContainer),t),Z_(r[G],r))}detach(e){let t=this._adjustIndex(e,-1),r=zd(this._lContainer,t);return r&&So(kd(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Xv(n){return n[Oo]}function kd(n){return n[Oo]||(n[Oo]=[])}function r0(n,e){let t,r=e[n.index];return _t(r)?t=r:(t=dE(r,e,null,n),e[n.index]=t,sh(e,t)),o0(t,e,n,r),new TE(t,n,e)}function i0(n,e){let t=n[Ne],r=t.createComment(""),i=Nt(e,n),o=t.parentNode(i);return qa(t,o,r,t.nextSibling(i),!1),r}var o0=c0,s0=()=>!1;function a0(n,e,t){return s0(n,e,t)}function c0(n,e,t,r){if(n[In])return;let i;t.type&8?i=ut(r):i=i0(e,t),n[In]=i}var Ka=class{};var Ko=class extends Ka{injector;componentFactoryResolver=new Qd(this);instance=null;constructor(e){super();let t=new Xn([...e.providers,{provide:Ka,useValue:this},{provide:ic,useValue:this.componentFactoryResolver}],e.parent||Ro(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function CE(n,e,t=null){return new Ko({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var u0=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=cd(!1,t.type),i=r.length>0?CE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=se({token:n,providedIn:"environment",factory:()=>new n(re(Ke))})}return n})();function Eh(n){return vi(()=>{let e=bE(n),t=xe(we({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===eh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(u0).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xt.Emulated,styles:n.styles||mt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&q_("NgStandalone"),AE(t);let r=n.dependencies;return t.directiveDefs=e_(r,l0),t.pipeDefs=e_(r,By),t.id=f0(t),t})}function l0(n){return rr(n)||ad(n)}function mr(n){return vi(()=>({type:n.type,bootstrap:n.bootstrap||mt,declarations:n.declarations||mt,imports:n.imports||mt,exports:n.exports||mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function d0(n,e){if(n==null)return tr;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=ec.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function h0(n){if(n==null)return tr;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function sc(n){return vi(()=>{let e=bE(n);return AE(e),e})}function bE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||tr,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||mt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:d0(n.inputs,e),outputs:h0(n.outputs),debugInfo:null}}function AE(n){n.features?.forEach(e=>e(n))}function e_(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function f0(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function p0(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=Yd(n.mergedAttrs,n.attrs);let f=n.tView=ih(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),ci(n,!1);let u=m0(t,e,n,r);ka()&&hh(t,e,u,n),gi(u,e);let d=dE(u,e,u,n);e[r+nt]=d,sh(e,d),a0(d,n,e)}function g0(n,e,t,r,i,o,s,c,u,d,f){let g=t+nt,m;return e.firstCreatePass?(m=vh(e,g,4,s||null,c||null),md()&&gE(e,n,m,Vo(e.consts,d),tE),d_(e,m)):m=e.data[g],p0(m,n,e,t,r,i,o,u),Lo(m)&&ph(e,n,m),d!=null&&eE(n,m,f),m}function ac(n,e,t,r,i,o,s,c){let u=De(),d=dr(),f=Vo(d.consts,o);return g0(u,d,n,e,t,r,i,f,void 0,s,c),ac}var m0=y0;function y0(n,e,t,r){return xa(!0),e[Ne].createComment("")}var Ih=new K("");function cc(n){return!!n&&typeof n.then=="function"}function SE(n){return!!n&&typeof n.subscribe=="function"}var NE=new K("");var wh=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(NE,{optional:!0})??[];injector=j(Qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=_n(this.injector,i);if(cc(o))t.push(o);else if(SE(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RE=new K("");function ME(){Il(()=>{let n="";throw new q(600,n)})}function PE(n){return n.isBoundToModule}var v0=10;var Ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(Zt);afterRenderManager=j(K_);zonelessEnabled=j(Oa);rootEffectScheduler=j(Ad);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Kn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(Cn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Xr(t=>!t))}constructor(){j(Qo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Qe.NULL){return this._injector.get(de).run(()=>{ue(10);let s=t instanceof rc;if(!this._injector.get(wh).done){let S="";throw new q(405,S)}let u;s?u=t:u=this._injector.get(ic).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let d=PE(u)?void 0:this._injector.get(Ka),f=r||u.selector,g=u.create(i,[],f,d),m=g.location.nativeElement,_=g.injector.get(Ih,null);return _?.registerApplication(m),g.onDestroy(()=>{this.detachView(g.hostView),qo(this.components,g),_?.unregisterApplication(m)}),this._loadComponent(g),ue(11,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ue(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ch.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new q(101,!1);let t=Y(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(t),this.afterTick.next(),ue(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(fr,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<v0;)ue(14),this.synchronizeOnce(),ue(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!jo(i))continue;let o=r&&!this.zonelessEnabled?0:1;aE(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>jo(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;qo(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(RE,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qo(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qo(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var tV=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ot(n,e,t){let r=De(),i=Id();if(IE(r,i,e)){let o=dr(),s=yv();tS(s,r,n,e,r[Ne],t)}return Ot}function t_(n,e,t,r,i){gh(e,n,t,i?"class":"style",r)}function Ze(n,e,t,r){let i=De(),o=i[G],s=n+nt,c=o.firstCreatePass?yE(s,i,2,e,tE,md(),t,r):o.data[s];if(cS(c,i,n,e,_0),Lo(c)){let u=i[G];ph(u,i,c),F_(u,c,i)}return r!=null&&eE(i,c),Ze}function qe(){let n=dr(),e=Et(),t=uS(e);return n.firstCreatePass&&vE(n,t),ov(t)&&sv(),rv(),t.classesWithoutHost!=null&&Mb(t)&&t_(n,t,De(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Pb(t)&&t_(n,t,De(),t.stylesWithoutHost,!1),qe}function uc(n,e,t,r){return Ze(n,e,t,r),qe(),uc}var _0=(n,e,t,r,i)=>(xa(!0),V_(e[Ne],r,vv()));function Dh(){return De()}var Yo="en-US";var E0=Yo;function kE(n){typeof n=="string"&&(E0=n.toLowerCase().replace(/_/g,"-"))}function rt(n,e,t){let r=De(),i=dr(),o=Et();return I0(i,r,r[Ne],o,n,e,t),rt}function I0(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Pd(r,e,o),qS(r,n,e,s,t,i,o,u)&&(c=!1)),c){let d=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let g=0;g<f.length;g+=2){let m=f[g],_=f[g+1];u??=Pd(r,e,o),Zv(r,e,m,_,i,u)}if(d&&d.length)for(let g of d)u??=Pd(r,e,o),Zv(r,e,g,i,i,u)}}function lc(n=1){return mv(n)}function wi(n,e=""){let t=De(),r=dr(),i=n+nt,o=r.firstCreatePass?vh(r,i,1,e,null):r.data[i],s=w0(r,t,o,e,n);t[i]=s,ka()&&hh(r,t,s,o),ci(o,!1)}var w0=(n,e,t,r,i)=>(xa(!0),IA(e[Ne],r));function D0(n,e,t,r=""){return IE(n,Id(),t)?e+ed(t)+r:Ei}function dc(n){return Th("",n),dc}function Th(n,e,t){let r=De(),i=D0(r,n,e,t);return i!==Ei&&T0(r,Pa(),i),Th}function T0(n,e,t){let r=Qy(e,n);wA(n[Ne],r,t)}var C0=(()=>{class n{zone=j(de);changeDetectionScheduler=j(vn);applicationRef=j(Ii);applicationErrorHandler=j(Zt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xE({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new de(xe(we({},OE()),{scheduleInRootZone:t})),[{provide:de,useFactory:n},{provide:nr,multi:!0,useFactory:()=>{let r=j(C0,{optional:!0});return()=>r.initialize()}},{provide:nr,multi:!0,useFactory:()=>{let r=j(b0);return()=>{r.initialize()}}},e===!0?{provide:Cd,useValue:!0}:[],{provide:bd,useValue:t??z_},{provide:Zt,useFactory:()=>{let r=j(de),i=j(Ke),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(St),o.handleError(s))})}}}]}function OE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var b0=(()=>{class n{subscription=new Ae;initialized=!1;zone=j(de);pendingTasks=j(Cn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FE=(()=>{class n{applicationErrorHandler=j(Zt);appRef=j(Ii);taskService=j(Cn);ngZone=j(de);zonelessEnabled=j(Oa);tracing=j(Qo,{optional:!0});disableScheduling=j(Cd,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ae;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(za):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(bd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ga||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Vv:G_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(za+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Vv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A0(){return typeof $localize<"u"&&$localize.locale||Yo}var Ch=new K("",{providedIn:"root",factory:()=>j(Ch,{optional:!0,skipSelf:!0})||A0()});var U0=new K("");U0.__NG_ELEMENT_ID__=n=>{let e=Et();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new q(204,!1)};var bh=new K(""),$0=new K("");function Zo(n){return!n.moduleRef}function H0(n){let e=Zo(n)?n.r3Injector:n.moduleRef.injector,t=e.get(de);return t.run(()=>{Zo(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Zt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Zo(n)){let o=()=>e.destroy(),s=n.platformInjector.get(bh);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(bh);s.add(o),n.moduleRef.onDestroy(()=>{qo(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return z0(r,t,()=>{let o=e.get(Cn),s=o.add(),c=e.get(wh);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Ch,Yo);if(kE(u||Yo),!e.get($0,!0))return Zo(n)?e.get(Ii):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Zo(n)){let f=e.get(Ii);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return q0?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var q0;function z0(n,e,t){try{let r=t();return cc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var hc=null;function G0(n=[],e){return Qe.create({name:e,providers:[{provide:No,useValue:"platform"},{provide:bh,useValue:new Set([()=>hc=null])},...n]})}function W0(n=[]){if(hc)return hc;let e=G0(n);return hc=e,ME(),K0(e),e}function K0(n){let e=n.get(Ja,null);_n(n,()=>{e?.forEach(t=>t())})}function Mh(){return!1}var Ah=class{constructor(){}supports(e){return _h(e)}create(e){return new Sh(e)}},Q0=(n,e)=>e,Sh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Q0}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<LE(r,i,o)?t:r,c=LE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=c-i,f=u-i;if(d!=f){for(let m=0;m<d;m++){let _=m<o.length?o[m]:o[m]=0,S=_+m;f<=S&&S<d&&(o[m]=_+1)}let g=s.previousIndex;o[g]=f-d}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!_h(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,_E(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Nh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new fc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Nh=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Rh=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},fc=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Rh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function LE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function VE(){return new Ph([new Ah])}var Ph=(()=>{class n{factories;static \u0275prov=se({token:n,providedIn:"root",factory:VE});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=j(n,{optional:!0,skipSelf:!0});return n.create(t,r||VE())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function UE(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ue(8);try{let o=i?.injector??W0(r),s=[xE({}),{provide:vn,useExisting:FE},Iv,...t||[]],c=new Ko({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return H0({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ue(9)}}var $E=null;function Xo(){return $E}function kh(n){$E??=n}var Jo=class{};var pc=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new pc(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),HE(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);HE(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(en(oc),en(nc),en(Ph))};static \u0275dir=sc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function HE(n,e){n.context.$implicit=e.item}var mc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=mr({type:n});static \u0275inj=Kt({})}return n})();function xh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var es=class{};var qE="browser";var ts=class{_doc;constructor(e){this._doc=e}manager},yc=(()=>{class n extends ts{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(re(It))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),_c=new K(""),jh=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof yc));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof yc);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(_c),re(de))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Oh="ng-app-id";function zE(n){for(let e of n)e.remove()}function GE(n,e){let t=e.createElement("style");return t.textContent=n,t}function J0(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Oh}="${e}"],link[${Oh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Oh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Lh(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Bh=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,J0(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,GE);r?.forEach(i=>this.addUsage(i,this.external,Lh))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(zE(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])zE(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,GE(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Lh(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(It),re(Za),re(Xa,8),re(pr))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Fh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Uh=/%COMP%/g;var KE="%COMP%",X0=`_nghost-${KE}`,eN=`_ngcontent-${KE}`,tN=!0,nN=new K("",{providedIn:"root",factory:()=>tN});function rN(n){return eN.replace(Uh,n)}function iN(n){return X0.replace(Uh,n)}function QE(n,e){return e.map(t=>t.replace(Uh,n))}var $h=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new ns(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof vc?i.applyToHost(t):i instanceof rs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Xt.Emulated:o=new vc(u,d,r,this.appId,f,s,c,g,m);break;case Xt.ShadowDom:return new Vh(u,d,t,r,s,c,this.nonce,g,m);default:o=new rs(u,d,r,f,s,c,g,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(jh),re(Bh),re(Za),re(nN),re(It),re(de),re(Xa),re(Qo,8))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),ns=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Fh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(WE(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(WE(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Fh[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Fh[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(gr.DashCase|gr.Important)?e.style.setProperty(t,r,i&gr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Xo().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function WE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vh=class extends ns{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,d){super(e,o,s,u,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=QE(i.id,f);for(let m of f){let _=document.createElement("style");c&&_.setAttribute("nonce",c),_.textContent=m,this.shadowRoot.appendChild(_)}let g=i.getExternalStyles?.();if(g)for(let m of g){let _=Lh(m,o);c&&_.setAttribute("nonce",c),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rs=class extends ns{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,d){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=d?QE(d,f):f,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&mi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},vc=class extends rs{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,d){let f=i+"-"+r.id;super(e,t,r,o,s,c,u,d,f),this.contentAttr=rN(f),this.hostAttr=iN(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ec=class n extends Jo{supportsDOMEvents=!0;static makeCurrent(){kh(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=oN();return t==null?null:sN(t)}resetBaseElement(){is=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xh(document.cookie,e)}},is=null;function oN(){return is=is||document.head.querySelector("base"),is?is.getAttribute("href"):null}function sN(n){return new URL(n,document.baseURI).pathname}var aN=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),YE=["alt","control","meta","shift"],cN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ZE=(()=>{class n extends ts{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xo().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),YE.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=cN[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),YE.forEach(s=>{if(s!==i){let c=uN[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(It))};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})();function Hh(n,e,t){let r=we({rootComponent:n,platformRef:t?.platformRef},lN(e));return UE(r)}function lN(n){return{appProviders:[...gN,...n?.providers??[]],platformProviders:pN}}function dN(){Ec.makeCurrent()}function hN(){return new St}function fN(){return th(document),document}var pN=[{provide:pr,useValue:qE},{provide:Ja,useValue:dN,multi:!0},{provide:It,useFactory:fN}];var gN=[{provide:No,useValue:"root"},{provide:St,useFactory:hN},{provide:_c,useClass:yc,multi:!0,deps:[It]},{provide:_c,useClass:ZE,multi:!0,deps:[It]},$h,Bh,jh,{provide:fr,useExisting:$h},{provide:es,useClass:aN},[]];var mN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},iq=xe(we({},mN),{"[class.ng-submitted]":"isSubmitted"});var yN=new K("",{providedIn:"root",factory:()=>JE}),JE="always";var vN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=mr({type:n});static \u0275inj=Kt({})}return n})();var XE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yN,useValue:t.callSetDisabledState??JE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=mr({type:n});static \u0275inj=Kt({imports:[vN]})}return n})();var eI=()=>{};var rI=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_N=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ic={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=o>>2,g=(o&3)<<4|c>>4,m=(c&15)<<2|d>>6,_=d&63;u||(_=64,s||(m=64)),r.push(t[f],t[g],t[m],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_N(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new zh;let m=o<<2|c>>4;if(r.push(m),d!==64){let _=c<<4&240|d>>2;if(r.push(_),g!==64){let S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},zh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},EN=function(n){let e=rI(n);return Ic.encodeByteArray(e,!0)},ss=function(n){return EN(n).replace(/\./g,"")},wc=function(n){try{return Ic.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Wh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var IN=()=>Wh().__FIREBASE_DEFAULTS__,wN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&wc(n[1]);return e&&JSON.parse(e)},Dc=()=>{try{return eI()||IN()||wN()||DN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iI=n=>{var e,t;return(t=(e=Dc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oI=n=>{let e=iI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Kh=()=>{var n;return(n=Dc())===null||n===void 0?void 0:n.config},sI=n=>{var e;return(e=Dc())===null||e===void 0?void 0:e[`_${n}`]};var yr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function vr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Qh(n){return b(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function aI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ss(JSON.stringify(t)),ss(JSON.stringify(s)),""].join(".")}var os={};function TN(){let n={prod:[],emulator:[]};for(let e of Object.keys(os))os[e]?n.emulator.push(e):n.prod.push(e);return n}function CN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var tI=!1;function Yh(n,e){if(typeof window>"u"||typeof document>"u"||!vr(window.location.host)||os[n]===e||os[n]||tI)return;os[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=TN().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{tI=!0,s()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function g(){let m=CN(r),_=t("text"),S=document.getElementById(_)||document.createElement("span"),P=t("learnmore"),R=document.getElementById(P)||document.createElement("a"),F=t("preprendIcon"),B=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let z=m.element;c(z),f(R,P);let ae=d();u(B,F),z.append(B,S,R,ae),document.body.appendChild(z)}o?(S.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function bN(){var n;let e=(n=Dc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lI(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hI(){return!bN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function as(){try{return typeof indexedDB=="object"}catch{return!1}}function fI(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var AN="FirebaseError",lt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AN,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dt.prototype.create)}},Dt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?SN(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new lt(i,c,r)}};function SN(n,e){return n.replace(NN,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var NN=/\{\$([^}]+)}/g;function _r(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(nI(o)&&nI(s)){if(!_r(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function nI(n){return n!==null&&typeof n=="object"}function Zh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pI(n,e){let t=new Gh(n,e);return t.subscribe.bind(t)}var Gh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");RN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=qh),i.error===void 0&&(i.error=qh),i.complete===void 0&&(i.complete=qh);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function RN(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qh(){}var uq=14400*1e3;function Le(n){return n&&n._delegate?n._delegate:n}var ze=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Er="[DEFAULT]";var Jh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new yr;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function MN(n){return n===Er?void 0:n}function PN(n){return n.instantiationMode==="EAGER"}var Tc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Jh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var kN=[],Q=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Q||{}),xN={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ON=Q.INFO,FN={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},LN=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=FN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ft=class{constructor(e){this.name=e,this._logLevel=ON,this._logHandler=LN,this._userLogHandler=null,kN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}};var VN=(n,e)=>e.some(t=>n instanceof t),gI,mI;function jN(){return gI||(gI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BN(){return mI||(mI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var yI=new WeakMap,ef=new WeakMap,vI=new WeakMap,Xh=new WeakMap,nf=new WeakMap;function UN(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Lt(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&yI.set(t,n)}).catch(()=>{}),nf.set(e,n),e}function $N(n){if(ef.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ef.set(n,e)}var tf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ef.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Lt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _I(n){tf=n(tf)}function HN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Cc(this),e,...t);return vI.set(r,e.sort?e.sort():[e]),Lt(r)}:BN().includes(n)?function(...e){return n.apply(Cc(this),e),Lt(yI.get(this))}:function(...e){return Lt(n.apply(Cc(this),e))}}function qN(n){return typeof n=="function"?HN(n):(n instanceof IDBTransaction&&$N(n),VN(n,jN())?new Proxy(n,tf):n)}function Lt(n){if(n instanceof IDBRequest)return UN(n);if(Xh.has(n))return Xh.get(n);let e=qN(n);return e!==n&&(Xh.set(n,e),nf.set(e,n)),e}var Cc=n=>nf.get(n);function II(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Lt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Lt(s.result),u.oldVersion,u.newVersion,Lt(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var zN=["get","getKey","getAll","getAllKeys","count"],GN=["put","add","delete","clear"],rf=new Map;function EI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=GN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zN.includes(t)))return;let o=function(s,...c){return b(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return rf.set(e,o),o}_I(n=>xe(we({},n),{get:(e,t,r)=>EI(e,t)||n.get(e,t,r),has:(e,t)=>!!EI(e,t)||n.has(e,t)}));var sf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WN(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function WN(n){let e=n.getComponent();return e?.type==="VERSION"}var af="@firebase/app",wI="0.13.2";var tn=new Ft("@firebase/app"),KN="@firebase/app-compat",QN="@firebase/analytics-compat",YN="@firebase/analytics",ZN="@firebase/app-check-compat",JN="@firebase/app-check",XN="@firebase/auth",eR="@firebase/auth-compat",tR="@firebase/database",nR="@firebase/data-connect",rR="@firebase/database-compat",iR="@firebase/functions",oR="@firebase/functions-compat",sR="@firebase/installations",aR="@firebase/installations-compat",cR="@firebase/messaging",uR="@firebase/messaging-compat",lR="@firebase/performance",dR="@firebase/performance-compat",hR="@firebase/remote-config",fR="@firebase/remote-config-compat",pR="@firebase/storage",gR="@firebase/storage-compat",mR="@firebase/firestore",yR="@firebase/ai",vR="@firebase/firestore-compat",_R="firebase",ER="11.10.0";var cf="[DEFAULT]",IR={[af]:"fire-core",[KN]:"fire-core-compat",[YN]:"fire-analytics",[QN]:"fire-analytics-compat",[JN]:"fire-app-check",[ZN]:"fire-app-check-compat",[XN]:"fire-auth",[eR]:"fire-auth-compat",[tR]:"fire-rtdb",[nR]:"fire-data-connect",[rR]:"fire-rtdb-compat",[iR]:"fire-fn",[oR]:"fire-fn-compat",[sR]:"fire-iid",[aR]:"fire-iid-compat",[cR]:"fire-fcm",[uR]:"fire-fcm-compat",[lR]:"fire-perf",[dR]:"fire-perf-compat",[hR]:"fire-rc",[fR]:"fire-rc-compat",[pR]:"fire-gcs",[gR]:"fire-gcs-compat",[mR]:"fire-fst",[vR]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[_R]:"fire-js-all"};var cs=new Map,wR=new Map,uf=new Map;function DI(n,e){try{n.container.addComponent(e)}catch(t){tn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tt(n){let e=n.name;if(uf.has(e))return tn.debug(`There were multiple attempts to register component ${e}.`),!1;uf.set(e,n);for(let t of cs.values())DI(t,n);for(let t of wR.values())DI(t,n);return!0}function bc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nn(n){return n==null?!1:n.settings!==void 0}var DR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bn=new Dt("app","Firebase",DR);var lf=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ze("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}};var Ti=ER;function ff(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:cf,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bn.create("bad-app-name",{appName:String(i)});if(t||(t=Kh()),!t)throw bn.create("no-options");let o=cs.get(i);if(o){if(_r(t,o.options)&&_r(r,o.config))return o;throw bn.create("duplicate-app",{appName:i})}let s=new Tc(i);for(let u of uf.values())s.addComponent(u);let c=new lf(t,r,s);return cs.set(i,c),c}function Ci(n=cf){let e=cs.get(n);if(!e&&n===cf&&Kh())return ff();if(!e)throw bn.create("no-app",{appName:n});return e}function Ac(){return Array.from(cs.values())}function me(n,e,t){var r;let i=(r=IR[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tn.warn(c.join(" "));return}Tt(new ze(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var TR="firebase-heartbeat-database",CR=1,us="firebase-heartbeat-store",of=null;function AI(){return of||(of=II(TR,CR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(us)}catch(t){console.warn(t)}}}}).catch(n=>{throw bn.create("idb-open",{originalErrorMessage:n.message})})),of}function bR(n){return b(this,null,function*(){try{let t=(yield AI()).transaction(us),r=yield t.objectStore(us).get(SI(n));return yield t.done,r}catch(e){if(e instanceof lt)tn.warn(e.message);else{let t=bn.create("idb-get",{originalErrorMessage:e?.message});tn.warn(t.message)}}})}function TI(n,e){return b(this,null,function*(){try{let r=(yield AI()).transaction(us,"readwrite");yield r.objectStore(us).put(e,SI(n)),yield r.done}catch(t){if(t instanceof lt)tn.warn(t.message);else{let r=bn.create("idb-set",{originalErrorMessage:t?.message});tn.warn(r.message)}}})}function SI(n){return`${n.name}!${n.options.appId}`}var AR=1024,SR=30,df=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hf(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=CI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>SR){let s=RR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tn.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=CI(),{heartbeatsToSend:r,unsentEntries:i}=NR(this._heartbeatsCache.heartbeats),o=ss(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return tn.warn(t),""}})}};function CI(){return new Date().toISOString().substring(0,10)}function NR(n,e=AR){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),bI(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),bI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var hf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return as()?fI().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield bR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return TI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return TI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function bI(n){return ss(JSON.stringify({version:2,heartbeats:n})).length}function RR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function MR(n){Tt(new ze("platform-logger",e=>new sf(e),"PRIVATE")),Tt(new ze("heartbeat",e=>new df(e),"PRIVATE")),me(af,wI,n),me(af,wI,"esm2017"),me("fire-js","")}MR("");var PR="firebase",kR="11.10.0";me(PR,kR,"app");function NI(n){n===void 0&&(n=j(Qe));let e=n.get(li);return t=>new Xe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var wr=new Yn("ANGULARFIRE2_VERSION");function Nc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ai=(n,e)=>{let t=e?[e]:Ac(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},bi=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(bi||{}),RI=Mh()&&typeof Zone<"u"?bi.WARN:bi.SILENT;var Sc=class{zone;delegate;constructor(e,t=kl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Dr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(de);this.outsideAngular=t.runOutsideAngular(()=>new Sc(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Sc(typeof Zone>"u"?void 0:Zone.current,Pl))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),MI=!1;function xR(n,e){!MI&&(RI>bi.SILENT||Mh())&&(MI=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),RI>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function OR(n){let e=j(de,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ir(n){let e=j(de,{optional:!0});return e?e.run(()=>n()):n()}var FR=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),_n(t,()=>Ir(()=>n.apply(void 0,r)))),dt=(n,e,t)=>(t||=e?bi.WARN:bi.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=j(Dr),s=j(li),c=j(Ke)}catch{return xR(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Ir(()=>s.add())),i[d]=FR(i[d],r,c));let u=OR(()=>n.apply(this,i));return e?u instanceof Xe?u.pipe(ga(o.outsideAngular),pa(o.insideAngular),NI(c)):u instanceof Promise?Ir(()=>{let d=s.add();return new Promise((f,g)=>{u.then(m=>_n(c,()=>Ir(()=>f(m))),m=>_n(c,()=>Ir(()=>g(m)))).finally(d)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ir(()=>u):u instanceof Xe?u.pipe(ga(o.outsideAngular),pa(o.insideAngular)):Ir(()=>u)});var Tr=class{constructor(e){return e}},ls=class{constructor(){return Ac()}};function LR(n){return n&&n.length===1?n[0]:new Tr(Ci())}var pf=new K("angularfire2._apps"),VR={provide:Tr,useFactory:LR,deps:[[new kt,pf]]},jR={provide:ls,deps:[[new kt,pf]]};function BR(n){return(e,t)=>{let r=t.get(pr);me("angularfire",wr.full,"core"),me("angularfire",wr.full,"app"),me("angular",Wl.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Tr(i)}}function PI(n,...e){return ii([VR,jR,{provide:pf,useFactory:BR(n),multi:!0,deps:[de,Qe,Dr,...e]}])}var kI=dt(ff,!0);var UR=new Map,$R={activated:!1,tokenObservers:[]},HR={initialized:!1,enabled:!1};function Ct(n){return UR.get(n)||Object.assign({},$R)}function LI(){return HR}var qR="https://content-firebaseappcheck.googleapis.com/v1";var zR="exchangeDebugToken",xI={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},h6=1440*60*1e3;var yf=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new yr,this.pending.promise.catch(t=>{}),yield GR(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new yr,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function GR(n){return new Promise(e=>{setTimeout(e,n)})}var WR={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},An=new Dt("appCheck","AppCheck",WR);function VI(n){if(!Ct(n).activated)throw An.create("use-before-activation",{appName:n.name})}function jI(r,i){return b(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let _=yield s.getHeartbeatsHeader();_&&(o["X-Firebase-Client"]=_)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,c)}catch(_){throw An.create("fetch-network-error",{originalErrorMessage:_?.message})}if(u.status!==200)throw An.create("fetch-status-error",{httpStatus:u.status});let d;try{d=yield u.json()}catch(_){throw An.create("fetch-parse-error",{originalErrorMessage:_?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw An.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(f[1])*1e3,m=Date.now();return{token:d.token,expireTimeMillis:m+g,issuedAtTimeMillis:m}})}function BI(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${qR}/projects/${t}/apps/${r}:${zR}?key=${i}`,body:{debug_token:e}}}var KR="firebase-app-check-database",QR=1,vf="firebase-app-check-store";var Rc=null;function YR(){return Rc||(Rc=new Promise((n,e)=>{try{let t=indexedDB.open(KR,QR);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(An.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(vf,{keyPath:"compositeKey"})}}}catch(t){e(An.create("storage-open",{originalErrorMessage:t?.message}))}}),Rc)}function ZR(n,e){return JR(XR(n),e)}function JR(n,e){return b(this,null,function*(){let r=(yield YR()).transaction(vf,"readwrite"),o=r.objectStore(vf).put({compositeKey:n,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var d;c(An.create("storage-set",{originalErrorMessage:(d=u.target.error)===null||d===void 0?void 0:d.message}))}})})}function XR(n){return`${n.options.appId}-${n.name}`}var ds=new Ft("@firebase/app-check");function gf(n,e){return as()?ZR(n,e).catch(t=>{ds.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UI(){return LI().enabled}function $I(){return b(this,null,function*(){let n=LI();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var eM={error:"UNKNOWN_ERROR"};function tM(n){return Ic.encodeString(JSON.stringify(n),!1)}function _f(n,e=!1,t=!1){return b(this,null,function*(){let r=n.app;VI(r);let i=Ct(r),o=i.token,s;if(o&&!hs(o)&&(i.token=void 0,o=void 0),!o){let d=yield i.cachedTokenPromise;d&&(hs(d)?o=d:yield gf(r,void 0))}if(!e&&o&&hs(o))return{token:o.token};let c=!1;if(UI())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=jI(BI(r,yield $I()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let d=yield i.exchangeTokenPromise;return yield gf(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?ds.warn(d.message):t&&ds.error(d),mf(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield Ct(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?ds.warn(d.message):t&&ds.error(d),s=d}let u;return o?s?hs(o)?u={token:o.token,internalError:s}:u=mf(s):(u={token:o.token},i.token=o,yield gf(r,o)):u=mf(s),c&&oM(r,u),u})}function nM(n){return b(this,null,function*(){let e=n.app;VI(e);let{provider:t}=Ct(e);if(UI()){let r=yield $I(),{token:i}=yield jI(BI(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function rM(n,e,t,r){let{app:i}=n,o=Ct(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hs(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),OI(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>OI(n))}function HI(n,e){let t=Ct(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function OI(n){let{app:e}=n,t=Ct(e),r=t.tokenRefresher;r||(r=iM(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function iM(n){let{app:e}=n;return new yf(()=>b(null,null,function*(){let t=Ct(e),r;if(t.token?r=yield _f(n,!0):r=yield _f(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ct(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xI.RETRIAL_MIN_WAIT,xI.RETRIAL_MAX_WAIT)}function oM(n,e){let t=Ct(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hs(n){return n.expireTimeMillis-Date.now()>0}function mf(n){return{token:tM(eM),error:n}}var Ef=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ct(this.app);for(let t of e)HI(this.app,t.next);return Promise.resolve()}};function sM(n,e){return new Ef(n,e)}function aM(n){return{getToken:e=>_f(n,e),getLimitedUseToken:()=>nM(n),addTokenListener:e=>rM(n,"INTERNAL",e),removeTokenListener:e=>HI(n.app,e)}}var cM="@firebase/app-check",uM="0.10.1";var lM="app-check",FI="app-check-internal";function dM(){Tt(new ze(lM,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return sM(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FI).initialize()})),Tt(new ze(FI,n=>{let e=n.getProvider("app-check").getImmediate();return aM(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),me(cM,uM)}dM();var hM="app-check";var Mc=class{constructor(){return Ai(hM)}};var fM=["localhost","0.0.0.0","127.0.0.1"],C6=typeof window<"u"&&fM.includes(window.location.hostname);function ZI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JI=ZI,XI=new Dt("auth","Firebase",ZI());var Oc=new Ft("@firebase/auth");function gM(n,...e){Oc.logLevel<=Q.WARN&&Oc.warn(`Auth (${Ti}): ${n}`,...e)}function kc(n,...e){Oc.logLevel<=Q.ERROR&&Oc.error(`Auth (${Ti}): ${n}`,...e)}function qI(n,...e){throw Pf(n,...e)}function Mf(n,...e){return Pf(n,...e)}function ew(n,e,t){let r=Object.assign(Object.assign({},JI()),{[e]:t});return new Dt("auth","Firebase",r).create(e,{appName:n.name})}function xc(n){return ew(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pf(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return XI.create(n,...e)}function te(n,e,...t){if(!n)throw Pf(e,...t)}function fs(n){let e="INTERNAL ASSERTION FAILED: "+n;throw kc(e),new Error(e)}function Fc(n,e){n||fs(e)}function mM(){return zI()==="http:"||zI()==="https:"}function zI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function yM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mM()||lI()||"connection"in navigator)?navigator.onLine:!0}function vM(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ar=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fc(t>e,"Short delay should be less than long delay!"),this.isMobile=cI()||dI()}get(){return yM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function _M(n,e){Fc(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Lc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var EM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var IM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wM=new Ar(3e4,6e4);function tw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function $c(o,s,c,u){return b(this,arguments,function*(n,e,t,r,i={}){return nw(n,i,()=>b(null,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let g=Zh(Object.assign({key:n.config.apiKey},f)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:m},d);return uI()||(_.referrerPolicy="no-referrer"),n.emulatorConfig&&vr(n.emulatorConfig.host)&&(_.credentials="include"),Lc.fetch()(yield rw(n,n.config.apiHost,t,g),_)}))})}function nw(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},EM),e);try{let i=new Df(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Pc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Pc(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Pc(n,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ew(n,f,d);qI(n,f)}}catch(i){if(i instanceof lt)throw i;qI(n,"network-request-failed",{message:String(i)})}})}function rw(n,e,t,r){return b(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?_M(n.config,i):`${n.config.apiScheme}://${i}`;return IM.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Df=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Mf(this.auth,"network-request-failed")),wM.get())})}};function Pc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Mf(n,e,r);return i.customData._tokenResponse=t,i}function DM(n,e){return b(this,null,function*(){return $c(n,"POST","/v1/accounts:delete",e)})}function Vc(n,e){return b(this,null,function*(){return $c(n,"POST","/v1/accounts:lookup",e)})}function ps(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function kf(n,e=!1){return b(this,null,function*(){let t=Le(n),r=yield t.getIdToken(e),i=iw(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ps(If(i.auth_time)),issuedAtTime:ps(If(i.iat)),expirationTime:ps(If(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function If(n){return Number(n)*1e3}function iw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return kc("JWT malformed, contained fewer than 3 sections"),null;try{let i=wc(t);return i?JSON.parse(i):(kc("Failed to decode base64 JWT payload"),null)}catch(i){return kc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GI(n){let e=iw(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Tf(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof lt&&TM(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function TM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ms=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ps(this.lastLoginAt),this.creationTime=ps(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jc(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Tf(n,Vc(t,{idToken:r}));te(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ow(o.providerUserInfo):[],c=CM(n.providerData,s),u=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!c?.length,f=u?d:!1,g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ms(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,g)})}function xf(n){return b(this,null,function*(){let e=Le(n);yield jc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function CM(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ow(n){return n.map(e=>{var{providerId:t}=e,r=xl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function bM(n,e){return b(this,null,function*(){let t=yield nw(n,{},()=>b(null,null,function*(){let r=Zh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield rw(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&vr(n.emulatorConfig.host)&&(u.credentials="include"),Lc.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function AM(n,e){return b(this,null,function*(){return $c(n,"POST","/v2/accounts:revokeToken",tw(n,e))})}var gs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=GI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield bM(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return fs("not implemented")}};function Sn(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Cr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=xl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ms(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Tf(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return kf(this,e)}reload(){return xf(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield jc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(nn(this.auth.app))return Promise.reject(xc(this.auth));let e=yield this.getIdToken();return yield Tf(this,DM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,d,f;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,F=(d=t.createdAt)!==null&&d!==void 0?d:void 0,B=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:z,emailVerified:ae,isAnonymous:Ue,providerData:oe,stsTokenManager:w}=t;te(z&&w,e,"internal-error");let y=gs.fromJSON(this.name,w);te(typeof z=="string",e,"internal-error"),Sn(g,e.name),Sn(m,e.name),te(typeof ae=="boolean",e,"internal-error"),te(typeof Ue=="boolean",e,"internal-error"),Sn(_,e.name),Sn(S,e.name),Sn(P,e.name),Sn(R,e.name),Sn(F,e.name),Sn(B,e.name);let E=new n({uid:z,auth:e,email:m,emailVerified:ae,displayName:g,isAnonymous:Ue,photoURL:S,phoneNumber:_,tenantId:P,stsTokenManager:y,createdAt:F,lastLoginAt:B});return oe&&Array.isArray(oe)&&(E.providerData=oe.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new gs;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jc(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];te(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?ow(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new gs;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ms(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,d),u})}};var WI=new Map;function br(n){Fc(n instanceof Function,"Expected a class definition");let e=WI.get(n);return e?(Fc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WI.set(n,e),e)}var SM=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),bf=SM;function wf(n,e,t){return`firebase:${n}:${e}:${t}`}var Bc=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=wf(this.userKey,i.apiKey,o),this.fullPersistenceKey=wf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Vc(this.auth,{idToken:e}).catch(()=>{});return t?Cr._fromGetAccountInfoResponse(this.auth,t,e):null}return Cr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(br(bf),e,r);let i=(yield Promise.all(t.map(d=>b(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||br(bf),s=wf(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(s);if(f){let g;if(typeof f=="string"){let m=yield Vc(e,{idToken:f}).catch(()=>{});if(!m)break;g=yield Cr._fromGetAccountInfoResponse(e,m,f)}else g=Cr._fromJSON(e,f);d!==o&&(c=g),o=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(d=>b(null,null,function*(){if(d!==o)try{yield d._remove(s)}catch{}}))),new n(o,e,r))})}};function KI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xM(e))return"Blackberry";if(OM(e))return"Webos";if(RM(e))return"Safari";if((e.includes("chrome/")||MM(e))&&!e.includes("edge/"))return"Chrome";if(kM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NM(n=it()){return/firefox\//i.test(n)}function RM(n=it()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MM(n=it()){return/crios\//i.test(n)}function PM(n=it()){return/iemobile/i.test(n)}function kM(n=it()){return/android/i.test(n)}function xM(n=it()){return/blackberry/i.test(n)}function OM(n=it()){return/webos/i.test(n)}function sw(n,e=[]){let t;switch(n){case"Browser":t=KI(it());break;case"Worker":t=`${KI(it())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ti}/${r}`}var Af=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function FM(t){return b(this,arguments,function*(n,e={}){return $c(n,"GET","/v2/passwordPolicy",tw(n,e))})}var LM=6,Sf=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:LM,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Nf=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uc(this),this.idTokenSubscription=new Uc(this),this.beforeStateQueue=new Af(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Bc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield Vc(this,{idToken:e}),r=yield Cr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(nn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield jc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vM()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(nn(this.app))return Promise.reject(xc(this));let t=e?Le(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return nn(this.app)?Promise.reject(xc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return nn(this.app)?Promise.reject(xc(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield FM(this),t=new Sf(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield AM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&br(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield Bc.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&gM(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function VM(n){return Le(n)}var Uc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pI(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jM={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BM(n){jM=n}function UM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function $M(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(br);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var L6=UM("rcb"),V6=new Ar(3e4,6e4);var j6=new Ar(2e3,1e4);var B6=600*1e3;var U6=new Ar(3e4,6e4);var $6=new Ar(5e3,15e3);var H6=encodeURIComponent("fac");var QI="@firebase/auth",YI="1.10.8";var Rf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function HM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qM(n){Tt(new ze("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sw(n)},d=new Nf(r,i,o,u);return $M(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tt(new ze("auth-internal",e=>{let t=VM(e.getProvider("auth").getImmediate());return(r=>new Rf(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),me(QI,YI,HM(n)),me(QI,YI,"esm2017")}var zM=300,q6=sI("authIdTokenMaxAge")||zM;function GM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}BM({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Mf("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",GM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qM("Browser");var qP="auth";var Hc=class{constructor(){return Ai(qP)}};var aw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cw={};var rn,Of;(function(){var n;function e(w,y){function E(){}E.prototype=y.prototype,w.D=y.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,D,C){for(var v=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)v[qt-2]=arguments[qt];return y.prototype[D].apply(I,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,y,E){E||(E=0);var I=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)I[D]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=w.g[0],E=w.g[1],D=w.g[2];var C=w.g[3],v=y+(C^E&(D^C))+I[0]+3614090360&4294967295;y=E+(v<<7&4294967295|v>>>25),v=C+(D^y&(E^D))+I[1]+3905402710&4294967295,C=y+(v<<12&4294967295|v>>>20),v=D+(E^C&(y^E))+I[2]+606105819&4294967295,D=C+(v<<17&4294967295|v>>>15),v=E+(y^D&(C^y))+I[3]+3250441966&4294967295,E=D+(v<<22&4294967295|v>>>10),v=y+(C^E&(D^C))+I[4]+4118548399&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(D^y&(E^D))+I[5]+1200080426&4294967295,C=y+(v<<12&4294967295|v>>>20),v=D+(E^C&(y^E))+I[6]+2821735955&4294967295,D=C+(v<<17&4294967295|v>>>15),v=E+(y^D&(C^y))+I[7]+4249261313&4294967295,E=D+(v<<22&4294967295|v>>>10),v=y+(C^E&(D^C))+I[8]+1770035416&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(D^y&(E^D))+I[9]+2336552879&4294967295,C=y+(v<<12&4294967295|v>>>20),v=D+(E^C&(y^E))+I[10]+4294925233&4294967295,D=C+(v<<17&4294967295|v>>>15),v=E+(y^D&(C^y))+I[11]+2304563134&4294967295,E=D+(v<<22&4294967295|v>>>10),v=y+(C^E&(D^C))+I[12]+1804603682&4294967295,y=E+(v<<7&4294967295|v>>>25),v=C+(D^y&(E^D))+I[13]+4254626195&4294967295,C=y+(v<<12&4294967295|v>>>20),v=D+(E^C&(y^E))+I[14]+2792965006&4294967295,D=C+(v<<17&4294967295|v>>>15),v=E+(y^D&(C^y))+I[15]+1236535329&4294967295,E=D+(v<<22&4294967295|v>>>10),v=y+(D^C&(E^D))+I[1]+4129170786&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^D&(y^E))+I[6]+3225465664&4294967295,C=y+(v<<9&4294967295|v>>>23),v=D+(y^E&(C^y))+I[11]+643717713&4294967295,D=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(D^C))+I[0]+3921069994&4294967295,E=D+(v<<20&4294967295|v>>>12),v=y+(D^C&(E^D))+I[5]+3593408605&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^D&(y^E))+I[10]+38016083&4294967295,C=y+(v<<9&4294967295|v>>>23),v=D+(y^E&(C^y))+I[15]+3634488961&4294967295,D=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(D^C))+I[4]+3889429448&4294967295,E=D+(v<<20&4294967295|v>>>12),v=y+(D^C&(E^D))+I[9]+568446438&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^D&(y^E))+I[14]+3275163606&4294967295,C=y+(v<<9&4294967295|v>>>23),v=D+(y^E&(C^y))+I[3]+4107603335&4294967295,D=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(D^C))+I[8]+1163531501&4294967295,E=D+(v<<20&4294967295|v>>>12),v=y+(D^C&(E^D))+I[13]+2850285829&4294967295,y=E+(v<<5&4294967295|v>>>27),v=C+(E^D&(y^E))+I[2]+4243563512&4294967295,C=y+(v<<9&4294967295|v>>>23),v=D+(y^E&(C^y))+I[7]+1735328473&4294967295,D=C+(v<<14&4294967295|v>>>18),v=E+(C^y&(D^C))+I[12]+2368359562&4294967295,E=D+(v<<20&4294967295|v>>>12),v=y+(E^D^C)+I[5]+4294588738&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^D)+I[8]+2272392833&4294967295,C=y+(v<<11&4294967295|v>>>21),v=D+(C^y^E)+I[11]+1839030562&4294967295,D=C+(v<<16&4294967295|v>>>16),v=E+(D^C^y)+I[14]+4259657740&4294967295,E=D+(v<<23&4294967295|v>>>9),v=y+(E^D^C)+I[1]+2763975236&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^D)+I[4]+1272893353&4294967295,C=y+(v<<11&4294967295|v>>>21),v=D+(C^y^E)+I[7]+4139469664&4294967295,D=C+(v<<16&4294967295|v>>>16),v=E+(D^C^y)+I[10]+3200236656&4294967295,E=D+(v<<23&4294967295|v>>>9),v=y+(E^D^C)+I[13]+681279174&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^D)+I[0]+3936430074&4294967295,C=y+(v<<11&4294967295|v>>>21),v=D+(C^y^E)+I[3]+3572445317&4294967295,D=C+(v<<16&4294967295|v>>>16),v=E+(D^C^y)+I[6]+76029189&4294967295,E=D+(v<<23&4294967295|v>>>9),v=y+(E^D^C)+I[9]+3654602809&4294967295,y=E+(v<<4&4294967295|v>>>28),v=C+(y^E^D)+I[12]+3873151461&4294967295,C=y+(v<<11&4294967295|v>>>21),v=D+(C^y^E)+I[15]+530742520&4294967295,D=C+(v<<16&4294967295|v>>>16),v=E+(D^C^y)+I[2]+3299628645&4294967295,E=D+(v<<23&4294967295|v>>>9),v=y+(D^(E|~C))+I[0]+4096336452&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~D))+I[7]+1126891415&4294967295,C=y+(v<<10&4294967295|v>>>22),v=D+(y^(C|~E))+I[14]+2878612391&4294967295,D=C+(v<<15&4294967295|v>>>17),v=E+(C^(D|~y))+I[5]+4237533241&4294967295,E=D+(v<<21&4294967295|v>>>11),v=y+(D^(E|~C))+I[12]+1700485571&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~D))+I[3]+2399980690&4294967295,C=y+(v<<10&4294967295|v>>>22),v=D+(y^(C|~E))+I[10]+4293915773&4294967295,D=C+(v<<15&4294967295|v>>>17),v=E+(C^(D|~y))+I[1]+2240044497&4294967295,E=D+(v<<21&4294967295|v>>>11),v=y+(D^(E|~C))+I[8]+1873313359&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~D))+I[15]+4264355552&4294967295,C=y+(v<<10&4294967295|v>>>22),v=D+(y^(C|~E))+I[6]+2734768916&4294967295,D=C+(v<<15&4294967295|v>>>17),v=E+(C^(D|~y))+I[13]+1309151649&4294967295,E=D+(v<<21&4294967295|v>>>11),v=y+(D^(E|~C))+I[4]+4149444226&4294967295,y=E+(v<<6&4294967295|v>>>26),v=C+(E^(y|~D))+I[11]+3174756917&4294967295,C=y+(v<<10&4294967295|v>>>22),v=D+(y^(C|~E))+I[2]+718787259&4294967295,D=C+(v<<15&4294967295|v>>>17),v=E+(C^(D|~y))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(D+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var E=y-this.blockSize,I=this.B,D=this.h,C=0;C<y;){if(D==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<y;)if(I[D++]=w.charCodeAt(C++),D==this.blockSize){i(this,I),D=0;break}}else for(;C<y;)if(I[D++]=w[C++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var E=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=E&255,E/=256;for(this.u(w),w=Array(16),y=E=0;4>y;++y)for(var I=0;32>I;I+=8)w[E++]=this.g[y]>>>I&255;return w};function o(w,y){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=y(w)}function s(w,y){this.h=y;for(var E=[],I=!0,D=w.length-1;0<=D;D--){var C=w[D]|0;I&&C==y||(E[D]=C,I=!1)}this.g=E}var c={};function u(w){return-128<=w&&128>w?o(w,function(y){return new s([y|0],0>y?-1:0)}):new s([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return R(d(-w));for(var y=[],E=1,I=0;w>=E;I++)y[I]=w/E|0,E*=4294967296;return new s(y,0)}function f(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return R(f(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),I=g,D=0;D<w.length;D+=8){var C=Math.min(8,w.length-D),v=parseInt(w.substring(D,D+C),y);8>C?(C=d(Math.pow(y,C)),I=I.j(C).add(d(v))):(I=I.j(E),I=I.add(d(v)))}return I}var g=u(0),m=u(1),_=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-R(this).m();for(var w=0,y=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*y,y*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(P(this))return"-"+R(this).toString(w);for(var y=d(Math.pow(w,6)),E=this,I="";;){var D=ae(E,y).g;E=F(E,D.j(y));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=D,S(E))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function P(w){return w.h==-1}n.l=function(w){return w=F(this,w),P(w)?-1:S(w)?0:1};function R(w){for(var y=w.g.length,E=[],I=0;I<y;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}n.abs=function(){return P(this)?R(this):this},n.add=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],I=0,D=0;D<=y;D++){var C=I+(this.i(D)&65535)+(w.i(D)&65535),v=(C>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=v>>>16,C&=65535,v&=65535,E[D]=v<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(w,y){return w.add(R(y))}n.j=function(w){if(S(this)||S(w))return g;if(P(this))return P(w)?R(this).j(R(w)):R(R(this).j(w));if(P(w))return R(this.j(R(w)));if(0>this.l(_)&&0>w.l(_))return d(this.m()*w.m());for(var y=this.g.length+w.g.length,E=[],I=0;I<2*y;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var C=this.i(I)>>>16,v=this.i(I)&65535,qt=w.i(D)>>>16,to=w.i(D)&65535;E[2*I+2*D]+=v*to,B(E,2*I+2*D),E[2*I+2*D+1]+=C*to,B(E,2*I+2*D+1),E[2*I+2*D+1]+=v*qt,B(E,2*I+2*D+1),E[2*I+2*D+2]+=C*qt,B(E,2*I+2*D+2)}for(I=0;I<y;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=y;I<2*y;I++)E[I]=0;return new s(E,0)};function B(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function z(w,y){this.g=w,this.h=y}function ae(w,y){if(S(y))throw Error("division by zero");if(S(w))return new z(g,g);if(P(w))return y=ae(R(w),y),new z(R(y.g),R(y.h));if(P(y))return y=ae(w,R(y)),new z(R(y.g),y.h);if(30<w.g.length){if(P(w)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=y;0>=I.l(w);)E=Ue(E),I=Ue(I);var D=oe(E,1),C=oe(I,1);for(I=oe(I,2),E=oe(E,2);!S(I);){var v=C.add(I);0>=v.l(w)&&(D=D.add(E),C=v),I=oe(I,1),E=oe(E,1)}return y=F(w,D.j(y)),new z(D,y)}for(D=g;0<=w.l(y);){for(E=Math.max(1,Math.floor(w.m()/y.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=d(E),v=C.j(y);P(v)||0<v.l(w);)E-=I,C=d(E),v=C.j(y);S(C)&&(C=m),D=D.add(C),w=F(w,v)}return new z(D,w)}n.A=function(w){return ae(this,w).h},n.and=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},n.or=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},n.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),E=[],I=0;I<y;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function Ue(w){for(var y=w.g.length+1,E=[],I=0;I<y;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function oe(w,y){var E=y>>5;y%=32;for(var I=w.g.length-E,D=[],C=0;C<I;C++)D[C]=0<y?w.i(C+E)>>>y|w.i(C+E+1)<<32-y:w.i(C+E);return new s(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Of=cw.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=f,rn=cw.Integer=s}).apply(typeof aw<"u"?aw:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},on={};var Ff,zP,Si,Lf,ys,zc,Vf,jf,Bf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var p=0;p<a.length-1;p++){var T=a[p];if(!(T in h))break e;h=h[T]}a=a[a.length-1],p=h[a],l=l(p),l!=p&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function o(a,l){a instanceof String&&(a+="");var h=0,p=!1,T={next:function(){if(!p&&h<a.length){var A=h++;return{value:l(A,a[A]),done:!1}}return p=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return o(this,function(l,h){return h})}});var s=s||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function g(a,l,h){if(!a)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,p),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function m(a,l,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function _(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),a.apply(this,p)}}function S(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(p,T,A){for(var k=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)k[ce-2]=arguments[ce];return l.prototype[T].apply(p,k)}}function P(a){let l=a.length;if(0<l){let h=Array(l);for(let p=0;p<l;p++)h[p]=a[p];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(u(p)){let T=a.length||0,A=p.length||0;a.length=T+A;for(let k=0;k<A;k++)a[T+k]=p[k]}else a.push(p)}}class F{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function B(a){return/^[\s\xa0]*$/.test(a)}function z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ae(a){return ae[" "](a),a}ae[" "]=function(){};var Ue=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function oe(a,l,h){for(let p in a)l.call(h,a[p],p,a)}function w(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function y(a){let l={};for(let h in a)l[h]=a[h];return l}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,l){let h,p;for(let T=1;T<arguments.length;T++){p=arguments[T];for(h in p)a[h]=p[h];for(let A=0;A<E.length;A++)h=E[A],Object.prototype.hasOwnProperty.call(p,h)&&(a[h]=p[h])}}function D(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function v(){var a=Uu;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class qt{constructor(){this.h=this.g=null}add(l,h){let p=to.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var to=new F(()=>new $T,a=>a.reset());class $T{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let no,ro=!1,Uu=new qt,im=()=>{let a=c.Promise.resolve(void 0);no=()=>{a.then(HT)}};var HT=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){C(h)}var l=to;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}ro=!1};function fn(){this.s=this.s,this.C=this.C}fn.prototype.s=!1,fn.prototype.ma=function(){this.s||(this.s=!0,this.N())},fn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var qT=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a})();function io(a,l){if(Re.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(Ue){e:{try{ae(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:zT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&io.aa.h.call(this)}}S(io,Re);var zT={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var oo="closure_listenable_"+(1e6*Math.random()|0),GT=0;function WT(a,l,h,p,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=T,this.key=++GT,this.da=this.fa=!1}function Ls(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Vs(a){this.src=a,this.g={},this.h=0}Vs.prototype.add=function(a,l,h,p,T){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var k=Hu(a,l,p,T);return-1<k?(l=a[k],h||(l.fa=!1)):(l=new WT(l,this.src,A,!!p,T),l.fa=h,a.push(l)),l};function $u(a,l){var h=l.type;if(h in a.g){var p=a.g[h],T=Array.prototype.indexOf.call(p,l,void 0),A;(A=0<=T)&&Array.prototype.splice.call(p,T,1),A&&(Ls(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Hu(a,l,h,p){for(var T=0;T<a.length;++T){var A=a[T];if(!A.da&&A.listener==l&&A.capture==!!h&&A.ha==p)return T}return-1}var qu="closure_lm_"+(1e6*Math.random()|0),zu={};function om(a,l,h,p,T){if(p&&p.once)return am(a,l,h,p,T);if(Array.isArray(l)){for(var A=0;A<l.length;A++)om(a,l[A],h,p,T);return null}return h=Qu(h),a&&a[oo]?a.K(l,h,d(p)?!!p.capture:!!p,T):sm(a,l,h,!1,p,T)}function sm(a,l,h,p,T,A){if(!l)throw Error("Invalid event type");var k=d(T)?!!T.capture:!!T,ce=Wu(a);if(ce||(a[qu]=ce=new Vs(a)),h=ce.add(l,h,p,k,A),h.proxy)return h;if(p=KT(),h.proxy=p,p.src=a,p.listener=h,a.addEventListener)qT||(T=k),T===void 0&&(T=!1),a.addEventListener(l.toString(),p,T);else if(a.attachEvent)a.attachEvent(um(l.toString()),p);else if(a.addListener&&a.removeListener)a.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function KT(){function a(h){return l.call(a.src,a.listener,h)}let l=QT;return a}function am(a,l,h,p,T){if(Array.isArray(l)){for(var A=0;A<l.length;A++)am(a,l[A],h,p,T);return null}return h=Qu(h),a&&a[oo]?a.L(l,h,d(p)?!!p.capture:!!p,T):sm(a,l,h,!0,p,T)}function cm(a,l,h,p,T){if(Array.isArray(l))for(var A=0;A<l.length;A++)cm(a,l[A],h,p,T);else p=d(p)?!!p.capture:!!p,h=Qu(h),a&&a[oo]?(a=a.i,l=String(l).toString(),l in a.g&&(A=a.g[l],h=Hu(A,h,p,T),-1<h&&(Ls(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete a.g[l],a.h--)))):a&&(a=Wu(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Hu(l,h,p,T)),(h=-1<a?l[a]:null)&&Gu(h))}function Gu(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[oo])$u(l.i,a);else{var h=a.type,p=a.proxy;l.removeEventListener?l.removeEventListener(h,p,a.capture):l.detachEvent?l.detachEvent(um(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=Wu(l))?($u(h,a),h.h==0&&(h.src=null,l[qu]=null)):Ls(a)}}}function um(a){return a in zu?zu[a]:zu[a]="on"+a}function QT(a,l){if(a.da)a=!0;else{l=new io(l,this);var h=a.listener,p=a.ha||a.src;a.fa&&Gu(a),a=h.call(p,l)}return a}function Wu(a){return a=a[qu],a instanceof Vs?a:null}var Ku="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qu(a){return typeof a=="function"?a:(a[Ku]||(a[Ku]=function(l){return a.handleEvent(l)}),a[Ku])}function Me(){fn.call(this),this.i=new Vs(this),this.M=this,this.F=null}S(Me,fn),Me.prototype[oo]=!0,Me.prototype.removeEventListener=function(a,l,h,p){cm(this,a,l,h,p)};function $e(a,l){var h,p=a.F;if(p)for(h=[];p;p=p.F)h.push(p);if(a=a.M,p=l.type||l,typeof l=="string")l=new Re(l,a);else if(l instanceof Re)l.target=l.target||a;else{var T=l;l=new Re(p,a),I(l,T)}if(T=!0,h)for(var A=h.length-1;0<=A;A--){var k=l.g=h[A];T=js(k,p,!0,l)&&T}if(k=l.g=a,T=js(k,p,!0,l)&&T,T=js(k,p,!1,l)&&T,h)for(A=0;A<h.length;A++)k=l.g=h[A],T=js(k,p,!1,l)&&T}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],p=0;p<h.length;p++)Ls(h[p]);delete a.g[l],a.h--}}this.F=null},Me.prototype.K=function(a,l,h,p){return this.i.add(String(a),l,!1,h,p)},Me.prototype.L=function(a,l,h,p){return this.i.add(String(a),l,!0,h,p)};function js(a,l,h,p){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,A=0;A<l.length;++A){var k=l[A];if(k&&!k.da&&k.capture==h){var ce=k.listener,be=k.ha||k.src;k.fa&&$u(a.i,k),T=ce.call(be,p)!==!1&&T}}return T&&!p.defaultPrevented}function lm(a,l,h){if(typeof a=="function")h&&(a=m(a,h));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function dm(a){a.g=lm(()=>{a.g=null,a.i&&(a.i=!1,dm(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class YT extends fn{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:dm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(a){fn.call(this),this.h=a,this.g={}}S(so,fn);var hm=[];function fm(a){oe(a.g,function(l,h){this.g.hasOwnProperty(h)&&Gu(l)},a),a.g={}}so.prototype.N=function(){so.aa.N.call(this),fm(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yu=c.JSON.stringify,ZT=c.JSON.parse,JT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Zu(){}Zu.prototype.h=null;function pm(a){return a.h||(a.h=a.i())}function gm(){}var ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ju(){Re.call(this,"d")}S(Ju,Re);function Xu(){Re.call(this,"c")}S(Xu,Re);var Bn={},mm=null;function Bs(){return mm=mm||new Me}Bn.La="serverreachability";function ym(a){Re.call(this,Bn.La,a)}S(ym,Re);function co(a){let l=Bs();$e(l,new ym(l))}Bn.STAT_EVENT="statevent";function vm(a,l){Re.call(this,Bn.STAT_EVENT,a),this.stat=l}S(vm,Re);function He(a){let l=Bs();$e(l,new vm(l,a))}Bn.Ma="timingevent";function _m(a,l){Re.call(this,Bn.Ma,a),this.size=l}S(_m,Re);function uo(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function lo(){this.g=!0}lo.prototype.xa=function(){this.g=!1};function XT(a,l,h,p,T,A){a.info(function(){if(a.g)if(A)for(var k="",ce=A.split("&"),be=0;be<ce.length;be++){var ee=ce[be].split("=");if(1<ee.length){var Pe=ee[0];ee=ee[1];var ke=Pe.split("_");k=2<=ke.length&&ke[1]=="type"?k+(Pe+"="+ee+"&"):k+(Pe+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+p+") [attempt "+T+"]: "+l+`
`+h+`
`+k})}function eC(a,l,h,p,T,A,k){a.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+T+"]: "+l+`
`+h+`
`+A+" "+k})}function Br(a,l,h,p){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+nC(a,h)+(p?" "+p:"")})}function tC(a,l){a.info(function(){return"TIMEOUT: "+l})}lo.prototype.info=function(){};function nC(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var p=h[a];if(!(2>p.length)){var T=p[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return Yu(h)}catch{return l}}var Us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Em={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},el;function $s(){}S($s,Zu),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},el=new $s;function pn(a,l,h,p){this.j=a,this.i=l,this.l=h,this.R=p||1,this.U=new so(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Im}function Im(){this.i=null,this.g="",this.h=!1}var wm={},tl={};function nl(a,l,h){a.L=1,a.v=Gs(zt(l)),a.m=h,a.P=!0,Dm(a,null)}function Dm(a,l){a.F=Date.now(),Hs(a),a.A=zt(a.v);var h=a.A,p=a.R;Array.isArray(p)||(p=[String(p)]),Lm(h.i,"t",p),a.C=0,h=a.j.J,a.h=new Im,a.g=ty(a.j,h?l:null,!a.m),0<a.O&&(a.M=new YT(m(a.Y,a,a.g),a.O)),l=a.U,h=a.g,p=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(hm[0]=T.toString()),T=hm);for(var A=0;A<T.length;A++){var k=om(h,T[A],p||l.handleEvent,!1,l.h||l);if(!k)break;l.g[k.key]=k}l=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),co(),XT(a.i,a.u,a.A,a.l,a.R,a.m)}pn.prototype.ca=function(a){a=a.target;let l=this.M;l&&Gt(a)==3?l.j():this.Y(a)},pn.prototype.Y=function(a){try{if(a==this.g)e:{let ke=Gt(this.g);var l=this.g.Ba();let Hr=this.g.Z();if(!(3>ke)&&(ke!=3||this.g&&(this.h.h||this.g.oa()||qm(this.g)))){this.J||ke!=4||l==7||(l==8||0>=Hr?co(3):co(2)),rl(this);var h=this.g.Z();this.X=h;t:if(Tm(this)){var p=qm(this.g);a="";var T=p.length,A=Gt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Un(this),ho(this);var k="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(p[l],{stream:!(A&&l==T-1)});p.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=h==200,eC(this.i,this.u,this.A,this.l,this.R,ke,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,be=this.g;if((ce=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ce)){var ee=ce;break t}}ee=null}if(h=ee)Br(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,il(this,h);else{this.o=!1,this.s=3,He(12),Un(this),ho(this);break e}}if(this.P){h=!0;let pt;for(;!this.J&&this.C<k.length;)if(pt=rC(this,k),pt==tl){ke==4&&(this.s=4,He(14),h=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==wm){this.s=4,He(15),Br(this.i,this.l,k,"[Invalid Chunk]"),h=!1;break}else Br(this.i,this.l,pt,null),il(this,pt);if(Tm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||k.length!=0||this.h.h||(this.s=1,He(16),h=!1),this.o=this.o&&h,!h)Br(this.i,this.l,k,"[Invalid Chunked Response]"),Un(this),ho(this);else if(0<k.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),ll(Pe),Pe.M=!0,He(11))}}else Br(this.i,this.l,k,null),il(this,k);ke==4&&Un(this),this.o&&!this.J&&(ke==4?Zm(this.j,this):(this.o=!1,Hs(this)))}else EC(this.g),h==400&&0<k.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Un(this),ho(this)}}}catch{}finally{}};function Tm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function rC(a,l){var h=a.C,p=l.indexOf(`
`,h);return p==-1?tl:(h=Number(l.substring(h,p)),isNaN(h)?wm:(p+=1,p+h>l.length?tl:(l=l.slice(p,p+h),a.C=p+h,l)))}pn.prototype.cancel=function(){this.J=!0,Un(this)};function Hs(a){a.S=Date.now()+a.I,Cm(a,a.I)}function Cm(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=uo(m(a.ba,a),l)}function rl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}pn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(tC(this.i,this.A),this.L!=2&&(co(),He(17)),Un(this),this.s=2,ho(this)):Cm(this,this.S-a)};function ho(a){a.j.G==0||a.J||Zm(a.j,a)}function Un(a){rl(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,fm(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function il(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||ol(h.h,a))){if(!a.K&&ol(h.h,a)&&h.G==3){try{var p=h.Da.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var T=p;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Zs(h),Qs(h);else break e;ul(h),He(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=uo(m(h.Za,h),6e3));if(1>=Sm(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Hn(h,11)}else if((a.K||h.g==a)&&Zs(h),!B(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let ee=T[l];if(h.T=ee[0],ee=ee[1],h.G==2)if(ee[0]=="c"){h.K=ee[1],h.ia=ee[2];let Pe=ee[3];Pe!=null&&(h.la=Pe,h.j.info("VER="+h.la));let ke=ee[4];ke!=null&&(h.Aa=ke,h.j.info("SVER="+h.Aa));let Hr=ee[5];Hr!=null&&typeof Hr=="number"&&0<Hr&&(p=1.5*Hr,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let pt=a.g;if(pt){let Xs=pt.g?pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xs){var A=p.h;A.g||Xs.indexOf("spdy")==-1&&Xs.indexOf("quic")==-1&&Xs.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(sl(A,A.h),A.h=null))}if(p.D){let dl=pt.g?pt.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(p.ya=dl,le(p.I,p.D,dl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var k=a;if(p.qa=ey(p,p.J?p.ia:null,p.W),k.K){Nm(p.h,k);var ce=k,be=p.L;be&&(ce.I=be),ce.B&&(rl(ce),Hs(ce)),p.g=k}else Qm(p);0<h.i.length&&Ys(h)}else ee[0]!="stop"&&ee[0]!="close"||Hn(h,7);else h.G==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?Hn(h,7):cl(h):ee[0]!="noop"&&h.l&&h.l.ta(ee),h.v=0)}}co(4)}catch{}}var iC=class{constructor(a,l){this.g=a,this.map=l}};function bm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Am(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Sm(a){return a.h?1:a.g?a.g.size:0}function ol(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function sl(a,l){a.g?a.g.add(l):a.h=l}function Nm(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}bm.prototype.cancel=function(){if(this.i=Rm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Rm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return P(a.i)}function oC(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,p=0;p<h;p++)l.push(a[p]);return l}l=[],h=0;for(p in a)l[h++]=a[p];return l}function sC(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let p in a)l[h++]=p;return l}}}function Mm(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=sC(a),p=oC(a),T=p.length,A=0;A<T;A++)l.call(void 0,p[A],h&&h[A],a)}var Pm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aC(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var p=a[h].indexOf("="),T=null;if(0<=p){var A=a[h].substring(0,p);T=a[h].substring(p+1)}else A=a[h];l(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function $n(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof $n){this.h=a.h,qs(this,a.j),this.o=a.o,this.g=a.g,zs(this,a.s),this.l=a.l;var l=a.i,h=new go;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),km(this,h),this.m=a.m}else a&&(l=String(a).match(Pm))?(this.h=!1,qs(this,l[1]||"",!0),this.o=fo(l[2]||""),this.g=fo(l[3]||"",!0),zs(this,l[4]),this.l=fo(l[5]||"",!0),km(this,l[6]||"",!0),this.m=fo(l[7]||"")):(this.h=!1,this.i=new go(null,this.h))}$n.prototype.toString=function(){var a=[],l=this.j;l&&a.push(po(l,xm,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(po(l,xm,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(po(h,h.charAt(0)=="/"?lC:uC,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",po(h,hC)),a.join("")};function zt(a){return new $n(a)}function qs(a,l,h){a.j=h?fo(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function zs(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function km(a,l,h){l instanceof go?(a.i=l,fC(a.i,a.h)):(h||(l=po(l,dC)),a.i=new go(l,a.h))}function le(a,l,h){a.i.set(l,h)}function Gs(a){return le(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function fo(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function po(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,cC),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function cC(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xm=/[#\/\?@]/g,uC=/[#\?:]/g,lC=/[#\?]/g,dC=/[#\?@]/g,hC=/#/g;function go(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function gn(a){a.g||(a.g=new Map,a.h=0,a.i&&aC(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=go.prototype,n.add=function(a,l){gn(this),this.i=null,a=Ur(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function Om(a,l){gn(a),l=Ur(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Fm(a,l){return gn(a),l=Ur(a,l),a.g.has(l)}n.forEach=function(a,l){gn(this),this.g.forEach(function(h,p){h.forEach(function(T){a.call(l,T,p,this)},this)},this)},n.na=function(){gn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let p=0;p<l.length;p++){let T=a[p];for(let A=0;A<T.length;A++)h.push(l[p])}return h},n.V=function(a){gn(this);let l=[];if(typeof a=="string")Fm(this,a)&&(l=l.concat(this.g.get(Ur(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return gn(this),this.i=null,a=Ur(this,a),Fm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Lm(a,l,h){Om(a,l),0<h.length&&(a.i=null,a.g.set(Ur(a,l),P(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var p=l[h];let A=encodeURIComponent(String(p)),k=this.V(p);for(p=0;p<k.length;p++){var T=A;k[p]!==""&&(T+="="+encodeURIComponent(String(k[p]))),a.push(T)}}return this.i=a.join("&")};function Ur(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function fC(a,l){l&&!a.j&&(gn(a),a.i=null,a.g.forEach(function(h,p){var T=p.toLowerCase();p!=T&&(Om(this,p),Lm(this,T,h))},a)),a.j=l}function pC(a,l){let h=new lo;if(c.Image){let p=new Image;p.onload=_(mn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=_(mn,h,"TestLoadImage: error",!1,l,p),p.onabort=_(mn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=_(mn,h,"TestLoadImage: timeout",!1,l,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=a}else l(!1)}function gC(a,l){let h=new lo,p=new AbortController,T=setTimeout(()=>{p.abort(),mn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:p.signal}).then(A=>{clearTimeout(T),A.ok?mn(h,"TestPingServer: ok",!0,l):mn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),mn(h,"TestPingServer: error",!1,l)})}function mn(a,l,h,p,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),p(h)}catch{}}function mC(){this.g=new JT}function yC(a,l,h){let p=h||"";try{Mm(a,function(T,A){let k=T;d(T)&&(k=Yu(T)),l.push(p+A+"="+encodeURIComponent(k))})}catch(T){throw l.push(p+"type="+encodeURIComponent("_badmap")),T}}function mo(a){this.l=a.Ub||null,this.j=a.eb||!1}S(mo,Zu),mo.prototype.g=function(){return new Ws(this.l,this.j)},mo.prototype.i=(function(a){return function(){return a}})({});function Ws(a,l){Me.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ws,Me),n=Ws.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,vo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?yo(this):vo(this),this.readyState==3&&Vm(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,yo(this))},n.Qa=function(a){this.g&&(this.response=a,yo(this))},n.ga=function(){this.g&&yo(this)};function yo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,vo(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function vo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function jm(a){let l="";return oe(a,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function al(a,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=jm(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):le(a,l,h))}function pe(a){Me.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(pe,Me);var vC=/^https?$/i,_C=["POST","PUT"];n=pe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():el.g(),this.v=this.o?pm(this.o):pm(el),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(A){Bm(this,A);return}if(a=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var T in p)h.set(T,p[T]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let A of p.keys())h.set(A,p.get(A));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(_C,l,void 0))||p||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of h)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hm(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){Bm(this,A)}};function Bm(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Um(a),Ks(a)}function Um(a){a.A||(a.A=!0,$e(a,"complete"),$e(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,$e(this,"complete"),$e(this,"abort"),Ks(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$m(this):this.bb())},n.bb=function(){$m(this)};function $m(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Gt(a)!=4||a.Z()!=2)){if(a.u&&Gt(a)==4)lm(a.Ea,0,a);else if($e(a,"readystatechange"),Gt(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=k===0){var T=String(a.D).match(Pm)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),p=!vC.test(T?T.toLowerCase():"")}h=p}if(h)$e(a,"complete"),$e(a,"success");else{a.m=6;try{var A=2<Gt(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",Um(a)}}finally{Ks(a)}}}}function Ks(a,l){if(a.g){Hm(a);let h=a.g,p=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||$e(a,"ready");try{h.onreadystatechange=p}catch{}}}function Hm(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Gt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),ZT(l)}};function qm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function EC(a){let l={};a=(a.g&&2<=Gt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<a.length;p++){if(B(a[p]))continue;var h=D(a[p]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=l[T]||[];l[T]=A,A.push(h)}w(l,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _o(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function zm(a){this.Aa=0,this.i=[],this.j=new lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_o("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_o("baseRetryDelayMs",5e3,a),this.cb=_o("retryDelaySeedMs",1e4,a),this.Wa=_o("forwardChannelMaxRetries",2,a),this.wa=_o("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new bm(a&&a.concurrentRequestLimit),this.Da=new mC,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zm.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,p){He(0),this.W=a,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=ey(this,null,this.W),Ys(this)};function cl(a){if(Gm(a),a.G==3){var l=a.U++,h=zt(a.I);if(le(h,"SID",a.K),le(h,"RID",l),le(h,"TYPE","terminate"),Eo(a,h),l=new pn(a,a.j,l),l.L=2,l.v=Gs(zt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=ty(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Hs(l)}Xm(a)}function Qs(a){a.g&&(ll(a),a.g.cancel(),a.g=null)}function Gm(a){Qs(a),a.u&&(c.clearTimeout(a.u),a.u=null),Zs(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ys(a){if(!Am(a.h)&&!a.s){a.s=!0;var l=a.Ga;no||im(),ro||(no(),ro=!0),Uu.add(l,a),a.B=0}}function IC(a,l){return Sm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=uo(m(a.Ga,a,l),Jm(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new pn(this,this.j,a),A=this.o;if(this.S&&(A?(A=y(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Km(this,T,l),h=zt(this.I),le(h,"RID",a),le(h,"CVER",22),this.D&&le(h,"X-HTTP-Session-Id",this.D),Eo(this,h),A&&(this.O?l="headers="+encodeURIComponent(String(jm(A)))+"&"+l:this.m&&al(h,this.m,A)),sl(this.h,T),this.Ua&&le(h,"TYPE","init"),this.P?(le(h,"$req",l),le(h,"SID","null"),T.T=!0,nl(T,h,null)):nl(T,h,l),this.G=2}}else this.G==3&&(a?Wm(this,a):this.i.length==0||Am(this.h)||Wm(this))};function Wm(a,l){var h;l?h=l.l:h=a.U++;let p=zt(a.I);le(p,"SID",a.K),le(p,"RID",h),le(p,"AID",a.T),Eo(a,p),a.m&&a.o&&al(p,a.m,a.o),h=new pn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Km(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),sl(a.h,h),nl(h,p,l)}function Eo(a,l){a.H&&oe(a.H,function(h,p){le(l,p,h)}),a.l&&Mm({},function(h,p){le(l,p,h)})}function Km(a,l,h){h=Math.min(a.i.length,h);var p=a.l?m(a.l.Na,a.l,a):null;e:{var T=a.i;let A=-1;for(;;){let k=["count="+h];A==-1?0<h?(A=T[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let ce=!0;for(let be=0;be<h;be++){let ee=T[be].g,Pe=T[be].map;if(ee-=A,0>ee)A=Math.max(0,T[be].g-100),ce=!1;else try{yC(Pe,k,"req"+ee+"_")}catch{p&&p(Pe)}}if(ce){p=k.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,p}function Qm(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;no||im(),ro||(no(),ro=!0),Uu.add(l,a),a.v=0}}function ul(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=uo(m(a.Fa,a),Jm(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Ym(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=uo(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),Qs(this),Ym(this))};function ll(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Ym(a){a.g=new pn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=zt(a.qa);le(l,"RID","rpc"),le(l,"SID",a.K),le(l,"AID",a.T),le(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&le(l,"TO",a.ja),le(l,"TYPE","xmlhttp"),Eo(a,l),a.m&&a.o&&al(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Gs(zt(l)),h.m=null,h.P=!0,Dm(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Qs(this),ul(this),He(19))};function Zs(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Zm(a,l){var h=null;if(a.g==l){Zs(a),ll(a),a.g=null;var p=2}else if(ol(a.h,l))h=l.D,Nm(a.h,l),p=1;else return;if(a.G!=0){if(l.o)if(p==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;p=Bs(),$e(p,new _m(p,h)),Ys(a)}else Qm(a);else if(T=l.s,T==3||T==0&&0<l.X||!(p==1&&IC(a,l)||p==2&&ul(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:Hn(a,5);break;case 4:Hn(a,10);break;case 3:Hn(a,6);break;default:Hn(a,2)}}}function Jm(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function Hn(a,l){if(a.j.info("Error code "+l),l==2){var h=m(a.fb,a),p=a.Xa;let T=!p;p=new $n(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qs(p,"https"),Gs(p),T?pC(p.toString(),h):gC(p.toString(),h)}else He(2);a.G=0,a.l&&a.l.sa(l),Xm(a),Gm(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Xm(a){if(a.G=0,a.ka=[],a.l){let l=Rm(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function ey(a,l,h){var p=h instanceof $n?zt(h):new $n(h);if(p.g!="")l&&(p.g=l+"."+p.g),zs(p,p.s);else{var T=c.location;p=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var A=new $n(null);p&&qs(A,p),l&&(A.g=l),T&&zs(A,T),h&&(A.l=h),p=A}return h=a.D,l=a.ya,h&&l&&le(p,h,l),le(p,"VER",a.la),Eo(a,p),p}function ty(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new pe(new mo({eb:h})):new pe(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ny(){}n=ny.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Js(){}Js.prototype.g=function(a,l){return new Je(a,l)};function Je(a,l){Me.call(this),this.g=new zm(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!B(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!B(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new $r(this)}S(Je,Me),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){cl(this.g)},Je.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Yu(a),a=h);l.i.push(new iC(l.Ya++,a)),l.G==3&&Ys(l)},Je.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,Je.aa.N.call(this)};function ry(a){Ju.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}S(ry,Ju);function iy(){Xu.call(this),this.status=1}S(iy,Xu);function $r(a){this.g=a}S($r,ny),$r.prototype.ua=function(){$e(this.g,"a")},$r.prototype.ta=function(a){$e(this.g,new ry(a))},$r.prototype.sa=function(a){$e(this.g,new iy)},$r.prototype.ra=function(){$e(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,Bf=on.createWebChannelTransport=function(){return new Js},jf=on.getStatEventTarget=function(){return Bs()},Vf=on.Event=Bn,zc=on.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,ys=on.ErrorCode=Us,Em.COMPLETE="complete",Lf=on.EventType=Em,gm.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Si=on.WebChannel=gm,zP=on.FetchXmlHttpFactory=mo,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,Ff=on.XhrIo=pe}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});var uw="@firebase/firestore",lw="4.8.0";var Te=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");var Zi="11.10.0";var Pr=new Ft("@firebase/firestore");function Ni(){return Pr.logLevel}function x(n,...e){if(Pr.logLevel<=Q.DEBUG){let t=e.map(Ag);Pr.debug(`Firestore (${Zi}): ${n}`,...t)}}function cn(n,...e){if(Pr.logLevel<=Q.ERROR){let t=e.map(Ag);Pr.error(`Firestore (${Zi}): ${n}`,...t)}}function xn(n,...e){if(Pr.logLevel<=Q.WARN){let t=e.map(Ag);Pr.warn(`Firestore (${Zi}): ${n}`,...t)}}function Ag(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function V(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,eD(n,r,t)}function eD(n,e,t){let r=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw cn(r),new Error(r)}function ie(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||eD(e,i,r)}function U(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends lt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Jc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Te.UNAUTHENTICATED))}shutdown(){}},Gf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Wf=class{constructor(e){this.t=e,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>b(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string",31837,{l:r}),new Jc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string",2055,{h:e}),new Te(e)}},Kf=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Qf=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Kf(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Xc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Yf=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ie(this.o===void 0,3512);let r=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,x("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function GP(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function tD(){return new TextEncoder}var Ds=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=GP(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function W(n,e){return n<e?-1:n>e?1:0}function Zf(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return W(r,i);{let o=tD(),s=WP(o.encode(dw(n,t)),o.encode(dw(e,t)));return s!==0?s:W(r,i)}}t+=r>65535?2:1}return W(n.length,e.length)}function dw(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function WP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return W(n[t],e[t]);return W(n.length,e.length)}function Li(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var hw="__name__",eu=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&V(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&V(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return W(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Zf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rn.fromString(e.substring(4,e.length-2))}},fe=class n extends eu{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},KP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,st=class n extends eu{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return KP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hw}static keyField(){return new n([hw])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var L=class n{constructor(e){this.path=e}static fromPath(e){return new n(fe.fromString(e))}static fromName(e){return new n(fe.fromString(e).popFirst(5))}static empty(){return new n(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new fe(e.slice()))}};function nD(n,e,t){if(!t)throw new O(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QP(n,e,t,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fw(n){if(!L.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pw(n){if(L.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rD(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":V(12329,{type:typeof n})}function Nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sg(n);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _e(n,e){let t={typeString:n};return e&&(t.value=e),t}function xs(n,e){if(!rD(n))throw new O(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(N.INVALID_ARGUMENT,t);return!0}var gw=-62135596800,mw=1e6,Ee=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gw)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mw}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xs(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-gw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:_e("string",Ee._jsonSchemaVersion),seconds:_e("number"),nanoseconds:_e("number")};var H=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ee(0,0))}static max(){return new n(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ts=-1,Jf=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Jf.UNKNOWN_ID=-1;function YP(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new Ee(t+1,0):new Ee(t,r));return new kr(i,L.empty(),e)}function ZP(n){return new kr(n.readTime,n.key,Ts)}var kr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(H.min(),L.empty(),Ts)}static max(){return new n(H.max(),L.empty(),Ts)}};function JP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=L.comparator(n.documentKey,e.documentKey),t!==0?t:W(n.largestBatchId,e.largestBatchId))}var XP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ji(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==XP)throw n;x("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&V(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let d=u;t(e[d]).next(f=>{s[d]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function ek(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xi(n){return n.name==="IndexedDbTransactionError"}var Ng=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Rg=-1;function Mu(n){return n==null}function Cs(n){return n===0&&1/n==-1/0}function tk(n){return typeof n=="number"&&Number.isInteger(n)&&!Cs(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var iD="";function nk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yw(e)),e=rk(n.get(t),e);return yw(e)}function rk(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case iD:t+="";break;default:t+=o}}return t}function yw(n){return n+iD+""}var ik="remoteDocuments",oD="owner";var sD="mutationQueues";var aD="mutations";var cD="documentMutations",ok="remoteDocumentsV14";var uD="remoteDocumentGlobal";var lD="targets";var dD="targetDocuments";var hD="targetGlobal",fD="collectionParents";var pD="clientMetadata";var gD="bundles";var mD="namedQueries";var sk="indexConfiguration";var ak="indexState";var ck="indexEntries";var yD="documentOverlays";var uk="globals";var lk=[sD,aD,cD,ik,lD,oD,hD,dD,pD,uD,fD,gD,mD],Kz=[...lk,yD],dk=[sD,aD,cD,ok,lD,oD,hD,dD,pD,uD,fD,gD,mD,yD],hk=dk,fk=[...hk,sk,ak,ck];var Qz=[...fk,uk];function vw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jn(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vD(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ge=class n{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ki(this.root,e,this.comparator,!0)}},ki=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Vt=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw V(43730,{key:this.key,value:this.value});if(this.right.isRed())throw V(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw V(27949);return e+(this.isRed()?0:1)}};Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw V(57766)}get value(){throw V(16141)}get color(){throw V(16727)}get left(){throw V(29726)}get right(){throw V(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class n{constructor(e){this.comparator=e,this.data=new ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tu(this.data.getIterator())}getIteratorFrom(e){return new tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},tu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ft=class n{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ce(st.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Li(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var nu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Be=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nu("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Be.EMPTY_BYTE_STRING=new Be("");var pk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function un(n){if(ie(!!n,39018),typeof n=="string"){let e=0,t=pk.exec(n);if(ie(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:he(n.seconds),nanos:he(n.nanos)}}function he(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ln(n){return typeof n=="string"?Be.fromBase64String(n):Be.fromUint8Array(n)}var _D="server_timestamp",ED="__type__",ID="__previous_value__",wD="__local_write_time__";function Mg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ED])===null||t===void 0?void 0:t.stringValue)===_D}function Pu(n){let e=n.mapValue.fields[ID];return Mg(e)?Pu(e):e}function bs(n){let e=un(n.mapValue.fields[wD].timestampValue);return new Ee(e.seconds,e.nanos)}var ep=class{constructor(e,t,r,i,o,s,c,u,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}},ru="(default)",iu=class n{constructor(e,t){this.projectId=e,this.database=t||ru}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Pg="__type__",DD="__max__",Gc={mapValue:{fields:{__type__:{stringValue:DD}}}},kg="__vector__",Vi="value";function On(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mg(n)?4:CD(n)?9007199254740991:TD(n)?10:11:V(28295,{value:n})}function Ut(n,e){if(n===e)return!0;let t=On(n);if(t!==On(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bs(n).isEqual(bs(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=un(i.timestampValue),c=un(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ln(i.bytesValue).isEqual(ln(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return he(i.geoPointValue.latitude)===he(o.geoPointValue.latitude)&&he(i.geoPointValue.longitude)===he(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return he(i.integerValue)===he(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=he(i.doubleValue),c=he(o.doubleValue);return s===c?Cs(s)===Cs(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return Li(n.arrayValue.values||[],e.arrayValue.values||[],Ut);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(vw(s)!==vw(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Ut(s[u],c[u])))return!1;return!0})(n,e);default:return V(52216,{left:n})}}function As(n,e){return(n.values||[]).find(t=>Ut(t,e))!==void 0}function ji(n,e){if(n===e)return 0;let t=On(n),r=On(e);if(t!==r)return W(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return W(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=he(o.integerValue||o.doubleValue),u=he(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return _w(n.timestampValue,e.timestampValue);case 4:return _w(bs(n),bs(e));case 5:return Zf(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=ln(o),u=ln(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=W(c[d],u[d]);if(f!==0)return f}return W(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=W(he(o.latitude),he(s.latitude));return c!==0?c:W(he(o.longitude),he(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ew(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,d,f;let g=o.fields||{},m=s.fields||{},_=(c=g[Vi])===null||c===void 0?void 0:c.arrayValue,S=(u=m[Vi])===null||u===void 0?void 0:u.arrayValue,P=W(((d=_?.values)===null||d===void 0?void 0:d.length)||0,((f=S?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:Ew(_,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Gc.mapValue&&s===Gc.mapValue)return 0;if(o===Gc.mapValue)return 1;if(s===Gc.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),d=s.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){let m=Zf(u[g],f[g]);if(m!==0)return m;let _=ji(c[u[g]],d[f[g]]);if(_!==0)return _}return W(u.length,f.length)})(n.mapValue,e.mapValue);default:throw V(23264,{le:t})}}function _w(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return W(n,e);let t=un(n),r=un(e),i=W(t.seconds,r.seconds);return i!==0?i:W(t.nanos,r.nanos)}function Ew(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ji(t[i],r[i]);if(o)return o}return W(t.length,r.length)}function Bi(n){return tp(n)}function tp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=un(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ln(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return L.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=tp(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${tp(t.fields[s])}`;return i+"}"})(n.mapValue):V(61005,{value:n})}function Qc(n){switch(On(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Pu(n);return e?16+Qc(e):16;case 5:return 2*n.stringValue.length;case 6:return ln(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Qc(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return jn(r.fields,(o,s)=>{i+=o.length+Qc(s)}),i})(n.mapValue);default:throw V(13486,{value:n})}}function np(n){return!!n&&"integerValue"in n}function xg(n){return!!n&&"arrayValue"in n}function Iw(n){return!!n&&"nullValue"in n}function ww(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yc(n){return!!n&&"mapValue"in n}function TD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Pg])===null||t===void 0?void 0:t.stringValue)===kg}function _s(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return jn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_s(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_s(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DD}var Zz={mapValue:{fields:{[Pg]:{stringValue:kg},[Vi]:{arrayValue:{}}}}};var ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_s(t)}setAll(e){let t=st.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=_s(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jn(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(_s(this.value))}};function bD(n){let e=[];return jn(n.fields,(t,r)=>{let i=new st([t]);if(Yc(r)){let o=bD(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ft(e)}var bt=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,H.min(),H.min(),H.min(),ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,H.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,H.min(),H.min(),ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,H.min(),H.min(),ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ui=class{constructor(e,t){this.position=e,this.inclusive=t}};function Dw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=L.comparator(L.fromName(s.referenceValue),t.key):r=ji(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ut(n.position[t],e.position[t]))return!1;return!0}var $i=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function gk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ou=class{},Ie=class n extends ou{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ip(e,t,r):t==="array-contains"?new ap(e,r):t==="in"?new cp(e,r):t==="not-in"?new up(e,r):t==="array-contains-any"?new lp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new op(e,r):new sp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ji(t,this.value)):t!==null&&On(this.value)===On(t)&&this.matchesComparison(ji(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$t=class n extends ou{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return AD(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function AD(n){return n.op==="and"}function SD(n){return mk(n)&&AD(n)}function mk(n){for(let e of n.filters)if(e instanceof $t)return!1;return!0}function rp(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+Bi(n.value);if(SD(n))return n.filters.map(e=>rp(e)).join(",");{let e=n.filters.map(t=>rp(t)).join(",");return`${n.op}(${e})`}}function ND(n,e){return n instanceof Ie?(function(r,i){return i instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&Ut(r.value,i.value)})(n,e):n instanceof $t?(function(r,i){return i instanceof $t&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&ND(s,i.filters[c]),!0):!1})(n,e):void V(19439)}function RD(n){return n instanceof Ie?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bi(t.value)}`})(n):n instanceof $t?(function(t){return t.op.toString()+" {"+t.getFilters().map(RD).join(" ,")+"}"})(n):"Filter"}var ip=class extends Ie{constructor(e,t,r){super(e,t,r),this.key=L.fromName(r.referenceValue)}matches(e){let t=L.comparator(e.key,this.key);return this.matchesComparison(t)}},op=class extends Ie{constructor(e,t){super(e,"in",t),this.keys=MD("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},sp=class extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=MD("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function MD(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>L.fromName(r.referenceValue))}var ap=class extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xg(t)&&As(t.arrayValue,this.value)}},cp=class extends Ie{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&As(this.value.arrayValue,t)}},up=class extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(As(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!As(this.value.arrayValue,t)}},lp=class extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>As(this.value.arrayValue,r))}};var dp=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function Cw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new dp(n,e,t,r,i,o,s)}function Og(n){let e=U(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Mu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bi(r)).join(",")),e.Pe=t}return e.Pe}function Fg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ND(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tw(n.startAt,e.startAt)&&Tw(n.endAt,e.endAt)}function hp(n){return L.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function yk(n,e,t,r,i,o,s,c){return new Hi(n,e,t,r,i,o,s,c)}function Lg(n){return new Hi(n)}function bw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vk(n){return n.collectionGroup!==null}function Es(n){let e=U(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Ce(st.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new $i(o,r))}),t.has(st.keyField().canonicalString())||e.Te.push(new $i(st.keyField(),r))}return e.Te}function jt(n){let e=U(n);return e.Ie||(e.Ie=_k(e,Es(n))),e.Ie}function _k(n,e){if(n.limitType==="F")return Cw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $i(i.field,o)});let t=n.endAt?new Ui(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ui(n.startAt.position,n.startAt.inclusive):null;return Cw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fp(n,e,t){return new Hi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ku(n,e){return Fg(jt(n),jt(e))&&n.limitType===e.limitType}function PD(n){return`${Og(jt(n))}|lt:${n.limitType}`}function Ri(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>RD(i)).join(", ")}]`),Mu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bi(i)).join(",")),`Target(${r})`})(jt(n))}; limitType=${n.limitType})`}function xu(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):L.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Es(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let d=Dw(s,c,u);return s.inclusive?d<=0:d<0})(r.startAt,Es(r),i)||r.endAt&&!(function(s,c,u){let d=Dw(s,c,u);return s.inclusive?d>=0:d>0})(r.endAt,Es(r),i))})(n,e)}function Ek(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kD(n){return(e,t)=>{let r=!1;for(let i of Es(n)){let o=Ik(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Ik(n,e,t){let r=n.field.isKeyField()?L.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),d=c.data.field(o);return u!==null&&d!==null?ji(u,d):V(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return V(19790,{direction:n.dir})}}var dn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jn(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return vD(this.inner)}size(){return this.innerSize}};var wk=new ge(L.comparator);function hn(){return wk}var xD=new ge(L.comparator);function vs(...n){let e=xD;for(let t of n)e=e.insert(t.key,t);return e}function OD(n){let e=xD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sr(){return Is()}function FD(){return Is()}function Is(){return new dn(n=>n.toString(),(n,e)=>n.isEqual(e))}var Dk=new ge(L.comparator),Tk=new Ce(L.comparator);function Z(...n){let e=Tk;for(let t of n)e=e.add(t);return e}var Ck=new Ce(W);function bk(){return Ck}function Vg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cs(e)?"-0":e}}function LD(n){return{integerValue:""+n}}function Ak(n,e){return tk(e)?LD(e):Vg(n,e)}var qi=class{constructor(){this._=void 0}};function Sk(n,e,t){return n instanceof zi?(function(i,o){let s={fields:{[ED]:{stringValue:_D},[wD]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Mg(o)&&(o=Pu(o)),o&&(s.fields[ID]=o),{mapValue:s}})(t,e):n instanceof xr?jD(n,e):n instanceof Or?BD(n,e):(function(i,o){let s=VD(i,o),c=Aw(s)+Aw(i.Ee);return np(s)&&np(i.Ee)?LD(c):Vg(i.serializer,c)})(n,e)}function Nk(n,e,t){return n instanceof xr?jD(n,e):n instanceof Or?BD(n,e):t}function VD(n,e){return n instanceof Gi?(function(r){return np(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var zi=class extends qi{},xr=class extends qi{constructor(e){super(),this.elements=e}};function jD(n,e){let t=UD(e);for(let r of n.elements)t.some(i=>Ut(i,r))||t.push(r);return{arrayValue:{values:t}}}var Or=class extends qi{constructor(e){super(),this.elements=e}};function BD(n,e){let t=UD(e);for(let r of n.elements)t=t.filter(i=>!Ut(i,r));return{arrayValue:{values:t}}}var Gi=class extends qi{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Aw(n){return he(n.integerValue||n.doubleValue)}function UD(n){return xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Rk(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof xr&&i instanceof xr||r instanceof Or&&i instanceof Or?Li(r.elements,i.elements,Ut):r instanceof Gi&&i instanceof Gi?Ut(r.Ee,i.Ee):r instanceof zi&&i instanceof zi})(n.transform,e.transform)}var pp=class{constructor(e,t){this.version=e,this.transformResults=t}},an=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Zc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Wi=class{};function $D(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ss(n.key,an.none()):new Fr(n.key,n.data,an.none());{let t=n.data,r=ot.empty(),i=new Ce(st.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ht(n.key,r,new ft(i.toArray()),an.none())}}function Mk(n,e,t){n instanceof Fr?(function(i,o,s){let c=i.value.clone(),u=Nw(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Ht?(function(i,o,s){if(!Zc(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=Nw(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(HD(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function ws(n,e,t,r){return n instanceof Fr?(function(o,s,c,u){if(!Zc(o.precondition,s))return c;let d=o.value.clone(),f=Rw(o.fieldTransforms,u,s);return d.setAll(f),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ht?(function(o,s,c,u){if(!Zc(o.precondition,s))return c;let d=Rw(o.fieldTransforms,u,s),f=s.data;return f.setAll(HD(o)),f.setAll(d),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(o,s,c){return Zc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function Pk(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=VD(r.transform,i||null);o!=null&&(t===null&&(t=ot.empty()),t.set(r.field,o))}return t||null}function Sw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Li(r,i,(o,s)=>Rk(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fr=class extends Wi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ht=class extends Wi{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function HD(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Nw(n,e,t){let r=new Map;ie(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,Nk(s,c,t[i]))}return r}function Rw(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Sk(o,s,e))}return r}var Ss=class extends Wi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},gp=class extends Wi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var mp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Mk(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ws(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ws(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=FD();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=$D(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&Li(this.mutations,e.mutations,(t,r)=>Sw(t,r))&&Li(this.baseMutations,e.baseMutations,(t,r)=>Sw(t,r))}},yp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ie(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Dk})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var vp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _p=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ye,X;function kk(n){switch(n){case N.OK:return V(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return V(15467,{code:n})}}function qD(n){if(n===void 0)return cn("GRPC error has no .code"),N.UNKNOWN;switch(n){case ye.OK:return N.OK;case ye.CANCELLED:return N.CANCELLED;case ye.UNKNOWN:return N.UNKNOWN;case ye.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ye.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ye.INTERNAL:return N.INTERNAL;case ye.UNAVAILABLE:return N.UNAVAILABLE;case ye.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ye.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ye.NOT_FOUND:return N.NOT_FOUND;case ye.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ye.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ye.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ye.ABORTED:return N.ABORTED;case ye.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ye.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ye.DATA_LOSS:return N.DATA_LOSS;default:return V(39323,{code:n})}}(X=ye||(ye={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var Mw=null;var xk=new rn([4294967295,4294967295],0);function Pw(n){let e=tD().encode(n),t=new Of;return t.update(e),new Uint8Array(t.digest())}function kw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new rn([t,r],0),new rn([i,o],0)]}var Ep=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Nr(`Invalid padding: ${t}`);if(r<0)throw new Nr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Nr(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=rn.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(rn.fromNumber(r)));return i.compare(xk)===1&&(i=new rn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Pw(e),[r,i]=kw(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let t=Pw(e),[r,i]=kw(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Nr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var su=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ns.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(H.min(),i,new ge(W),hn(),Z())}},Ns=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Z(),Z(),Z())}};var xi=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},au=class{constructor(e,t){this.targetId=e,this.De=t}},cu=class{constructor(e,t,r=Be.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},uu=class{constructor(){this.ve=0,this.Ce=xw(),this.Fe=Be.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Z(),t=Z(),r=Z();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:V(38017,{changeType:o})}}),new Ns(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=xw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ie(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Ip=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=hn(),this.je=Wc(),this.Je=Wc(),this.He=new ge(W)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:V(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(hp(o))if(r===0){let s=new L(o.path);this.Xe(t,s,bt.newNoDocument(s,H.min()))}else ie(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}Mw?.ct((function(f,g,m,_,S){var P,R,F,B,z,ae;let Ue={localCacheCount:f,existenceFilterCount:g.count,databaseId:m.database,projectId:m.projectId},oe=g.unchangedNames;return oe&&(Ue.bloomFilter={applied:S===0,hashCount:(P=oe?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(B=(F=(R=oe?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&B!==void 0?B:0,padding:(ae=(z=oe?.bits)===null||z===void 0?void 0:z.padding)!==null&&ae!==void 0?ae:0,mightContain:w=>{var y;return(y=_?.mightContain(w))!==null&&y!==void 0&&y}}),Ue})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=ln(r).toUint8Array()}catch(u){if(u instanceof nu)return xn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ep(s,i,o)}catch(u){return xn(u instanceof Nr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&hp(c.target)){let u=new L(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,bt.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Z();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new su(e,t,this.He,this.ze,r);return this.ze=hn(),this.je=Wc(),this.Je=Wc(),this.He=new ge(W),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new uu,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ce(W),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ce(W),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||x("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new uu),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Wc(){return new ge(L.comparator)}function xw(){return new ge(L.comparator)}var Ok={asc:"ASCENDING",desc:"DESCENDING"},Fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lk={and:"AND",or:"OR"},wp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Dp(n,e){return n.useProto3Json||Mu(e)?e:{value:e}}function lu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Vk(n,e){return lu(n,e.toTimestamp())}function Bt(n){return ie(!!n,49232),H.fromTimestamp((function(t){let r=un(t);return new Ee(r.seconds,r.nanos)})(n))}function jg(n,e){return Tp(n,e).canonicalString()}function Tp(n,e){let t=(function(i){return new fe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GD(n){let e=fe.fromString(n);return ie(ZD(e),10190,{key:e.toString()}),e}function Cp(n,e){return jg(n.databaseId,e.path)}function Uf(n,e){let t=GD(e);if(t.get(1)!==n.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new L(KD(t))}function WD(n,e){return jg(n.databaseId,e)}function jk(n){let e=GD(n);return e.length===4?fe.emptyPath():KD(e)}function bp(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KD(n){return ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ow(n,e,t){return{name:Cp(n,e),fields:t.value.mapValue.fields}}function Bk(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:V(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(d,f){return d.useProto3Json?(ie(f===void 0||typeof f=="string",58123),Be.fromBase64String(f||"")):(ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Be.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(d){let f=d.code===void 0?N.UNKNOWN:qD(d.code);return new O(f,d.message||"")})(s);t=new cu(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Uf(n,r.document.name),o=Bt(r.document.updateTime),s=r.document.createTime?Bt(r.document.createTime):H.min(),c=new ot({mapValue:{fields:r.document.fields}}),u=bt.newFoundDocument(i,o,s,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new xi(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Uf(n,r.document),o=r.readTime?Bt(r.readTime):H.min(),s=bt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new xi([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Uf(n,r.document),o=r.removedTargetIds||[];t=new xi([],o,i,null)}else{if(!("filter"in e))return V(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new _p(i,o),c=r.targetId;t=new au(c,s)}}return t}function Uk(n,e){let t;if(e instanceof Fr)t={update:Ow(n,e.key,e.value)};else if(e instanceof Ss)t={delete:Cp(n,e.key)};else if(e instanceof Ht)t={update:Ow(n,e.key,e.data),updateMask:Yk(e.fieldMask)};else{if(!(e instanceof gp))return V(16599,{Rt:e.type});t={verify:Cp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof zi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Or)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Gi)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw V(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Vk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:V(27497)})(n,e.precondition)),t}function $k(n,e){return n&&n.length>0?(ie(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Bt(i.updateTime):Bt(o);return s.isEqual(H.min())&&(s=Bt(o)),new pp(s,i.transformResults||[])})(t,e))):[]}function Hk(n,e){return{documents:[WD(n,e.path)]}}function qk(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=WD(n,i);let o=(function(d){if(d.length!==0)return YD($t.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(d){if(d.length!==0)return d.map(f=>(function(m){return{field:Mi(m.field),direction:Wk(m.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Dp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:t,parent:i}}function zk(n){let e=jk(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ie(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(g){let m=QD(g);return m instanceof $t&&SD(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(g){return g.map(m=>(function(S){return new $i(Pi(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let m;return m=typeof g=="object"?g.value:g,Mu(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(g){let m=!!g.before,_=g.values||[];return new Ui(_,m)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let m=!g.before,_=g.values||[];return new Ui(_,m)})(t.endAt)),yk(e,i,s,o,c,"F",u,d)}function Gk(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return V(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QD(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Pi(t.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Pi(t.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Pi(t.unaryFilter.field);return Ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Pi(t.unaryFilter.field);return Ie.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return V(61313);default:return V(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ie.create(Pi(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return V(58110);default:return V(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return $t.create(t.compositeFilter.filters.map(r=>QD(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return V(1026)}})(t.compositeFilter.op))})(n):V(30097,{filter:n})}function Wk(n){return Ok[n]}function Kk(n){return Fk[n]}function Qk(n){return Lk[n]}function Mi(n){return{fieldPath:n.canonicalString()}}function Pi(n){return st.fromServerFormat(n.fieldPath)}function YD(n){return n instanceof Ie?(function(t){if(t.op==="=="){if(ww(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NAN"}};if(Iw(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ww(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NOT_NAN"}};if(Iw(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mi(t.field),op:Kk(t.op),value:t.value}}})(n):n instanceof $t?(function(t){let r=t.getFilters().map(i=>YD(i));return r.length===1?r[0]:{compositeFilter:{op:Qk(t.op),filters:r}}})(n):V(54877,{filter:n})}function Yk(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZD(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Rs=class n{constructor(e,t,r,i,o=H.min(),s=H.min(),c=Be.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ap=class{constructor(e){this.gt=e}};function Zk(n){let e=zk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fp(e,e.limit,"L"):e}var du=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(he(e.integerValue));else if("doubleValue"in e){let r=he(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Cs(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=un(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ln(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?CD(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):TD(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):V(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Vi,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(he(c)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),L.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};du.Ut=new du;var Sp=class{constructor(){this.Dn=new Np}addToCollectionParentIndex(e,t){return this.Dn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(kr.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(kr.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Np=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ce(fe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(fe.comparator)).toArray()}};var Jz=new Uint8Array(0);var Fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JD=41943040,ht=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(JD,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);var Ms=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Lw="LruGarbageCollector",Jk=1048576;function Vw([n,e],[t,r]){let i=W(n,t);return i===0?W(e,r):i}var Rp=class{constructor(e){this.Tr=e,this.buffer=new Ce(Vw),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Vw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Mp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){x(Lw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xi(t)?x(Lw,"Ignoring IndexedDB error during garbage collection: ",t):yield Ji(t)}yield this.Rr(3e5)}))}},Pp=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Ng.ue);let r=new Rp(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Fw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fw):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,c,u,d,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ni()<=Q.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function Xk(n,e){return new Pp(n,e)}var kp=class{constructor(){this.changes=new dn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Op=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ws(r.mutation,i,ft.empty(),Ee.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Z()){let i=Sr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=vs();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Sr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Z()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=hn(),s=Is(),c=(function(){return Is()})();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Ht)?o=o.insert(d.key,d):f!==void 0?(s.set(d.key,f.mutation.getFieldMask()),ws(f.mutation,d,f.mutation.getFieldMask(),Ee.now())):s.set(d.key,ft.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>s.set(d,f)),t.forEach((d,f)=>{var g;return c.set(d,new xp(f,(g=s.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Is(),i=new ge((s,c)=>s-c),o=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||ft.empty();f=c.applyToLocalView(d,f),r.set(u,f);let g=(i.get(c.batchId)||Z()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,g=FD();f.forEach(m=>{if(!o.has(m)){let _=$D(t.get(m),r.get(m));_!==null&&g.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return L.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Sr()),c=Ts,u=o;return s.next(d=>M.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,Z())).next(f=>({batchId:c,changes:OD(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new L(t)).next(r=>{let i=vs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=vs();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let d=(function(g,m){return new Hi(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,m)=>{s=s.insert(g,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,d)=>{let f=d.getKey();s.get(f)===null&&(s=s.insert(f,bt.newInvalidDocument(f)))});let c=vs();return s.forEach((u,d)=>{let f=o.get(u);f!==void 0&&ws(f.mutation,d,ft.empty(),Ee.now()),xu(t,d)&&(c=c.insert(u,d))}),c})}};var Fp=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return M.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Bt(i.createTime)}})(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:Zk(i.bundledQuery),readTime:Bt(i.readTime)}})(t)),M.resolve()}};var Lp=class{constructor(){this.overlays=new ge(L.comparator),this.kr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Sr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Sr(),o=t.length+1,s=new L(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ge((d,f)=>d-f),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=o.get(d.largestBatchId);f===null&&(f=Sr(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Sr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return M.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new vp(t,r));let o=this.kr.get(t);o===void 0&&(o=Z(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Vp=class{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Ps=class{constructor(){this.qr=new Ce(ve.Qr),this.$r=new Ce(ve.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new ve(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ve(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new L(new fe([])),r=new ve(t,e),i=new ve(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new L(new fe([])),r=new ve(t,e),i=new ve(t,e+1),o=Z();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ve(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ve=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return L.comparator(e.key,t.key)||W(e.Hr,t.Hr)}static Ur(e,t){return W(e.Hr,t.Hr)||L.comparator(e.key,t.key)}};var jp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ce(ve.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new mp(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new ve(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Rg:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ve(t,0),i=new ve(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(W);return t.forEach(i=>{let o=new ve(i,0),s=new ve(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;L.isDocumentKey(o)||(o=o.child(""));let s=new ve(new L(o),0),c=new Ce(W);return this.Yr.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Hr)),!0)},s),M.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ie(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(t.mutations,i=>{let o=new ve(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new ve(t,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Bp=class{constructor(e){this.ni=e,this.docs=(function(){return new ge(L.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let r=hn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():bt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=hn(),s=t.path,c=new L(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||JP(ZP(f),r)<=0||(i.has(f.key)||xu(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){V(9500)}ri(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Up(this)}getSize(e){return M.resolve(this.size)}},Up=class extends kp{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var $p=class{constructor(e){this.persistence=e,this.ii=new dn(t=>Og(t),Fg),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.si=0,this.oi=new Ps,this.targetCount=0,this._i=Ms.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),M.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Ms(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.hr(t),M.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.oi.containsKey(t))}};var hu=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ng(0),this.ci=!1,this.ci=!0,this.li=new Vp,this.referenceDelegate=e(this),this.hi=new $p(this),this.indexManager=new Sp,this.remoteDocumentCache=(function(i){return new Bp(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Ap(t),this.Ti=new Fp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new jp(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);let i=new Hp(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Hp=class extends Xf{constructor(e){super(),this.currentSequenceNumber=e}},qp=class n{constructor(e){this.persistence=e,this.Ai=new Ps,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw V(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=L.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,H.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return M.or([()=>M.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},fu=class n{constructor(e,t){this.persistence=e,this.gi=new dn(r=>nk(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Xk(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,H.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qc(e.data.value)),t}Sr(e,t,r){return M.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var zp=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Z(),i=Z();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Gp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Wp=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return hI()?8:ek(it())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Gp;return this.ws(e,t,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,s,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ni()<=Q.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Ri(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(Ni()<=Q.DEBUG&&x("QueryEngine","Query:",Ri(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ni()<=Q.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Ri(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jt(t))):M.resolve())}ps(e,t){if(bw(t))return M.resolve(null);let r=jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=fp(t,null,"F"),r=jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Z(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.bs(t,c);return this.Ds(t,d,s,u.readTime)?this.ps(e,fp(t,null,"F")):this.vs(e,d,t,u)}))})))}ys(e,t,r,i){return bw(t)||i.isEqual(H.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?M.resolve(null):(Ni()<=Q.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ri(t)),this.vs(e,s,t,YP(i,Ts)).next(c=>c))})}bs(e,t){let r=new Ce(kD(e));return t.forEach((i,o)=>{xu(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ni()<=Q.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Ri(t)),this.gs.getDocumentsMatchingQuery(e,t,kr.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Bg="LocalStore",ex=3e8,Kp=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new ge(W),this.Ms=new dn(o=>Og(o),Fg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Op(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function tx(n,e,t,r){return new Kp(n,e,t,r)}function XD(n,e){return b(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=Z();for(let d of i){s.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of o){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:s,addedBatchIds:c}))})})})}function nx(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,f){let g=d.batch,m=g.keys(),_=M.resolve();return m.forEach(S=>{_=_.next(()=>f.getEntry(u,S)).next(P=>{let R=d.docVersions.get(S);ie(R!==null,48541),P.version.compareTo(R)<0&&(g.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,g))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=Z();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eT(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function rx(n,e){let t=U(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((f,g)=>{let m=i.get(g);if(!m)return;c.push(t.hi.removeMatchingKeys(o,f.removedDocuments,g).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,g)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(Be.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(g,_),(function(P,R,F){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=ex?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(m,_,f)&&c.push(t.hi.updateTargetData(o,_))});let u=hn(),d=Z();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(ix(o,s,e.documentUpdates).next(f=>{u=f.Ls,d=f.ks})),!r.isEqual(H.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(g=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(t.Fs=i,o))}function ix(n,e,t){let r=Z(),i=Z();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=hn();return t.forEach((c,u)=>{let d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(H.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):x(Bg,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function ox(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Rg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sx(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Rs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Qp(n,e,t){return b(this,null,function*(){let r=U(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xi(s))throw s;x(Bg,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function jw(n,e,t){let r=U(n),i=H.min(),o=Z();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,d,f){let g=U(u),m=g.Ms.get(f);return m!==void 0?M.resolve(g.Fs.get(m)):g.hi.getTargetData(d,f)})(r,s,jt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:H.min(),t?o:Z())).next(c=>(ax(r,Ek(e),c),{documents:c,qs:o})))}function ax(n,e,t){let r=n.xs.get(e)||H.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var pu=class{constructor(){this.activeTargetIds=bk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Yp=class{constructor(){this.Fo=new pu,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new pu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Zp=class{xo(e){}shutdown(){}};var Bw="ConnectivityMonitor",gu=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){x(Bw,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){x(Bw,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Kc=null;function Jp(){return Kc===null?Kc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kc++,"0x"+Kc.toString(16)}var $f="RestConnection",cx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Xp=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ru?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Jp(),c=this.Go(e,t.toUriEncodedString());x($f,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:d}=new URL(c),f=vr(d);return this.jo(e,c,u,r,f).then(g=>(x($f,`Received RPC '${e}' ${s}: `,g),g),g=>{throw xn($f,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zi})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=cx[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var eg=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ve="WebChannelConnection",tg=class extends Xp{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Jp();return new Promise((c,u)=>{let d=new Ff;d.setWithCredentials(!0),d.listenOnce(Lf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ys.NO_ERROR:let g=d.getResponseJson();x(Ve,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case ys.TIMEOUT:x(Ve,`RPC '${e}' ${s} timed out`),u(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case ys.HTTP_ERROR:let m=d.getStatus();if(x(Ve,`RPC '${e}' ${s} failed with status:`,m,"response text:",d.getResponseText()),m>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);let S=_?.error;if(S&&S.status&&S.message){let P=(function(F){let B=F.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(B)>=0?B:N.UNKNOWN})(S.status);u(new O(P,S.message))}else u(new O(N.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new O(N.UNAVAILABLE,"Connection failed."));break;default:V(9055,{c_:e,streamId:s,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{x(Ve,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);x(Ve,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",f,r,15)})}P_(e,t,r){let i=Jp(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Bf(),c=jf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");x(Ve,`Creating RPC '${e}' stream ${i}: ${f}`,u);let g=s.createWebChannel(f,u);this.T_(g);let m=!1,_=!1,S=new eg({Ho:R=>{_?x(Ve,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(x(Ve,`Opening RPC '${e}' stream ${i} transport.`),g.open(),m=!0),x(Ve,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},Yo:()=>g.close()}),P=(R,F,B)=>{R.listen(F,z=>{try{B(z)}catch(ae){setTimeout(()=>{throw ae},0)}})};return P(g,Si.EventType.OPEN,()=>{_||(x(Ve,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),P(g,Si.EventType.CLOSE,()=>{_||(_=!0,x(Ve,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(g))}),P(g,Si.EventType.ERROR,R=>{_||(_=!0,xn(Ve,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.__(new O(N.UNAVAILABLE,"The operation could not be completed")))}),P(g,Si.EventType.MESSAGE,R=>{var F;if(!_){let B=R.data[0];ie(!!B,16349);let z=B,ae=z?.error||((F=z[0])===null||F===void 0?void 0:F.error);if(ae){x(Ve,`RPC '${e}' stream ${i} received error:`,ae);let Ue=ae.status,oe=(function(E){let I=ye[E];if(I!==void 0)return qD(I)})(Ue),w=ae.message;oe===void 0&&(oe=N.INTERNAL,w="Unknown error status: "+Ue+" with message "+ae.message),_=!0,S.__(new O(oe,w)),g.close()}else x(Ve,`RPC '${e}' stream ${i} received:`,B),S.a_(B)}}),P(c,Vf.STAT_EVENT,R=>{R.stat===zc.PROXY?x(Ve,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===zc.NOPROXY&&x(Ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function Hf(){return typeof document<"u"?document:null}function Ou(n){return new wp(n,!0)}var mu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Uw="PersistentStream",yu=class{constructor(e,t,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new mu(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return b(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return b(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return b(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(cn(t.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>b(this,null,function*(){this.state=0,this.start()}))}G_(e){return x(Uw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(x(Uw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ng=class extends yu{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Bk(this.serializer,e),r=(function(o){if(!("targetChange"in o))return H.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?Bt(s.readTime):H.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=bp(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=hp(u)?{documents:Hk(o,u)}:{query:qk(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=zD(o,s.resumeToken);let d=Dp(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(H.min())>0){c.readTime=lu(o,s.snapshotVersion.toTimestamp());let d=Dp(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);let r=Gk(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=bp(this.serializer),t.removeTarget=e,this.k_(t)}},rg=class extends yu{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=$k(e.writeResults,e.commitTime),r=Bt(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=bp(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Uk(this.serializer,r))};this.k_(t)}};var ig=class{},og=class extends ig{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Tp(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,Tp(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},sg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(cn(t),this._a=!1):x("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Lr="RemoteStore",ag=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>b(this,null,function*(){Vr(this)&&(x(Lr,"Restarting streams for network reachability change."),yield(function(u){return b(this,null,function*(){let d=U(u);d.Ia.add(4),yield Os(d),d.Aa.set("Unknown"),d.Ia.delete(4),yield Fu(d)})})(this))}))}),this.Aa=new sg(r,i)}};function Fu(n){return b(this,null,function*(){if(Vr(n))for(let e of n.da)yield e(!0)})}function Os(n){return b(this,null,function*(){for(let e of n.da)yield e(!1)})}function tT(n,e){let t=U(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),qg(t)?Hg(t):eo(t).x_()&&$g(t,e))}function Ug(n,e){let t=U(n),r=eo(t);t.Ta.delete(e),r.x_()&&nT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Vr(t)&&t.Aa.set("Unknown"))}function $g(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}eo(n).H_(e)}function nT(n,e){n.Ra.$e(e),eo(n).Y_(e)}function Hg(n){n.Ra=new Ip({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),eo(n).start(),n.Aa.aa()}function qg(n){return Vr(n)&&!eo(n).M_()&&n.Ta.size>0}function Vr(n){return U(n).Ia.size===0}function rT(n){n.Ra=void 0}function ux(n){return b(this,null,function*(){n.Aa.set("Online")})}function lx(n){return b(this,null,function*(){n.Ta.forEach((e,t)=>{$g(n,e)})})}function dx(n,e){return b(this,null,function*(){rT(n),qg(n)?(n.Aa.la(e),Hg(n)):n.Aa.set("Unknown")})}function hx(n,e,t){return b(this,null,function*(){if(n.Aa.set("Online"),e instanceof cu&&e.state===2&&e.cause)try{yield(function(i,o){return b(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})})(n,e)}catch(r){x(Lr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vu(n,r)}else if(e instanceof xi?n.Ra.Ye(e):e instanceof au?n.Ra.it(e):n.Ra.et(e),!t.isEqual(H.min()))try{let r=yield eT(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ta.get(d);f&&o.Ta.set(d,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,d)=>{let f=o.Ta.get(u);if(!f)return;o.Ta.set(u,f.withResumeToken(Be.EMPTY_BYTE_STRING,f.snapshotVersion)),nT(o,u);let g=new Rs(f.target,u,d,f.sequenceNumber);$g(o,g)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){x(Lr,"Failed to raise snapshot:",r),yield vu(n,r)}})}function vu(n,e,t){return b(this,null,function*(){if(!Xi(e))throw e;n.Ia.add(1),yield Os(n),n.Aa.set("Offline"),t||(t=()=>eT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){x(Lr,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Fu(n)}))})}function iT(n,e){return e().catch(t=>vu(n,t,e))}function Lu(n){return b(this,null,function*(){let e=U(n),t=Fn(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Rg;for(;fx(e);)try{let i=yield ox(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,px(e,i)}catch(i){yield vu(e,i)}oT(e)&&sT(e)})}function fx(n){return Vr(n)&&n.Pa.length<10}function px(n,e){n.Pa.push(e);let t=Fn(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function oT(n){return Vr(n)&&!Fn(n).M_()&&n.Pa.length>0}function sT(n){Fn(n).start()}function gx(n){return b(this,null,function*(){Fn(n).na()})}function mx(n){return b(this,null,function*(){let e=Fn(n);for(let t of n.Pa)e.X_(t.mutations)})}function yx(n,e,t){return b(this,null,function*(){let r=n.Pa.shift(),i=yp.from(r,e,t);yield iT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lu(n)})}function vx(n,e){return b(this,null,function*(){e&&Fn(n).Z_&&(yield(function(r,i){return b(this,null,function*(){if((function(s){return kk(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();Fn(r).N_(),yield iT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Lu(r)}})})(n,e)),oT(n)&&sT(n)})}function $w(n,e){return b(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),x(Lr,"RemoteStore received new credentials");let r=Vr(t);t.Ia.add(3),yield Os(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Fu(t)})}function _x(n,e){return b(this,null,function*(){let t=U(n);e?(t.Ia.delete(2),yield Fu(t)):e||(t.Ia.add(2),yield Os(t),t.Aa.set("Unknown"))})}function eo(n){return n.Va||(n.Va=(function(t,r,i){let o=U(t);return o.ia(),new ng(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:ux.bind(null,n),e_:lx.bind(null,n),n_:dx.bind(null,n),J_:hx.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.Va.N_(),qg(n)?Hg(n):n.Aa.set("Unknown")):(yield n.Va.stop(),rT(n))}))),n.Va}function Fn(n){return n.ma||(n.ma=(function(t,r,i){let o=U(t);return o.ia(),new rg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:gx.bind(null,n),n_:vx.bind(null,n),ea:mx.bind(null,n),ta:yx.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.ma.N_(),yield Lu(n)):(yield n.ma.stop(),n.Pa.length>0&&(x(Lr,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var cg=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zg(n,e){if(cn("AsyncQueue",`${e}: ${n}`),Xi(n))return new O(N.UNAVAILABLE,`${e}: ${n}`);throw n}var _u=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||L.comparator(t.key,r.key):(t,r)=>L.comparator(t.key,r.key),this.keyedMap=vs(),this.sortedSet=new ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Eu=class{constructor(){this.fa=new ge(L.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):V(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ki=class n{constructor(e,t,r,i,o,s,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,_u.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ug=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},lg=class{constructor(){this.queries=Hw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=Hw(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new O(N.ABORTED,"Firestore shutting down"))}};function Hw(){return new dn(n=>PD(n),ku)}function Ex(n,e){return b(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new ug,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=zg(s,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Gg(t)})}function Ix(n,e){return b(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function wx(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&Gg(t)}function Dx(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function Gg(n){n.Da.forEach(e=>{e.next()})}var dg,qw;(qw=dg||(dg={})).Fa="default",qw.Cache="cache";var hg=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==dg.Cache}};var Iu=class{constructor(e){this.key=e}},wu=class{constructor(e){this.key=e}},fg=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Z(),this.mutatedKeys=Z(),this.Xa=kD(e),this.eu=new _u(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Eu,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let m=i.get(f),_=xu(this.query,g)?g:null,S=!!m&&this.mutatedKeys.has(m.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;m&&_?m.data.isEqual(_.data)?S!==P&&(r.track({type:3,doc:_}),R=!0):this.iu(m,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Xa(_,u)>0||d&&this.Xa(_,d)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),R=!0):m&&!_&&(r.track({type:1,doc:m}),R=!0,(u||d)&&(c=!0)),R&&(_?(s=s.add(_),o=P?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,g)=>(function(_,S){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V(20277,{At:R})}};return P(_)-P(S)})(f.type,g.type)||this.Xa(f.doc,g.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,d=u!==this.Ya;return this.Ya=u,s.length!==0||d?{snapshot:new Ki(this.query,e.eu,o,s,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Eu,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Z(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new wu(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Iu(r))}),t}uu(e){this.Ha=e.qs,this.Za=Z();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ki.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Wg="SyncEngine",pg=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},gg=class{constructor(e){this.key=e,this.lu=!1}},mg=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new dn(c=>PD(c),ku),this.Tu=new Map,this.Iu=new Set,this.du=new ge(L.comparator),this.Eu=new Map,this.Au=new Ps,this.Ru={},this.Vu=new Map,this.mu=Ms.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Tx(n,e,t=!0){return b(this,null,function*(){let r=hT(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield aT(r,e,t,!0),i})}function Cx(n,e){return b(this,null,function*(){let t=hT(n);yield aT(t,e,!0,!1)})}function aT(n,e,t,r){return b(this,null,function*(){let i=yield sx(n.localStore,jt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield bx(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&tT(n.remoteStore,i),c})}function bx(n,e,t,r,i){return b(this,null,function*(){n.gu=(g,m,_)=>(function(P,R,F,B){return b(this,null,function*(){let z=R.view.nu(F);z.Ds&&(z=yield jw(P.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,z)));let ae=B&&B.targetChanges.get(R.targetId),Ue=B&&B.targetMismatches.get(R.targetId)!=null,oe=R.view.applyChanges(z,P.isPrimaryClient,ae,Ue);return Gw(P,R.targetId,oe._u),oe.snapshot})})(n,g,m,_);let o=yield jw(n.localStore,e,!0),s=new fg(e,o.qs),c=s.nu(o.documents),u=Ns.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,u);Gw(n,t,d._u);let f=new pg(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),d.snapshot})}function Ax(n,e,t){return b(this,null,function*(){let r=U(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!ku(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ug(r.remoteStore,i.targetId),yg(r,i.targetId)}).catch(Ji))):(yg(r,i.targetId),yield Qp(r.localStore,i.targetId,!0))})}function Sx(n,e){return b(this,null,function*(){let t=U(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ug(t.remoteStore,r.targetId))})}function Nx(n,e,t){return b(this,null,function*(){let r=Fx(n);try{let i=yield(function(s,c){let u=U(s),d=Ee.now(),f=c.reduce((_,S)=>_.add(S.key),Z()),g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=hn(),P=Z();return u.Os.getEntries(_,f).next(R=>{S=R,S.forEach((F,B)=>{B.isValidDocument()||(P=P.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,S)).next(R=>{g=R;let F=[];for(let B of c){let z=Pk(B,g.get(B.key).overlayedDocument);z!=null&&F.push(new Ht(B.key,z,bD(z.value.mapValue),an.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,F,c)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(g,P);return u.documentOverlayCache.saveOverlays(_,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:OD(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let d=s.Ru[s.currentUser.toKey()];d||(d=new ge(W)),d=d.insert(c,u),s.Ru[s.currentUser.toKey()]=d})(r,i.batchId,t),yield Fs(r,i.changes),yield Lu(r.remoteStore)}catch(i){let o=zg(i,"Failed to persist write");t.reject(o)}})}function cT(n,e){return b(this,null,function*(){let t=U(n);try{let r=yield rx(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ie(s.lu,14607):i.removedDocuments.size>0&&(ie(s.lu,42227),s.lu=!1))}),yield Fs(t,r,e)}catch(r){yield Ji(r)}})}function zw(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=U(s);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(let m of g.wa)m.va(c)&&(d=!0)}),d&&Gg(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rx(n,e,t){return b(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ge(L.comparator);s=s.insert(o,bt.newNoDocument(o,H.min()));let c=Z().add(o),u=new su(H.min(),new Map,new ge(W),s,c);yield cT(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Kg(r)}else yield Qp(r.localStore,e,!1).then(()=>yg(r,e,t)).catch(Ji)})}function Mx(n,e){return b(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield nx(t.localStore,e);lT(t,r,null),uT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fs(t,i)}catch(i){yield Ji(i)}})}function Px(n,e,t){return b(this,null,function*(){let r=U(n);try{let i=yield(function(s,c){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(ie(g!==null,37113),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})})(r.localStore,e);lT(r,e,t),uT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fs(r,i)}catch(i){yield Ji(i)}})}function uT(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function lT(n,e,t){let r=U(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function yg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||dT(n,r)})}function dT(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ug(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Kg(n))}function Gw(n,e,t){for(let r of t)r instanceof Iu?(n.Au.addReference(r.key,e),kx(n,r)):r instanceof wu?(x(Wg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||dT(n,r.key)):V(19791,{yu:r})}function kx(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(x(Wg,"New document in limbo: "+t),n.Iu.add(r),Kg(n))}function Kg(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new L(fe.fromString(e)),r=n.mu.next();n.Eu.set(r,new gg(t)),n.du=n.du.insert(t,r),tT(n.remoteStore,new Rs(jt(Lg(t.path)),r,"TargetPurposeLimboResolution",Ng.ue))}}function Fs(n,e,t){return b(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);let g=zp.Es(u.targetId,d);o.push(g)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,d){return b(this,null,function*(){let f=U(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>M.forEach(d,m=>M.forEach(m.Is,_=>f.persistence.referenceDelegate.addReference(g,m.targetId,_)).next(()=>M.forEach(m.ds,_=>f.persistence.referenceDelegate.removeReference(g,m.targetId,_)))))}catch(g){if(!Xi(g))throw g;x(Bg,"Failed to update sequence numbers: "+g)}for(let g of d){let m=g.targetId;if(!g.fromCache){let _=f.Fs.get(m),S=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(S);f.Fs=f.Fs.insert(m,P)}}})})(r.localStore,o))})}function xx(n,e){return b(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){x(Wg,"User change. New user:",e.toKey());let r=yield XD(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new O(N.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fs(t,r.Bs)}})}function Ox(n,e){let t=U(n),r=t.Eu.get(e);if(r&&r.lu)return Z().add(r.key);{let i=Z(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let c=t.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function hT(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ox.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rx.bind(null,e),e.hu.J_=wx.bind(null,e.eventManager),e.hu.pu=Dx.bind(null,e.eventManager),e}function Fx(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Px.bind(null,e),e}var fT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=Ou(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return tx(this.persistence,new Wp,t.initialUser,this.serializer)}Du(t){return new hu(qp.Vi,this.serializer)}bu(t){return new Yp}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),vg=class extends fT{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ie(this.persistence.referenceDelegate instanceof fu,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Mp(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?ht.withCacheSize(this.cacheSizeBytes):ht.DEFAULT;return new hu(r=>fu.Vi(r,t),this.serializer)}};var Lx=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xx.bind(null,this.syncEngine),yield _x(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new lg})()}createDatastore(t){let r=Ou(t.databaseInfo.databaseId),i=(function(s){return new tg(s)})(t.databaseInfo);return(function(s,c,u,d){return new og(s,c,u,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new ag(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>zw(this.syncEngine,r,0),(function(){return gu.C()?new gu:new Zp})())}createSyncEngine(t,r){return(function(o,s,c,u,d,f,g){let m=new mg(o,s,c,u,d,f);return g&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield(function(o){return b(this,null,function*(){let s=U(o);x(Lr,"RemoteStore shutting down."),s.Ia.add(5),yield Os(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var _g=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):cn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ln="FirestoreClient",Eg=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Te.UNAUTHENTICATED,this.clientId=Ds.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>b(this,null,function*(){x(Ln,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(x(Ln,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=zg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function qf(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),x(Ln,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield XD(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{xn("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{x("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{xn("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Ww(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Vx(n);x(Ln,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$w(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$w(e.remoteStore,i)),n._onlineComponents=e})}function Vx(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x(Ln,"Using user provided OfflineComponentProvider");try{yield qf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xn("Error using user provided cache. Falling back to memory cache: "+t),yield qf(n,new fT)}}else x(Ln,"Using default OfflineComponentProvider"),yield qf(n,new vg(void 0));return n._offlineComponents})}function pT(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(x(Ln,"Using user provided OnlineComponentProvider"),yield Ww(n,n._uninitializedComponentsProvider._online)):(x(Ln,"Using default OnlineComponentProvider"),yield Ww(n,new Lx))),n._onlineComponents})}function jx(n){return pT(n).then(e=>e.syncEngine)}function Kw(n){return b(this,null,function*(){let e=yield pT(n),t=e.eventManager;return t.onListen=Tx.bind(null,e.syncEngine),t.onUnlisten=Ax.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Cx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Sx.bind(null,e.syncEngine),t})}function gT(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Qw=new Map;var mT="firestore.googleapis.com",Yw=!0,Du=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mT,this.ssl=Yw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jk)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Du({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Du(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zf;switch(r.type){case"firstParty":return new Qf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Qw.get(t);r&&(x("ComponentProvider","Removing Datastore"),Qw.delete(t),r.terminate())})(this),Promise.resolve()}};function yT(n,e,t,r={}){var i;n=Nn(n,Qi);let o=vr(e),s=n._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Qh(`https://${u}`),Yh("Firestore",!0)),s.host!==mT&&s.host!==u&&xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!_r(d,c)&&(n._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=Te.MOCK_USER;else{f=aI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Te(m)}n._authCredentials=new Gf(new Jc(f,g))}}var Tu=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},je=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xs(t,n._jsonSchema))return new n(e,r||null,new L(fe.fromString(t.referencePath)))}};je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:_e("string",je._jsonSchemaVersion),referencePath:_e("string")};var Rn=class n extends Tu{constructor(e,t,r){super(e,t,Lg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new L(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function vT(n,e,...t){if(n=Le(n),nD("collection","path",e),n instanceof Qi){let r=fe.fromString(e,...t);return pw(r),new Rn(n,null,r)}{if(!(n instanceof je||n instanceof Rn))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(fe.fromString(e,...t));return pw(r),new Rn(n.firestore,null,r)}}function Qg(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Ds.newId()),nD("doc","path",e),n instanceof Qi){let r=fe.fromString(e,...t);return fw(r),new je(n,null,new L(r))}{if(!(n instanceof je||n instanceof Rn))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(fe.fromString(e,...t));return fw(r),new je(n.firestore,n instanceof Rn?n.converter:null,new L(r))}}var Zw="AsyncQueue",Cu=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new mu(this,"async_queue_retry"),this.oc=()=>{let r=Hf();r&&x(Zw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new sn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return b(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Xi(e))throw e;x(Zw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,cn("INTERNAL UNHANDLED ERROR: ",Jw(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=cg.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&V(47125,{hc:Jw(this.tc)})}verifyOperationInProgress(){}Pc(){return b(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Jw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Xw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Vn=class extends Qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Cu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cu(e),this._firestoreClient=void 0,yield e}})}};function _T(n,e){let t=typeof n=="object"?n:Ci(),r=typeof n=="string"?n:e||ru,i=bc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=oI("firestore");o&&yT(i,...o)}return i}function ET(n){if(n._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Bx(n),n._firestoreClient}function Bx(n){var e,t,r;let i=n._freezeSettings(),o=(function(c,u,d,f){return new ep(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,gT(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Eg(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(n._componentsProvider))}var Mn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Be.fromBase64String(e))}catch(t){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xs(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:_e("string",Mn._jsonSchemaVersion),bytes:_e("string")};var Yi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ks=class{constructor(e){this._methodName=e}};var Pn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(xs(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Pn._jsonSchemaVersion="firestore/geoPoint/1.0",Pn._jsonSchema={type:_e("string",Pn._jsonSchemaVersion),latitude:_e("number"),longitude:_e("number")};var kn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xs(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};kn._jsonSchemaVersion="firestore/vectorValue/1.0",kn._jsonSchema={type:_e("string",kn._jsonSchemaVersion),vectorValues:_e("object")};var Ux=/^__.*__$/,Ig=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ht(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fr(e,this.data,t,this.fieldTransforms)}},bu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ht(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function IT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V(40011,{Ec:n})}}var wg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Su(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(IT(this.Ec)&&Ux.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Dg=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ou(e)}Dc(e,t,r,i=!1){return new wg({Ec:e,methodName:t,bc:r,path:st.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wT(n){let e=n._freezeSettings(),t=Ou(n._databaseId);return new Dg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $x(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);Yg("Data must be an object, but it was:",s,r);let c=DT(r,s),u,d;if(o.merge)u=new ft(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let g of o.mergeFields){let m=Tg(e,g,t);if(!s.contains(m))throw new O(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);CT(f,m)||f.push(m)}u=new ft(f),d=s.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=s.fieldTransforms;return new Ig(new ot(c),u,d)}var Au=class n extends ks{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Hx(n,e,t,r){let i=n.Dc(1,e,t);Yg("Data must be an object, but it was:",i,r);let o=[],s=ot.empty();jn(r,(u,d)=>{let f=Zg(e,u,t);d=Le(d);let g=i.gc(f);if(d instanceof Au)o.push(f);else{let m=Vu(d,g);m!=null&&(o.push(f),s.set(f,m))}});let c=new ft(o);return new bu(s,c,i.fieldTransforms)}function qx(n,e,t,r,i,o){let s=n.Dc(1,e,t),c=[Tg(e,r,t)],u=[i];if(o.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(Tg(e,o[m])),u.push(o[m+1]);let d=[],f=ot.empty();for(let m=c.length-1;m>=0;--m)if(!CT(d,c[m])){let _=c[m],S=u[m];S=Le(S);let P=s.gc(_);if(S instanceof Au)d.push(_);else{let R=Vu(S,P);R!=null&&(d.push(_),f.set(_,R))}}let g=new ft(d);return new bu(f,g,s.fieldTransforms)}function Vu(n,e){if(TT(n=Le(n)))return Yg("Unsupported field value:",e,n),DT(n,e);if(n instanceof ks)return(function(r,i){if(!IT(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=Vu(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ak(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ee.fromDate(r);return{timestampValue:lu(i.serializer,o)}}if(r instanceof Ee){let o=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lu(i.serializer,o)}}if(r instanceof Pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:zD(i.serializer,r._byteString)};if(r instanceof je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kn)return(function(s,c){return{mapValue:{fields:{[Pg]:{stringValue:kg},[Vi]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return Vg(c.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Sg(r)}`)})(n,e)}function DT(n,e){let t={};return vD(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jn(n,(r,i)=>{let o=Vu(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function TT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ee||n instanceof Pn||n instanceof Mn||n instanceof je||n instanceof ks||n instanceof kn)}function Yg(n,e,t){if(!TT(t)||!rD(t)){let r=Sg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Tg(n,e,t){if((e=Le(e))instanceof Yi)return e._internalPath;if(typeof e=="string")return Zg(n,e);throw Su("Field path arguments must be of type string or ",n,!1,void 0,t)}var zx=new RegExp("[~\\*/\\[\\]]");function Zg(n,e,t){if(e.search(zx)>=0)throw Su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yi(...e.split("."))._internalPath}catch{throw Su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Su(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(N.INVALID_ARGUMENT,c+n+u)}function CT(n,e){return n.some(t=>t.isEqual(e))}var Nu=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Cg=class extends Nu{data(){return super.data()}};function bT(n,e){return typeof e=="string"?Zg(n,e):e instanceof Yi?e._internalPath:e._delegate._internalPath}function Gx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bg=class{convertValue(e,t="none"){switch(On(e)){case 0:return null;case 1:return e.booleanValue;case 2:return he(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ln(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw V(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return jn(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Vi].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>he(s.doubleValue));return new kn(o)}convertGeoPoint(e){return new Pn(he(e.latitude),he(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Pu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bs(e));default:return null}}convertTimestamp(e){let t=un(e);return new Ee(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=fe.fromString(e);ie(ZD(r),9688,{name:e});let i=new iu(r.get(1),r.get(3)),o=new L(r.popFirst(5));return i.isEqual(t)||cn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Wx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Rr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mr=class n extends Nu{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Oi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:_e("string",Mr._jsonSchemaVersion),bundleSource:_e("string","DocumentSnapshot"),bundleName:_e("string"),bundle:_e("string")};var Oi=class extends Mr{data(e={}){return super.data(e)}},Fi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Oi(this._firestore,this._userDataWriter,r.key,r,new Rr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Oi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Rr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Oi(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Rr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:Kx(c.type),doc:u,oldIndex:d,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ds.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Kx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V(61501,{type:n})}}Fi._jsonSchemaVersion="firestore/querySnapshot/1.0",Fi._jsonSchema={type:_e("string",Fi._jsonSchemaVersion),bundleSource:_e("string","QuerySnapshot"),bundleName:_e("string"),bundle:_e("string")};var Ru=class extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,t)}};function AT(n,e,t,...r){n=Nn(n,je);let i=Nn(n.firestore,Vn),o=wT(i),s;return s=typeof(e=Le(e))=="string"||e instanceof Yi?qx(o,"updateDoc",n._key,e,t,r):Hx(o,"updateDoc",n._key,e),Xg(i,[s.toMutation(n._key,an.exists(!0))])}function ST(n){return Xg(Nn(n.firestore,Vn),[new Ss(n._key,an.none())])}function NT(n,e){let t=Nn(n.firestore,Vn),r=Qg(n),i=Wx(n.converter,e);return Xg(t,[$x(wT(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}function Jg(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xw(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Xw(e[s])){let g=e[s];e[s]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[s+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[s+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,d,f;if(n instanceof je)d=Nn(n.firestore,Vn),f=Lg(n._key.path),u={next:g=>{e[s]&&e[s](Qx(d,n,g))},error:e[s+1],complete:e[s+2]};else{let g=Nn(n,Tu);d=Nn(g.firestore,Vn),f=g._query;let m=new Ru(d);u={next:_=>{e[s]&&e[s](new Fi(d,m,g,_))},error:e[s+1],complete:e[s+2]},Gx(n._query)}return(function(m,_,S,P){let R=new _g(P),F=new hg(_,R,S);return m.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return Ex(yield Kw(m),F)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return Ix(yield Kw(m),F)}))}})(ET(d),f,c,u)}function Xg(n,e){return(function(r,i){let o=new sn;return r.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return Nx(yield jx(r),i,o)})),o.promise})(ET(n),e)}function Qx(n,e,t){let r=t.docs.get(e._key),i=new Ru(n);return new Mr(n,i,e._key,r,new Rr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Zi=i})(Ti),Tt(new ze("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Vn(new Wf(r.getProvider("auth-internal")),new Yf(s,r.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(d.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),me(uw,lw,e),me(uw,lw,"esm2017")})();var ju=function(){return ju=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ju.apply(this,arguments)};var Jx={includeMetadataChanges:!1};function RT(n,e){return e===void 0&&(e=Jx),new Xe(function(t){var r=Jg(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function MT(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:ju(ju({},r),(t={},t[e.idField]=n.id,t))}function PT(n){return RT(n,{includeMetadataChanges:!0}).pipe(Xr(function(e){return e.docs}))}function kT(n,e){return e===void 0&&(e={}),PT(n).pipe(Xr(function(t){return t.map(function(r){return MT(r,e)})}))}var jr=class{constructor(e){return e}},xT="firestore",em=class{constructor(){return Ai(xT)}};var tm=new K("angularfire2.firestore-instances");function Xx(n,e){let t=Nc(xT,n,e);return t&&new jr(t)}function eO(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new jr(r)}}var tO={provide:em,deps:[[new kt,tm]]},nO={provide:jr,useFactory:Xx,deps:[[new kt,tm],Tr]};function OT(n,...e){return me("angularfire",wr.full,"fst"),ii([nO,tO,{provide:tm,useFactory:eO(n),multi:!0,deps:[de,Qe,Dr,ls,[new kt,Hc],[new kt,Mc],...e]}])}var FT=dt(kT,!0);var LT=dt(NT,!0,2);var nm=dt(vT,!0,2);var VT=dt(ST,!0,2);var rm=dt(Qg,!0,2);var jT=dt(_T,!0);var BT=dt(AT,!0,2);function iO(n,e){if(n&1){let t=Dh();Ze(0,"div",6)(1,"input",7),rt("input",function(i){let o=wn(t).$implicit;return Dn(o.name=i.target.value)}),qe(),Ze(2,"input",8),rt("input",function(i){let o=wn(t).$implicit;return Dn(o.age=i.target.valueAsNumber)}),qe(),Ze(3,"input",7),rt("input",function(i){let o=wn(t).$implicit;return Dn(o.course=i.target.value)}),qe(),Ze(4,"button",4),rt("click",function(){let i=wn(t).$implicit,o=lc();return Dn(o.updateStudent(i.id,i.name,i.age,i.course))}),wi(5,"Update"),qe(),Ze(6,"button",4),rt("click",function(){let i=wn(t).$implicit,o=lc();return Dn(o.deleteStudent(i.id))}),wi(7,"Delete"),qe()()}if(n&2){let t=e.$implicit;xt(),Ot("value",t.name),xt(),Ot("value",t.age),xt(),Ot("value",t.course)}}var Bu=class n{constructor(e){this.firestore=e;let t=nm(this.firestore,"students");FT(t,{idField:"id"}).subscribe(r=>{this.students=r})}title=Jt("APPDEV Angular with Firebase Demonstration with Student Management System");studentName=Jt("");studentAge=Jt(null);studentCourse=Jt("");students=[];addStudent(){let e=this.studentName(),t=this.studentAge(),r=this.studentCourse();if(e&&t){let i=nm(this.firestore,"students");LT(i,{name:e,age:t}),this.studentName.set(""),this.studentAge.set(null),this.studentCourse.set("")}}deleteStudent(e){let t=rm(this.firestore,`students/${e}`);VT(t)}updateStudent(e,t,r,i){let o=rm(this.firestore,`students/${e}`);BT(o,{name:t,age:r,course:i})}static \u0275fac=function(t){return new(t||n)(en(jr))};static \u0275cmp=Eh({type:n,selectors:[["app-root"]],decls:10,vars:5,consts:[[2,"text-align","center","margin-top","20px"],["type","text","placeholder","Name",3,"input","value"],["type","number","placeholder","Age",3,"input","value"],["type","text","placeholder","Course",3,"input","value"],[3,"click"],["style","margin-bottom:10px;",4,"ngFor","ngForOf"],[2,"margin-bottom","10px"],[3,"input","value"],["type","number",3,"input","value"]],template:function(t,r){t&1&&(Ze(0,"div",0)(1,"h1"),wi(2),qe(),Ze(3,"input",1),rt("input",function(o){return r.studentName.set(o.target.value)}),qe(),Ze(4,"input",2),rt("input",function(o){return r.studentAge.set(o.target.valueAsNumber)}),qe(),Ze(5,"input",3),rt("input",function(o){return r.studentCourse.set(o.target.value)}),qe(),Ze(6,"button",4),rt("click",function(){return r.addStudent()}),wi(7,"Add Student"),qe(),uc(8,"hr"),ac(9,iO,8,3,"div",5),qe()),t&2&&(xt(2),dc(r.title()),xt(),Ot("value",r.studentName()),xt(),Ot("value",r.studentAge()),xt(),Ot("value",r.studentCourse()),xt(4),Ot("ngForOf",r.students))},dependencies:[mc,gc,XE],encapsulation:2})};Xd({providedIn:"root"});var UT={production:!1,firebase:{apiKey:"AIzaSyCH0jijErL-q1Onh128797bbxmwbEERshk",authDomain:"appdev1-eba00.firebaseapp.com",projectId:"appdev1-eba00",storageBucket:"appdev1-eba00.firebasestorage.ap",messagingSenderId:"860095377770",appId:"1:860095377770:web:5dae100523e115ef0ff513",measurementId:"G-ZQ41317WZV"}};Hh(Bu,{providers:[PI(()=>kI(UT.firebase)),OT(()=>jT())]}).catch(n=>console.error(n));
